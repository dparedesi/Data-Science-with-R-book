<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Ggplot and dplyr | Data Science with R</title>
  <meta name="description" content="A comprehensive guide to data science using R, covering fundamentals, visualization, statistics, machine learning with tidymodels, and generative AI integration. Third Edition by Daniel Paredes." />
  <meta name="generator" content="bookdown 0.46 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Ggplot and dplyr | Data Science with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A comprehensive guide to data science using R, covering fundamentals, visualization, statistics, machine learning with tidymodels, and generative AI integration. Third Edition by Daniel Paredes." />
  <meta name="github-repo" content="dparedesi/Data-Science-with-R-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Ggplot and dplyr | Data Science with R" />
  
  <meta name="twitter:description" content="A comprehensive guide to data science using R, covering fundamentals, visualization, statistics, machine learning with tidymodels, and generative AI integration. Third Edition by Daniel Paredes." />
  

<meta name="author" content="Author: Mg. Daniel Paredes Inilupu" />


<meta name="date" content="2025-12-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="advanced-techniques.html"/>
<link rel="next" href="gapminder.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics: Sin Vista -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VJJ963010J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VJJ963010J');
</script>

<!-- Global site tag (gtag.js) - Google Analytics: Vista -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165839710-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165839710-1');
</script>

<!-- Global site tag (gtag.js) - Google Analytics: Agentedec4mbio -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-17876479-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-17876479-1');
</script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#support-this-work"><i class="fa fa-check"></i>Support This Work</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#stay-connected"><i class="fa fa-check"></i>Stay Connected</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html"><i class="fa fa-check"></i>Acknowledgments</a>
<ul>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html#family"><i class="fa fa-check"></i>Family</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html#mentors-and-inspirations"><i class="fa fa-check"></i>Mentors and Inspirations</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html#contributors"><i class="fa fa-check"></i>Contributors</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#why-r"><i class="fa fa-check"></i>Why R?</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#installing-r"><i class="fa fa-check"></i>Installing R</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#installing-rstudio"><i class="fa fa-check"></i>Installing RStudio</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#rstudio-sections"><i class="fa fa-check"></i>RStudio Sections</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#essential-keyboard-shortcuts"><i class="fa fa-check"></i>Essential Keyboard Shortcuts</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#testing-your-installation"><i class="fa fa-check"></i>Testing Your Installation</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#writing-scripts"><i class="fa fa-check"></i>Writing Scripts</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#whats-next"><i class="fa fa-check"></i>What’s Next?</a></li>
</ul></li>
<li class="part"><span><b>I Fundamentals and Key Tools</b></span></li>
<li class="chapter" data-level="1" data-path="objects.html"><a href="objects.html"><i class="fa fa-check"></i><b>1</b> Objects</a>
<ul>
<li class="chapter" data-level="1.1" data-path="objects.html"><a href="objects.html#what-are-objects-in-r"><i class="fa fa-check"></i><b>1.1</b> What are objects in R?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="objects.html"><a href="objects.html#r-as-an-object-oriented-language"><i class="fa fa-check"></i><b>1.1.1</b> R as an object-oriented language</a></li>
<li class="chapter" data-level="1.1.2" data-path="objects.html"><a href="objects.html#the-power-of-abstraction"><i class="fa fa-check"></i><b>1.1.2</b> The power of abstraction</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="objects.html"><a href="objects.html#variables-the-first-objects-on-your-journey"><i class="fa fa-check"></i><b>1.2</b> Variables: The first objects on your journey</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="objects.html"><a href="objects.html#creating-variables-in-r"><i class="fa fa-check"></i><b>1.2.1</b> Creating variables in R</a></li>
<li class="chapter" data-level="1.2.2" data-path="objects.html"><a href="objects.html#operations-with-variables"><i class="fa fa-check"></i><b>1.2.2</b> Operations with variables</a></li>
<li class="chapter" data-level="1.2.3" data-path="objects.html"><a href="objects.html#best-practices-for-naming-variables"><i class="fa fa-check"></i><b>1.2.3</b> Best practices for naming variables</a></li>
<li class="chapter" data-level="1.2.4" data-path="objects.html"><a href="objects.html#data-types"><i class="fa fa-check"></i><b>1.2.4</b> Data types</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="objects.html"><a href="objects.html#object-types-for-complex-data"><i class="fa fa-check"></i><b>1.3</b> Object types for complex data</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="objects.html"><a href="objects.html#vectors-organizing-information-of-the-same-type"><i class="fa fa-check"></i><b>1.3.1</b> Vectors: organizing information of the same type</a></li>
<li class="chapter" data-level="1.3.2" data-path="objects.html"><a href="objects.html#lists-grouping-objects-of-different-types"><i class="fa fa-check"></i><b>1.3.2</b> Lists: grouping objects of different types</a></li>
<li class="chapter" data-level="1.3.3" data-path="objects.html"><a href="objects.html#matrices-organizing-data-in-rows-and-columns"><i class="fa fa-check"></i><b>1.3.3</b> Matrices: organizing data in rows and columns</a></li>
<li class="chapter" data-level="1.3.4" data-path="objects.html"><a href="objects.html#arrays-multidimensional-matrices"><i class="fa fa-check"></i><b>1.3.4</b> Arrays: multidimensional matrices</a></li>
<li class="chapter" data-level="1.3.5" data-path="objects.html"><a href="objects.html#factors-representing-categorical-data"><i class="fa fa-check"></i><b>1.3.5</b> Factors: representing categorical data</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="objects.html"><a href="objects.html#the-universe-of-objects-in-r"><i class="fa fa-check"></i><b>1.4</b> The Universe of Objects in R</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="objects.html"><a href="objects.html#philosophy-of-objects-in-r"><i class="fa fa-check"></i><b>1.4.1</b> Philosophy of objects in R</a></li>
<li class="chapter" data-level="1.4.2" data-path="objects.html"><a href="objects.html#comparison-with-other-languages"><i class="fa fa-check"></i><b>1.4.2</b> Comparison with other languages</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="objects.html"><a href="objects.html#exercises"><i class="fa fa-check"></i><b>1.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>2</b> Functions</a>
<ul>
<li class="chapter" data-level="2.1" data-path="functions.html"><a href="functions.html#introduction-to-the-world-of-functions"><i class="fa fa-check"></i><b>2.1</b> Introduction to the world of functions</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="functions.html"><a href="functions.html#what-are-functions"><i class="fa fa-check"></i><b>2.1.1</b> What are functions?</a></li>
<li class="chapter" data-level="2.1.2" data-path="functions.html"><a href="functions.html#why-use-functions"><i class="fa fa-check"></i><b>2.1.2</b> Why use functions?</a></li>
<li class="chapter" data-level="2.1.3" data-path="functions.html"><a href="functions.html#first-functions-exploring-basic-r-functions"><i class="fa fa-check"></i><b>2.1.3</b> First functions: exploring basic R functions</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="functions.html"><a href="functions.html#anatomy-of-a-function"><i class="fa fa-check"></i><b>2.2</b> Anatomy of a function</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="functions.html"><a href="functions.html#arguments-the-ingredients-of-the-function"><i class="fa fa-check"></i><b>2.2.1</b> Arguments: the ingredients of the function</a></li>
<li class="chapter" data-level="2.2.2" data-path="functions.html"><a href="functions.html#body-the-instructions-of-the-function"><i class="fa fa-check"></i><b>2.2.2</b> Body: the instructions of the function</a></li>
<li class="chapter" data-level="2.2.3" data-path="functions.html"><a href="functions.html#return-value-the-result-of-the-function"><i class="fa fa-check"></i><b>2.2.3</b> Return value: the result of the function</a></li>
<li class="chapter" data-level="2.2.4" data-path="functions.html"><a href="functions.html#examples-creating-simple-functions-step-by-step"><i class="fa fa-check"></i><b>2.2.4</b> Examples: creating simple functions step by step</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="functions.html"><a href="functions.html#mastering-the-use-of-functions"><i class="fa fa-check"></i><b>2.3</b> Mastering the use of functions</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="functions.html"><a href="functions.html#functions-with-a-variable-number-of-arguments-...-adapting-to-different-situations"><i class="fa fa-check"></i><b>2.3.1</b> Functions with a variable number of arguments (<code>...</code>): Adapting to different situations</a></li>
<li class="chapter" data-level="2.3.2" data-path="functions.html"><a href="functions.html#variable-scope-local-and-global-variables"><i class="fa fa-check"></i><b>2.3.2</b> Variable scope: local and global variables</a></li>
<li class="chapter" data-level="2.3.3" data-path="functions.html"><a href="functions.html#examples-functions-to-calculate-taxes-discounts-etc."><i class="fa fa-check"></i><b>2.3.3</b> Examples: functions to calculate taxes, discounts, etc.</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="functions.html"><a href="functions.html#higher-order-functions"><i class="fa fa-check"></i><b>2.4</b> Higher-order functions</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="functions.html"><a href="functions.html#lapply-and-sapply-applying-a-function-to-each-element"><i class="fa fa-check"></i><b>2.4.1</b> <code>lapply()</code> and <code>sapply()</code>: applying a function to each element</a></li>
<li class="chapter" data-level="2.4.2" data-path="functions.html"><a href="functions.html#apply-applying-a-function-to-rows-or-columns"><i class="fa fa-check"></i><b>2.4.2</b> <code>apply()</code>: applying a function to rows or columns</a></li>
<li class="chapter" data-level="2.4.3" data-path="functions.html"><a href="functions.html#mapply-applying-a-function-to-multiple-arguments"><i class="fa fa-check"></i><b>2.4.3</b> <code>mapply()</code>: applying a function to multiple arguments</a></li>
<li class="chapter" data-level="2.4.4" data-path="functions.html"><a href="functions.html#examples-data-analysis-with-higher-order-functions"><i class="fa fa-check"></i><b>2.4.4</b> Examples: data analysis with higher-order functions</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="functions.html"><a href="functions.html#closures-functions-with-memory"><i class="fa fa-check"></i><b>2.5</b> Closures: functions with memory</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="functions.html"><a href="functions.html#concept-functions-that-remember"><i class="fa fa-check"></i><b>2.5.1</b> Concept: functions that “remember”</a></li>
<li class="chapter" data-level="2.5.2" data-path="functions.html"><a href="functions.html#applications-creating-counters-functions-with-internal-state"><i class="fa fa-check"></i><b>2.5.2</b> Applications: creating counters, functions with internal state</a></li>
<li class="chapter" data-level="2.5.3" data-path="functions.html"><a href="functions.html#examples-simulating-a-game-creating-an-operation-history"><i class="fa fa-check"></i><b>2.5.3</b> Examples: simulating a game, creating an operation history</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="functions.html"><a href="functions.html#debugging-and-error-handling-solving-the-mysteries-of-your-code"><i class="fa fa-check"></i><b>2.6</b> Debugging and error handling: solving the mysteries of your code</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="functions.html"><a href="functions.html#identifying-errors-common-error-messages-in-r"><i class="fa fa-check"></i><b>2.6.1</b> Identifying errors: common error messages in R</a></li>
<li class="chapter" data-level="2.6.2" data-path="functions.html"><a href="functions.html#debugging-tools-debug-traceback"><i class="fa fa-check"></i><b>2.6.2</b> Debugging tools: <code>debug()</code>, <code>traceback()</code></a></li>
<li class="chapter" data-level="2.6.3" data-path="functions.html"><a href="functions.html#error-handling-trycatch"><i class="fa fa-check"></i><b>2.6.3</b> Error handling: <code>tryCatch()</code></a></li>
<li class="chapter" data-level="2.6.4" data-path="functions.html"><a href="functions.html#examples-debugging-functions-with-errors-handling-exceptions"><i class="fa fa-check"></i><b>2.6.4</b> Examples: debugging functions with errors, handling exceptions</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="functions.html"><a href="functions.html#exercises-1"><i class="fa fa-check"></i><b>2.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>3</b> Data Frames</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-frames.html"><a href="data-frames.html#introduction-to-data-frames"><i class="fa fa-check"></i><b>3.1</b> Introduction to Data Frames</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-frames.html"><a href="data-frames.html#what-are-data-frames"><i class="fa fa-check"></i><b>3.1.1</b> What are data frames?</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-frames.html"><a href="data-frames.html#why-data-frames"><i class="fa fa-check"></i><b>3.1.2</b> Why data frames?</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-frames.html"><a href="data-frames.html#data-frames-in-action-exploring-information-about-the-united-states"><i class="fa fa-check"></i><b>3.1.3</b> Data Frames in action: exploring information about the United States</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-frames.html"><a href="data-frames.html#creating-data-frames-building-your-database-for-the-move"><i class="fa fa-check"></i><b>3.2</b> Creating Data Frames: Building your database for the move</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-frames.html"><a href="data-frames.html#importing-data-from-files-csv-excel"><i class="fa fa-check"></i><b>3.2.1</b> Importing data from files: CSV, Excel</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-frames.html"><a href="data-frames.html#creating-data-frames-manually"><i class="fa fa-check"></i><b>3.2.2</b> Creating data frames manually</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-frames.html"><a href="data-frames.html#examples"><i class="fa fa-check"></i><b>3.2.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-frames.html"><a href="data-frames.html#exploring-data-frames-discovering-the-secrets-of-your-data"><i class="fa fa-check"></i><b>3.3</b> Exploring Data Frames: Discovering the secrets of your data</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-frames.html"><a href="data-frames.html#accessing-rows-columns-and-cells"><i class="fa fa-check"></i><b>3.3.1</b> Accessing rows, columns, and cells</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-frames.html"><a href="data-frames.html#functions-for-exploring-data-frames"><i class="fa fa-check"></i><b>3.3.2</b> Functions for exploring data frames</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-frames.html"><a href="data-frames.html#examples-exploring-data-frames-with-move-information"><i class="fa fa-check"></i><b>3.3.3</b> Examples: exploring data frames with move information</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-frames.html"><a href="data-frames.html#manipulating-data-frames-transforming-your-data"><i class="fa fa-check"></i><b>3.4</b> Manipulating Data Frames: Transforming your data</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data-frames.html"><a href="data-frames.html#introduction-to-the-pipeline-operator"><i class="fa fa-check"></i><b>3.4.1</b> Introduction to the pipeline operator (<code>|&gt;</code>)</a></li>
<li class="chapter" data-level="3.4.2" data-path="data-frames.html"><a href="data-frames.html#transforming-a-table-with-mutate"><i class="fa fa-check"></i><b>3.4.2</b> Transforming a table with <code>mutate()</code></a></li>
<li class="chapter" data-level="3.4.3" data-path="data-frames.html"><a href="data-frames.html#filtering-data-selecting-cities-that-interest-you"><i class="fa fa-check"></i><b>3.4.3</b> Filtering data: selecting cities that interest you</a></li>
<li class="chapter" data-level="3.4.4" data-path="data-frames.html"><a href="data-frames.html#sorting-data-finding-the-safest-cities"><i class="fa fa-check"></i><b>3.4.4</b> Sorting data: finding the safest cities</a></li>
<li class="chapter" data-level="3.4.5" data-path="data-frames.html"><a href="data-frames.html#aggregating-and-summarizing-data-obtaining-general-overview"><i class="fa fa-check"></i><b>3.4.5</b> Aggregating and summarizing data: obtaining general overview</a></li>
<li class="chapter" data-level="3.4.6" data-path="data-frames.html"><a href="data-frames.html#joining-data-frames-combining-information"><i class="fa fa-check"></i><b>3.4.6</b> Joining data frames: combining information</a></li>
<li class="chapter" data-level="3.4.7" data-path="data-frames.html"><a href="data-frames.html#examples-1"><i class="fa fa-check"></i><b>3.4.7</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="data-frames.html"><a href="data-frames.html#exercises-2"><i class="fa fa-check"></i><b>3.5</b> Exercises</a></li>
<li class="chapter" data-level="3.6" data-path="data-frames.html"><a href="data-frames.html#data-frames-in-plots"><i class="fa fa-check"></i><b>3.6</b> Data frames in plots</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="data-frames.html"><a href="data-frames.html#scatter-plots"><i class="fa fa-check"></i><b>3.6.1</b> Scatter plots</a></li>
<li class="chapter" data-level="3.6.2" data-path="data-frames.html"><a href="data-frames.html#histograms"><i class="fa fa-check"></i><b>3.6.2</b> Histograms</a></li>
<li class="chapter" data-level="3.6.3" data-path="data-frames.html"><a href="data-frames.html#box-plot"><i class="fa fa-check"></i><b>3.6.3</b> Box plot</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="data-frames.html"><a href="data-frames.html#data-interpretation"><i class="fa fa-check"></i><b>3.7</b> Data interpretation</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="data-frames.html"><a href="data-frames.html#quartiles"><i class="fa fa-check"></i><b>3.7.1</b> Quartiles</a></li>
<li class="chapter" data-level="3.7.2" data-path="data-frames.html"><a href="data-frames.html#interpretation-of-box-plot"><i class="fa fa-check"></i><b>3.7.2</b> Interpretation of box plot</a></li>
<li class="chapter" data-level="3.7.3" data-path="data-frames.html"><a href="data-frames.html#examples-2"><i class="fa fa-check"></i><b>3.7.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="data-frames.html"><a href="data-frames.html#exercises-3"><i class="fa fa-check"></i><b>3.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="advanced-techniques.html"><a href="advanced-techniques.html"><i class="fa fa-check"></i><b>4</b> Advanced Techniques</a>
<ul>
<li class="chapter" data-level="4.1" data-path="advanced-techniques.html"><a href="advanced-techniques.html#metaprogramming-writing-code-that-writes-code"><i class="fa fa-check"></i><b>4.1</b> Metaprogramming: writing code that writes code</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="advanced-techniques.html"><a href="advanced-techniques.html#manipulating-expressions-the-art-of-sculpting-code"><i class="fa fa-check"></i><b>4.1.1</b> Manipulating expressions: The art of sculpting code</a></li>
<li class="chapter" data-level="4.1.2" data-path="advanced-techniques.html"><a href="advanced-techniques.html#examples-3"><i class="fa fa-check"></i><b>4.1.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="advanced-techniques.html"><a href="advanced-techniques.html#functional-programming-a-new-paradigm"><i class="fa fa-check"></i><b>4.2</b> Functional programming: a new paradigm</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="advanced-techniques.html"><a href="advanced-techniques.html#basic-principles-of-functional-programming"><i class="fa fa-check"></i><b>4.2.1</b> Basic principles of functional programming</a></li>
<li class="chapter" data-level="4.2.2" data-path="advanced-techniques.html"><a href="advanced-techniques.html#higher-order-functions-in-r"><i class="fa fa-check"></i><b>4.2.2</b> Higher-order functions in R</a></li>
<li class="chapter" data-level="4.2.3" data-path="advanced-techniques.html"><a href="advanced-techniques.html#examples-4"><i class="fa fa-check"></i><b>4.2.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="advanced-techniques.html"><a href="advanced-techniques.html#r6-the-future-of-oop-in-r"><i class="fa fa-check"></i><b>4.3</b> R6: The future of OOP in R</a></li>
<li class="chapter" data-level="4.4" data-path="advanced-techniques.html"><a href="advanced-techniques.html#exercises-4"><i class="fa fa-check"></i><b>4.4</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Data Visualization and Summarization</b></span></li>
<li class="chapter" data-level="5" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html"><i class="fa fa-check"></i><b>5</b> Ggplot and dplyr</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#creating-the-ggplot-object"><i class="fa fa-check"></i><b>5.1</b> Creating the ggplot object</a></li>
<li class="chapter" data-level="5.2" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#aesthetic-mapping-layer"><i class="fa fa-check"></i><b>5.2</b> Aesthetic mapping layer</a></li>
<li class="chapter" data-level="5.3" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#geoms-layer"><i class="fa fa-check"></i><b>5.3</b> Geoms layer</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#tweaking-aes-and-geoms"><i class="fa fa-check"></i><b>5.3.1</b> Tweaking aes and geoms</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#scale-layer"><i class="fa fa-check"></i><b>5.4</b> Scale layer</a></li>
<li class="chapter" data-level="5.5" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#label-title-and-legend-layer"><i class="fa fa-check"></i><b>5.5</b> Label, title and legend layer</a></li>
<li class="chapter" data-level="5.6" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#reference-lines"><i class="fa fa-check"></i><b>5.6</b> Reference lines</a></li>
<li class="chapter" data-level="5.7" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#changing-the-plot-style"><i class="fa fa-check"></i><b>5.7</b> Changing the plot style</a></li>
<li class="chapter" data-level="5.8" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#saving-plots"><i class="fa fa-check"></i><b>5.8</b> Saving plots</a></li>
<li class="chapter" data-level="5.9" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#summarizing-data-with-dplyr"><i class="fa fa-check"></i><b>5.9</b> Summarizing data with dplyr</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#summarize-function"><i class="fa fa-check"></i><b>5.9.1</b> Summarize function</a></li>
<li class="chapter" data-level="5.9.2" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#group-by-function"><i class="fa fa-check"></i><b>5.9.2</b> Group By Function</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#exercises-5"><i class="fa fa-check"></i><b>5.10</b> Exercises</a></li>
<li class="chapter" data-level="5.11" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#key-takeaways"><i class="fa fa-check"></i><b>5.11</b> Key Takeaways</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="gapminder.html"><a href="gapminder.html"><i class="fa fa-check"></i><b>6</b> Gapminder</a>
<ul>
<li class="chapter" data-level="6.1" data-path="gapminder.html"><a href="gapminder.html#initial-gapminder-plots"><i class="fa fa-check"></i><b>6.1</b> Initial gapminder plots</a></li>
<li class="chapter" data-level="6.2" data-path="gapminder.html"><a href="gapminder.html#facets"><i class="fa fa-check"></i><b>6.2</b> Facets</a></li>
<li class="chapter" data-level="6.3" data-path="gapminder.html"><a href="gapminder.html#time-series"><i class="fa fa-check"></i><b>6.3</b> Time series</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="gapminder.html"><a href="gapminder.html#individual-time-series"><i class="fa fa-check"></i><b>6.3.1</b> Individual time series</a></li>
<li class="chapter" data-level="6.3.2" data-path="gapminder.html"><a href="gapminder.html#multiple-time-series"><i class="fa fa-check"></i><b>6.3.2</b> Multiple time series</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="gapminder.html"><a href="gapminder.html#exercises-6"><i class="fa fa-check"></i><b>6.4</b> Exercises</a></li>
<li class="chapter" data-level="6.5" data-path="gapminder.html"><a href="gapminder.html#histograms-with-ggplot"><i class="fa fa-check"></i><b>6.5</b> Histograms with ggplot</a></li>
<li class="chapter" data-level="6.6" data-path="gapminder.html"><a href="gapminder.html#box-plots-with-ggplot"><i class="fa fa-check"></i><b>6.6</b> Box plots with ggplot</a></li>
<li class="chapter" data-level="6.7" data-path="gapminder.html"><a href="gapminder.html#comparison-of-distributions"><i class="fa fa-check"></i><b>6.7</b> Comparison of distributions</a></li>
<li class="chapter" data-level="6.8" data-path="gapminder.html"><a href="gapminder.html#exercises-7"><i class="fa fa-check"></i><b>6.8</b> Exercises</a></li>
<li class="chapter" data-level="6.9" data-path="gapminder.html"><a href="gapminder.html#key-takeaways-1"><i class="fa fa-check"></i><b>6.9</b> Key Takeaways</a></li>
</ul></li>
<li class="part"><span><b>III Statistics</b></span></li>
<li class="chapter" data-level="" data-path="introduction-to-probabilities.html"><a href="introduction-to-probabilities.html"><i class="fa fa-check"></i>Introduction to Probabilities</a></li>
<li class="chapter" data-level="7" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html"><i class="fa fa-check"></i><b>7</b> Discrete Probabilities</a>
<ul>
<li class="chapter" data-level="7.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#calculation-using-the-mathematical-definition"><i class="fa fa-check"></i><b>7.1</b> Calculation using the mathematical definition</a></li>
<li class="chapter" data-level="7.2" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#monte-carlo-simulation-for-discrete-variables"><i class="fa fa-check"></i><b>7.2</b> Monte Carlo Simulation for Discrete Variables</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#other-functions-to-create-vectors"><i class="fa fa-check"></i><b>7.2.1</b> Other functions to create vectors</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#exercises-8"><i class="fa fa-check"></i><b>7.3</b> Exercises</a></li>
<li class="chapter" data-level="7.4" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#combinations-and-permutations"><i class="fa fa-check"></i><b>7.4</b> Combinations and Permutations</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#permutations"><i class="fa fa-check"></i><b>7.4.1</b> Permutations</a></li>
<li class="chapter" data-level="7.4.2" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#combinations"><i class="fa fa-check"></i><b>7.4.2</b> Combinations</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#sufficient-experiments-with-monte-carlo-simulation"><i class="fa fa-check"></i><b>7.5</b> Sufficient Experiments with Monte Carlo Simulation</a></li>
<li class="chapter" data-level="7.6" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#case-birthdays-in-classrooms"><i class="fa fa-check"></i><b>7.6</b> Case: Birthdays in Classrooms</a></li>
<li class="chapter" data-level="7.7" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#exercises-9"><i class="fa fa-check"></i><b>7.7</b> Exercises</a></li>
<li class="chapter" data-level="7.8" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#integrative-exercise"><i class="fa fa-check"></i><b>7.8</b> Integrative Exercise</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#monty-hall-problem"><i class="fa fa-check"></i><b>7.8.1</b> Monty Hall Problem</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html"><i class="fa fa-check"></i><b>8</b> Continuous Probabilities</a>
<ul>
<li class="chapter" data-level="8.1" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#learning-objectives"><i class="fa fa-check"></i><b>8.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#empirical-distribution"><i class="fa fa-check"></i><b>8.2</b> Empirical Distribution</a></li>
<li class="chapter" data-level="8.3" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#theoretical-distribution"><i class="fa fa-check"></i><b>8.3</b> Theoretical Distribution</a></li>
<li class="chapter" data-level="8.4" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#key-takeaways-2"><i class="fa fa-check"></i><b>8.4</b> Key Takeaways</a></li>
<li class="chapter" data-level="8.5" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#exercises-10"><i class="fa fa-check"></i><b>8.5</b> Exercises</a></li>
<li class="chapter" data-level="8.6" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#monte-carlo-simulation-for-continuous-variables"><i class="fa fa-check"></i><b>8.6</b> Monte Carlo Simulation for Continuous Variables</a></li>
<li class="chapter" data-level="8.7" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#exercises-11"><i class="fa fa-check"></i><b>8.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="statistical-inference.html"><a href="statistical-inference.html"><i class="fa fa-check"></i><b>9</b> Statistical Inference</a>
<ul>
<li class="chapter" data-level="9.1" data-path="statistical-inference.html"><a href="statistical-inference.html#learning-objectives-1"><i class="fa fa-check"></i><b>9.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="9.2" data-path="statistical-inference.html"><a href="statistical-inference.html#expected-value"><i class="fa fa-check"></i><b>9.2</b> Expected Value</a></li>
<li class="chapter" data-level="9.3" data-path="statistical-inference.html"><a href="statistical-inference.html#central-limit-theorem"><i class="fa fa-check"></i><b>9.3</b> Central Limit Theorem</a></li>
<li class="chapter" data-level="9.4" data-path="statistical-inference.html"><a href="statistical-inference.html#key-takeaways-3"><i class="fa fa-check"></i><b>9.4</b> Key Takeaways</a></li>
<li class="chapter" data-level="9.5" data-path="statistical-inference.html"><a href="statistical-inference.html#exercises-12"><i class="fa fa-check"></i><b>9.5</b> Exercises</a></li>
<li class="chapter" data-level="9.6" data-path="statistical-inference.html"><a href="statistical-inference.html#parameter-estimation-method"><i class="fa fa-check"></i><b>9.6</b> Parameter Estimation Method</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="statistical-inference.html"><a href="statistical-inference.html#margin-of-error"><i class="fa fa-check"></i><b>9.6.1</b> Margin of Error</a></li>
<li class="chapter" data-level="9.6.2" data-path="statistical-inference.html"><a href="statistical-inference.html#confidence-intervals"><i class="fa fa-check"></i><b>9.6.2</b> Confidence Intervals</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="statistical-inference.html"><a href="statistical-inference.html#spread-estimation"><i class="fa fa-check"></i><b>9.7</b> Spread Estimation</a></li>
<li class="chapter" data-level="9.8" data-path="statistical-inference.html"><a href="statistical-inference.html#estimates-outside-election-polls"><i class="fa fa-check"></i><b>9.8</b> Estimates Outside Election Polls</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="statistical-inference.html"><a href="statistical-inference.html#example-estimating-average-height"><i class="fa fa-check"></i><b>9.8.1</b> Example: Estimating Average Height</a></li>
</ul></li>
<li class="chapter" data-level="9.9" data-path="statistical-inference.html"><a href="statistical-inference.html#exercises-13"><i class="fa fa-check"></i><b>9.9</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>IV Data Wrangling</b></span></li>
<li class="chapter" data-level="" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="10" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html"><i class="fa fa-check"></i><b>10</b> Data import and consolidation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#importing-from-files"><i class="fa fa-check"></i><b>10.1</b> Importing from files</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#working-directory"><i class="fa fa-check"></i><b>10.1.1</b> Working Directory</a></li>
<li class="chapter" data-level="10.1.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#readr-and-readxl-packages"><i class="fa fa-check"></i><b>10.1.2</b> readr and readxl packages</a></li>
<li class="chapter" data-level="10.1.3" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#importing-files-from-the-internet"><i class="fa fa-check"></i><b>10.1.3</b> Importing files from the internet</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#tidy-data"><i class="fa fa-check"></i><b>10.2</b> Tidy data</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#transforming-to-tidy-data"><i class="fa fa-check"></i><b>10.2.1</b> Transforming to tidy data</a></li>
<li class="chapter" data-level="10.2.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#separate-function"><i class="fa fa-check"></i><b>10.2.2</b> separate function</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#exercises-14"><i class="fa fa-check"></i><b>10.3</b> Exercises</a></li>
<li class="chapter" data-level="10.4" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#joining-tables"><i class="fa fa-check"></i><b>10.4</b> Joining tables</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#join-functions"><i class="fa fa-check"></i><b>10.4.1</b> Join functions</a></li>
<li class="chapter" data-level="10.4.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#joining-without-a-common-identifier"><i class="fa fa-check"></i><b>10.4.2</b> Joining without a common identifier</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#web-scraping"><i class="fa fa-check"></i><b>10.5</b> Web Scraping</a></li>
<li class="chapter" data-level="10.6" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#exercises-15"><i class="fa fa-check"></i><b>10.6</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>V Machine learning</b></span></li>
<li class="chapter" data-level="" data-path="introduction-2.html"><a href="introduction-2.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="10.7" data-path="introduction-2.html"><a href="introduction-2.html#learning-objectives-2"><i class="fa fa-check"></i><b>10.7</b> Learning Objectives</a></li>
<li class="chapter" data-level="10.8" data-path="introduction-2.html"><a href="introduction-2.html#chapter-structure"><i class="fa fa-check"></i><b>10.8</b> Chapter Structure</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="supervised-learning.html"><a href="supervised-learning.html"><i class="fa fa-check"></i><b>11</b> Supervised Learning</a>
<ul>
<li class="chapter" data-level="11.1" data-path="supervised-learning.html"><a href="supervised-learning.html#classification-and-regression"><i class="fa fa-check"></i><b>11.1</b> Classification and Regression</a></li>
<li class="chapter" data-level="11.2" data-path="supervised-learning.html"><a href="supervised-learning.html#knn-k-nearest-neighbors"><i class="fa fa-check"></i><b>11.2</b> kNN: k-Nearest Neighbors</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="supervised-learning.html"><a href="supervised-learning.html#two-variables-as-input"><i class="fa fa-check"></i><b>11.2.1</b> Two variables as input</a></li>
<li class="chapter" data-level="11.2.2" data-path="supervised-learning.html"><a href="supervised-learning.html#multiple-variables-as-input"><i class="fa fa-check"></i><b>11.2.2</b> Multiple variables as input</a></li>
<li class="chapter" data-level="11.2.3" data-path="supervised-learning.html"><a href="supervised-learning.html#diverse-values-of-k"><i class="fa fa-check"></i><b>11.2.3</b> Diverse values of k</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="supervised-learning.html"><a href="supervised-learning.html#tidymodels-framework"><i class="fa fa-check"></i><b>11.3</b> tidymodels Framework</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="supervised-learning.html"><a href="supervised-learning.html#creation-of-training-and-test-data"><i class="fa fa-check"></i><b>11.3.1</b> Creation of training and test data</a></li>
<li class="chapter" data-level="11.3.2" data-path="supervised-learning.html"><a href="supervised-learning.html#training-our-prediction-algorithm"><i class="fa fa-check"></i><b>11.3.2</b> Training our prediction algorithm</a></li>
<li class="chapter" data-level="11.3.3" data-path="supervised-learning.html"><a href="supervised-learning.html#data-pre-processing-with-recipes"><i class="fa fa-check"></i><b>11.3.3</b> Data Pre-processing with Recipes</a></li>
<li class="chapter" data-level="11.3.4" data-path="supervised-learning.html"><a href="supervised-learning.html#creating-a-workflow"><i class="fa fa-check"></i><b>11.3.4</b> Creating a Workflow</a></li>
<li class="chapter" data-level="11.3.5" data-path="supervised-learning.html"><a href="supervised-learning.html#parameter-tuning-with-cross-validation"><i class="fa fa-check"></i><b>11.3.5</b> Parameter Tuning with Cross-Validation</a></li>
<li class="chapter" data-level="11.3.6" data-path="supervised-learning.html"><a href="supervised-learning.html#finalizing-the-model"><i class="fa fa-check"></i><b>11.3.6</b> Finalizing the Model</a></li>
<li class="chapter" data-level="11.3.7" data-path="supervised-learning.html"><a href="supervised-learning.html#testing-the-prediction-model"><i class="fa fa-check"></i><b>11.3.7</b> Testing the prediction model</a></li>
<li class="chapter" data-level="11.3.8" data-path="supervised-learning.html"><a href="supervised-learning.html#model-evaluation-with-yardstick"><i class="fa fa-check"></i><b>11.3.8</b> Model Evaluation with yardstick</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="supervised-learning.html"><a href="supervised-learning.html#confusion-matrix"><i class="fa fa-check"></i><b>11.4</b> Confusion Matrix</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="supervised-learning.html"><a href="supervised-learning.html#accuracy"><i class="fa fa-check"></i><b>11.4.1</b> Accuracy</a></li>
<li class="chapter" data-level="11.4.2" data-path="supervised-learning.html"><a href="supervised-learning.html#sensitivity"><i class="fa fa-check"></i><b>11.4.2</b> Sensitivity</a></li>
<li class="chapter" data-level="11.4.3" data-path="supervised-learning.html"><a href="supervised-learning.html#specificity"><i class="fa fa-check"></i><b>11.4.3</b> Specificity</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="supervised-learning.html"><a href="supervised-learning.html#exercises-16"><i class="fa fa-check"></i><b>11.5</b> Exercises</a></li>
<li class="chapter" data-level="11.6" data-path="supervised-learning.html"><a href="supervised-learning.html#simple-linear-regression"><i class="fa fa-check"></i><b>11.6</b> Simple Linear Regression</a></li>
<li class="chapter" data-level="11.7" data-path="supervised-learning.html"><a href="supervised-learning.html#multiple-linear-regression"><i class="fa fa-check"></i><b>11.7</b> Multiple Linear Regression</a></li>
<li class="chapter" data-level="11.8" data-path="supervised-learning.html"><a href="supervised-learning.html#standard-method-for-evaluating-accuracy"><i class="fa fa-check"></i><b>11.8</b> Standard Method for Evaluating Accuracy</a></li>
<li class="chapter" data-level="11.9" data-path="supervised-learning.html"><a href="supervised-learning.html#selection-of-the-most-optimal-model"><i class="fa fa-check"></i><b>11.9</b> Selection of the Most Optimal Model</a>
<ul>
<li class="chapter" data-level="11.9.1" data-path="supervised-learning.html"><a href="supervised-learning.html#k-nearest-neighbors-model"><i class="fa fa-check"></i><b>11.9.1</b> k-Nearest Neighbors Model</a></li>
<li class="chapter" data-level="11.9.2" data-path="supervised-learning.html"><a href="supervised-learning.html#generalized-linear-model---glm"><i class="fa fa-check"></i><b>11.9.2</b> Generalized Linear Model - GLM</a></li>
<li class="chapter" data-level="11.9.3" data-path="supervised-learning.html"><a href="supervised-learning.html#random-forest-model"><i class="fa fa-check"></i><b>11.9.3</b> Random Forest Model</a></li>
<li class="chapter" data-level="11.9.4" data-path="supervised-learning.html"><a href="supervised-learning.html#support-vector-machine-model---svm"><i class="fa fa-check"></i><b>11.9.4</b> Support Vector Machine Model - SVM</a></li>
<li class="chapter" data-level="11.9.5" data-path="supervised-learning.html"><a href="supervised-learning.html#naive-bayes-model"><i class="fa fa-check"></i><b>11.9.5</b> Naive Bayes Model</a></li>
<li class="chapter" data-level="11.9.6" data-path="supervised-learning.html"><a href="supervised-learning.html#model-comparison"><i class="fa fa-check"></i><b>11.9.6</b> Model Comparison</a></li>
<li class="chapter" data-level="11.9.7" data-path="supervised-learning.html"><a href="supervised-learning.html#predicting-using-the-best-model"><i class="fa fa-check"></i><b>11.9.7</b> Predicting using the best model</a></li>
</ul></li>
<li class="chapter" data-level="11.10" data-path="supervised-learning.html"><a href="supervised-learning.html#exercises-17"><i class="fa fa-check"></i><b>11.10</b> Exercises</a></li>
<li class="chapter" data-level="11.11" data-path="supervised-learning.html"><a href="supervised-learning.html#ethics-bias-in-algorithmic-decision-making"><i class="fa fa-check"></i><b>11.11</b> Ethics: Bias in Algorithmic Decision Making</a>
<ul>
<li class="chapter" data-level="11.11.1" data-path="supervised-learning.html"><a href="supervised-learning.html#the-risk-of-proxy-variables"><i class="fa fa-check"></i><b>11.11.1</b> The Risk of Proxy Variables</a></li>
<li class="chapter" data-level="11.11.2" data-path="supervised-learning.html"><a href="supervised-learning.html#feedback-loops"><i class="fa fa-check"></i><b>11.11.2</b> Feedback Loops</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html"><i class="fa fa-check"></i><b>12</b> Unsupervised Learning</a>
<ul>
<li class="chapter" data-level="12.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#learning-objectives-3"><i class="fa fa-check"></i><b>12.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="12.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#applications-of-unsupervised-learning"><i class="fa fa-check"></i><b>12.2</b> Applications of Unsupervised Learning</a></li>
<li class="chapter" data-level="12.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#k-means-clustering"><i class="fa fa-check"></i><b>12.3</b> K-Means Clustering</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-with-k-2"><i class="fa fa-check"></i><b>12.3.1</b> Clustering with k = 2</a></li>
<li class="chapter" data-level="12.3.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-with-k-3"><i class="fa fa-check"></i><b>12.3.2</b> Clustering with k &gt;= 3</a></li>
<li class="chapter" data-level="12.3.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#determination-of-optimal-clusters"><i class="fa fa-check"></i><b>12.3.3</b> Determination of Optimal Clusters</a></li>
<li class="chapter" data-level="12.3.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#k-means-for-more-than-2-variables"><i class="fa fa-check"></i><b>12.3.4</b> k-means for more than 2 variables</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#hierarchical-clustering"><i class="fa fa-check"></i><b>12.4</b> Hierarchical Clustering</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-with-two-variables"><i class="fa fa-check"></i><b>12.4.1</b> Clustering with two variables</a></li>
<li class="chapter" data-level="12.4.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#determination-of-optimal-clusters-1"><i class="fa fa-check"></i><b>12.4.2</b> Determination of Optimal Clusters</a></li>
<li class="chapter" data-level="12.4.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#obtain-the-grouping"><i class="fa fa-check"></i><b>12.4.3</b> Obtain the grouping</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#dimensionality-reduction"><i class="fa fa-check"></i><b>12.5</b> Dimensionality Reduction</a></li>
<li class="chapter" data-level="12.6" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#exercises-18"><i class="fa fa-check"></i><b>12.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html"><i class="fa fa-check"></i><b>13</b> String processing and text mining</a>
<ul>
<li class="chapter" data-level="13.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#basic-functions"><i class="fa fa-check"></i><b>13.1</b> Basic functions</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#replacing-characters"><i class="fa fa-check"></i><b>13.1.1</b> Replacing characters</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#regular-expressions"><i class="fa fa-check"></i><b>13.2</b> Regular expressions</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#alternation"><i class="fa fa-check"></i><b>13.2.1</b> Alternation</a></li>
<li class="chapter" data-level="13.2.2" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#anchoring"><i class="fa fa-check"></i><b>13.2.2</b> Anchoring</a></li>
<li class="chapter" data-level="13.2.3" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#repetitions"><i class="fa fa-check"></i><b>13.2.3</b> Repetitions</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#from-strings-to-dates"><i class="fa fa-check"></i><b>13.3</b> From strings to dates</a></li>
<li class="chapter" data-level="13.4" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#exercises-19"><i class="fa fa-check"></i><b>13.4</b> Exercises</a></li>
<li class="chapter" data-level="13.5" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#text-mining-using-tidy-data"><i class="fa fa-check"></i><b>13.5</b> Text Mining using Tidy Data</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#importing-data-and-tokenization"><i class="fa fa-check"></i><b>13.5.1</b> Importing data and Tokenization</a></li>
<li class="chapter" data-level="13.5.2" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#text-cleaning-and-tokenization"><i class="fa fa-check"></i><b>13.5.2</b> Text cleaning and Tokenization</a></li>
<li class="chapter" data-level="13.5.3" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#word-cloud"><i class="fa fa-check"></i><b>13.5.3</b> Word Cloud</a></li>
<li class="chapter" data-level="13.5.4" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#word-frequency-plot"><i class="fa fa-check"></i><b>13.5.4</b> Word Frequency Plot</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#sentiment-analysis"><i class="fa fa-check"></i><b>13.6</b> Sentiment Analysis</a></li>
<li class="chapter" data-level="13.7" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#exercises-20"><i class="fa fa-check"></i><b>13.7</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>VI Generative AI</b></span></li>
<li class="chapter" data-level="14" data-path="genai-intro.html"><a href="genai-intro.html"><i class="fa fa-check"></i><b>14</b> Data Science in the Age of AI</a>
<ul>
<li class="chapter" data-level="14.1" data-path="genai-intro.html"><a href="genai-intro.html#what-is-a-large-language-model"><i class="fa fa-check"></i><b>14.1</b> What is a Large Language Model?</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="genai-intro.html"><a href="genai-intro.html#its-all-about-probability"><i class="fa fa-check"></i><b>14.1.1</b> It’s all about Probability</a></li>
<li class="chapter" data-level="14.1.2" data-path="genai-intro.html"><a href="genai-intro.html#tokens-vs.-words"><i class="fa fa-check"></i><b>14.1.2</b> Tokens vs. Words</a></li>
<li class="chapter" data-level="14.1.3" data-path="genai-intro.html"><a href="genai-intro.html#temperature-controlling-creativity"><i class="fa fa-check"></i><b>14.1.3</b> Temperature: Controlling Creativity</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="genai-intro.html"><a href="genai-intro.html#setting-up-your-ai-environment"><i class="fa fa-check"></i><b>14.2</b> Setting Up Your AI Environment</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="genai-intro.html"><a href="genai-intro.html#the-solution-local-llms"><i class="fa fa-check"></i><b>14.2.1</b> The Solution: Local LLMs</a></li>
<li class="chapter" data-level="14.2.2" data-path="genai-intro.html"><a href="genai-intro.html#the-.renviron-file"><i class="fa fa-check"></i><b>14.2.2</b> The <code>.Renviron</code> File</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="genai-intro.html"><a href="genai-intro.html#ai-as-the-pair-programmer"><i class="fa fa-check"></i><b>14.3</b> AI as the “Pair Programmer”</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="genai-intro.html"><a href="genai-intro.html#the-great-refactorer"><i class="fa fa-check"></i><b>14.3.1</b> The Great Refactorer</a></li>
<li class="chapter" data-level="14.3.2" data-path="genai-intro.html"><a href="genai-intro.html#the-translator"><i class="fa fa-check"></i><b>14.3.2</b> The Translator</a></li>
<li class="chapter" data-level="14.3.3" data-path="genai-intro.html"><a href="genai-intro.html#pro-tip-prompt-engineering-101"><i class="fa fa-check"></i><b>14.3.3</b> Pro Tip: Prompt Engineering 101</a></li>
<li class="chapter" data-level="14.3.4" data-path="genai-intro.html"><a href="genai-intro.html#the-regex-master"><i class="fa fa-check"></i><b>14.3.4</b> The Regex Master</a></li>
<li class="chapter" data-level="14.3.5" data-path="genai-intro.html"><a href="genai-intro.html#the-error-decoder"><i class="fa fa-check"></i><b>14.3.5</b> The Error Decoder</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="genai-intro.html"><a href="genai-intro.html#the-risks-hallucinations"><i class="fa fa-check"></i><b>14.4</b> The Risks: Hallucinations</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="genai-intro.html"><a href="genai-intro.html#the-package-hallucination"><i class="fa fa-check"></i><b>14.4.1</b> The “Package” Hallucination</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="genai-intro.html"><a href="genai-intro.html#building-a-robust-request"><i class="fa fa-check"></i><b>14.5</b> Building a Robust Request</a></li>
<li class="chapter" data-level="14.6" data-path="genai-intro.html"><a href="genai-intro.html#the-holy-grail-structured-data-extraction"><i class="fa fa-check"></i><b>14.6</b> The Holy Grail: Structured Data extraction</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="genai-intro.html"><a href="genai-intro.html#forcing-json-output"><i class="fa fa-check"></i><b>14.6.1</b> Forcing JSON Output</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="genai-intro.html"><a href="genai-intro.html#batch-processing-the-purrr-workflow"><i class="fa fa-check"></i><b>14.7</b> Batch Processing: The <code>purrr</code> Workflow</a></li>
<li class="chapter" data-level="14.8" data-path="genai-intro.html"><a href="genai-intro.html#summary"><i class="fa fa-check"></i><b>14.8</b> Summary</a></li>
<li class="chapter" data-level="14.9" data-path="genai-intro.html"><a href="genai-intro.html#beyond-generation-embeddings"><i class="fa fa-check"></i><b>14.9</b> Beyond Generation: Embeddings</a>
<ul>
<li class="chapter" data-level="14.9.1" data-path="genai-intro.html"><a href="genai-intro.html#r-implementation"><i class="fa fa-check"></i><b>14.9.1</b> R Implementation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="genai-embeddings.html"><a href="genai-embeddings.html"><i class="fa fa-check"></i><b>15</b> Text Analysis with Embeddings</a>
<ul>
<li class="chapter" data-level="15.1" data-path="genai-embeddings.html"><a href="genai-embeddings.html#beyond-bag-of-words"><i class="fa fa-check"></i><b>15.1</b> Beyond Bag-of-Words</a></li>
<li class="chapter" data-level="15.2" data-path="genai-embeddings.html"><a href="genai-embeddings.html#what-is-an-embedding"><i class="fa fa-check"></i><b>15.2</b> What is an Embedding?</a></li>
<li class="chapter" data-level="15.3" data-path="genai-embeddings.html"><a href="genai-embeddings.html#getting-embeddings-in-r"><i class="fa fa-check"></i><b>15.3</b> Getting Embeddings in R</a></li>
<li class="chapter" data-level="15.4" data-path="genai-embeddings.html"><a href="genai-embeddings.html#visualizing-meaning-dimensionality-reduction"><i class="fa fa-check"></i><b>15.4</b> Visualizing Meaning (Dimensionality Reduction)</a></li>
<li class="chapter" data-level="15.5" data-path="genai-embeddings.html"><a href="genai-embeddings.html#building-a-semantic-search-engine"><i class="fa fa-check"></i><b>15.5</b> Building a Semantic Search Engine</a></li>
<li class="chapter" data-level="15.6" data-path="genai-embeddings.html"><a href="genai-embeddings.html#summary-the-ai-workflow"><i class="fa fa-check"></i><b>15.6</b> Summary: The AI Workflow</a></li>
</ul></li>
<li class="part"><span><b>VII Real Cases</b></span></li>
<li class="chapter" data-level="" data-path="introduction-3.html"><a href="introduction-3.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="16" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html"><i class="fa fa-check"></i><b>16</b> Case Study: Real Estate Market Analysis</a>
<ul>
<li class="chapter" data-level="16.1" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#objectives"><i class="fa fa-check"></i><b>16.1</b> Objectives</a></li>
<li class="chapter" data-level="16.2" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#loading-libraries"><i class="fa fa-check"></i><b>16.2</b> Loading Libraries</a></li>
<li class="chapter" data-level="16.3" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#exploring-the-data"><i class="fa fa-check"></i><b>16.3</b> Exploring the Data</a></li>
<li class="chapter" data-level="16.4" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#data-cleaning"><i class="fa fa-check"></i><b>16.4</b> Data Cleaning</a></li>
<li class="chapter" data-level="16.5" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#exploratory-analysis"><i class="fa fa-check"></i><b>16.5</b> Exploratory Analysis</a>
<ul>
<li class="chapter" data-level="16.5.1" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#market-volume-over-time"><i class="fa fa-check"></i><b>16.5.1</b> Market Volume Over Time</a></li>
<li class="chapter" data-level="16.5.2" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#comparing-cities"><i class="fa fa-check"></i><b>16.5.2</b> Comparing Cities</a></li>
</ul></li>
<li class="chapter" data-level="16.6" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#creating-indicators"><i class="fa fa-check"></i><b>16.6</b> Creating Indicators</a></li>
<li class="chapter" data-level="16.7" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#try-it-yourself"><i class="fa fa-check"></i><b>16.7</b> Try It Yourself</a></li>
<li class="chapter" data-level="16.8" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#conclusions"><i class="fa fa-check"></i><b>16.8</b> Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html"><i class="fa fa-check"></i><b>17</b> Google Analytics from R</a>
<ul>
<li class="chapter" data-level="17.1" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#problem"><i class="fa fa-check"></i><b>17.1</b> Problem</a></li>
<li class="chapter" data-level="17.2" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#access-to-data"><i class="fa fa-check"></i><b>17.2</b> Access to data</a></li>
<li class="chapter" data-level="17.3" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#visualization"><i class="fa fa-check"></i><b>17.3</b> Visualization</a></li>
<li class="chapter" data-level="17.4" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#conclusion"><i class="fa fa-check"></i><b>17.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="ethics-checklist.html"><a href="ethics-checklist.html"><i class="fa fa-check"></i><b>18</b> Appendix A: Responsible AI Checklist</a>
<ul>
<li class="chapter" data-level="18.1" data-path="ethics-checklist.html"><a href="ethics-checklist.html#data-quality-lineage"><i class="fa fa-check"></i><b>18.1</b> Data Quality &amp; Lineage</a></li>
<li class="chapter" data-level="18.2" data-path="ethics-checklist.html"><a href="ethics-checklist.html#fairness-bias"><i class="fa fa-check"></i><b>18.2</b> Fairness &amp; Bias</a></li>
<li class="chapter" data-level="18.3" data-path="ethics-checklist.html"><a href="ethics-checklist.html#transparency-explainability"><i class="fa fa-check"></i><b>18.3</b> Transparency &amp; Explainability</a></li>
<li class="chapter" data-level="18.4" data-path="ethics-checklist.html"><a href="ethics-checklist.html#reproducibility-integrity"><i class="fa fa-check"></i><b>18.4</b> Reproducibility &amp; Integrity</a></li>
<li class="chapter" data-level="18.5" data-path="ethics-checklist.html"><a href="ethics-checklist.html#genai-specifics"><i class="fa fa-check"></i><b>18.5</b> GenAI Specifics</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="r6-intro.html"><a href="r6-intro.html"><i class="fa fa-check"></i><b>19</b> Appendix B: Object Oriented Programming with R6</a>
<ul>
<li class="chapter" data-level="19.1" data-path="r6-intro.html"><a href="r6-intro.html#the-r6-package-classes-methods-encapsulation-and-inheritance"><i class="fa fa-check"></i><b>19.1</b> The R6 package: Classes, methods, encapsulation, and inheritance</a></li>
<li class="chapter" data-level="19.2" data-path="r6-intro.html"><a href="r6-intro.html#exercises-21"><i class="fa fa-check"></i><b>19.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ggplot-and-dplyr" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Ggplot and dplyr<a href="ggplot-and-dplyr.html#ggplot-and-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><strong>Learning Objectives:</strong></p>
<p>In this chapter, we will master the art of data storytelling. We will learn to create layered visualizations using <code>ggplot2</code>, customizing every aspect from aesthetics and scales to themes and labels. Additionally, we will gain proficiency in summarizing data with <code>dplyr</code> functions like <code>summarize()</code> and <code>group_by()</code>, all while deepening our understanding of the grammar of graphics approach.</p>
<hr />
<p>Building on the basic plotting skills from previous chapters, we’ll now create more sophisticated and visually polished visualizations. The <code>ggplot2</code> package provides a powerful and consistent framework for building graphics layer by layer.</p>
<p>To get started, we’ll use the <code>ggplot</code> object included in the <code>tidyverse</code> library (the <code>tidyverse</code> package includes <code>ggplot2</code> among its core packages). Since we’ve already installed <code>tidyverse</code> previously, we only need to load it:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="ggplot-and-dplyr.html#cb165-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>We’ll learn these visualization techniques using our previous case/problem, allowing us to build up our <code>ggplot</code> skills gradually with familiar data.</p>
<div id="creating-the-ggplot-object" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Creating the ggplot object<a href="ggplot-and-dplyr.html#creating-the-ggplot-object" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We will start by creating the <code>ggplot</code> object from the <code>murders</code> data using the pipeline operator <code>|&gt;</code>. Let’s also remember to have loaded the <code>murders</code> data from the <code>dslabs</code> library.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="ggplot-and-dplyr.html#cb166-1" tabindex="-1"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb166-2"><a href="ggplot-and-dplyr.html#cb166-2" tabindex="-1"></a><span class="fu">data</span>(murders)</span>
<span id="cb166-3"><a href="ggplot-and-dplyr.html#cb166-3" tabindex="-1"></a></span>
<span id="cb166-4"><a href="ggplot-and-dplyr.html#cb166-4" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb166-5"><a href="ggplot-and-dplyr.html#cb166-5" tabindex="-1"></a>  <span class="fu">ggplot</span>()</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-237-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>This code only shows us an empty box. This is because we haven’t specified which variables to take from the data frame nor what type of plot we want.</p>
<p>To build our plot, we’ll add components using <em>layers</em>. The <code>ggplot</code> system allows us to add one layer at a time, each specifying a different aspect of the visualization. We connect layers using the <code>+</code> operator.</p>
</div>
<div id="aesthetic-mapping-layer" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Aesthetic mapping layer<a href="ggplot-and-dplyr.html#aesthetic-mapping-layer" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>First we will focus on the basic aesthetics, that is: what goes on the <em><strong>x-axis</strong></em> and what we put on the <em><strong>y-axis</strong></em>. To do this we will use the aesthetic function which in R is <code>aes()</code>. For example, let’s add the <code>population</code> data on the <em>x-axis</em> and the <code>total</code> data on the <em>y-axis</em>. We don’t have to use the <code>$</code> accessor because the <code>aes</code> function takes the <code>murders</code> table before the pipeline as a reference.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="ggplot-and-dplyr.html#cb167-1" tabindex="-1"></a></span>
<span id="cb167-2"><a href="ggplot-and-dplyr.html#cb167-2" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb167-3"><a href="ggplot-and-dplyr.html#cb167-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb167-4"><a href="ggplot-and-dplyr.html#cb167-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population, <span class="at">y =</span> total)</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-238-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>Now we have a box with the axes marked, but still without any data inside the box.</p>
</div>
<div id="geoms-layer" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Geoms layer<a href="ggplot-and-dplyr.html#geoms-layer" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s add one more layer that indicates what type of plot we want. To do this we will use the so-called <strong>geoms</strong>. There are different types of geoms. For example, a scatter plot is shown with points, therefore we will use the <code>geom_point()</code> function. For more detail we can see the documentation of <code>geom_point()</code> <a href="https://ggplot2.tidyverse.org/reference/geom_point.html">here</a>.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="ggplot-and-dplyr.html#cb168-1" tabindex="-1"></a></span>
<span id="cb168-2"><a href="ggplot-and-dplyr.html#cb168-2" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb168-3"><a href="ggplot-and-dplyr.html#cb168-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb168-4"><a href="ggplot-and-dplyr.html#cb168-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population, <span class="at">y =</span> total) <span class="sc">+</span></span>
<span id="cb168-5"><a href="ggplot-and-dplyr.html#cb168-5" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-239-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>In the same way, we can show lines connecting the data instead of points with the <code>geom_line()</code> function.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="ggplot-and-dplyr.html#cb169-1" tabindex="-1"></a></span>
<span id="cb169-2"><a href="ggplot-and-dplyr.html#cb169-2" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb169-3"><a href="ggplot-and-dplyr.html#cb169-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb169-4"><a href="ggplot-and-dplyr.html#cb169-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population, <span class="at">y =</span> total) <span class="sc">+</span></span>
<span id="cb169-5"><a href="ggplot-and-dplyr.html#cb169-5" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-240-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>Up to this point we have created the same scatter plot that we saw in the previous chapter. The power of ggplot lies in the ease of adding components. For example, to label each point with the state abbreviation (<code>abb</code>), we simply add it as a <code>label</code> attribute inside <code>aes</code> and include the <code>geom_text()</code> layer.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="ggplot-and-dplyr.html#cb170-1" tabindex="-1"></a></span>
<span id="cb170-2"><a href="ggplot-and-dplyr.html#cb170-2" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb170-3"><a href="ggplot-and-dplyr.html#cb170-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb170-4"><a href="ggplot-and-dplyr.html#cb170-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population, <span class="at">y =</span> total, <span class="at">label=</span>abb) <span class="sc">+</span></span>
<span id="cb170-5"><a href="ggplot-and-dplyr.html#cb170-5" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb170-6"><a href="ggplot-and-dplyr.html#cb170-6" tabindex="-1"></a>  <span class="fu">geom_text</span>()</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-241-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>In this plot we can already see that the upper right point corresponds to <strong>CA</strong> which is the abbreviation for the state of <strong>California</strong>.</p>
<div id="tweaking-aes-and-geoms" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Tweaking aes and geoms<a href="ggplot-and-dplyr.html#tweaking-aes-and-geoms" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can tweak our plots in multiple ways by adding attributes to our functions.</p>
<p>For example, if we want to identify which region each point belongs to (if it is from the US North, South, etc.) we would have to edit <code>aes()</code> and make <code>color</code> take into account the <code>region</code> variable as follows:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="ggplot-and-dplyr.html#cb171-1" tabindex="-1"></a></span>
<span id="cb171-2"><a href="ggplot-and-dplyr.html#cb171-2" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb171-3"><a href="ggplot-and-dplyr.html#cb171-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb171-4"><a href="ggplot-and-dplyr.html#cb171-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population, <span class="at">y =</span> total, <span class="at">label=</span>abb, <span class="at">color=</span>region) <span class="sc">+</span></span>
<span id="cb171-5"><a href="ggplot-and-dplyr.html#cb171-5" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb171-6"><a href="ggplot-and-dplyr.html#cb171-6" tabindex="-1"></a>  <span class="fu">geom_text</span>()</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-242-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>Then, we can also edit the attributes of the <code>geoms</code>. For example, let’s make the size of the points larger. To do this we edit inside <code>geom_points()</code>:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="ggplot-and-dplyr.html#cb172-1" tabindex="-1"></a></span>
<span id="cb172-2"><a href="ggplot-and-dplyr.html#cb172-2" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb172-3"><a href="ggplot-and-dplyr.html#cb172-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb172-4"><a href="ggplot-and-dplyr.html#cb172-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population, <span class="at">y =</span> total, <span class="at">label=</span>abb, <span class="at">color=</span>region) <span class="sc">+</span></span>
<span id="cb172-5"><a href="ggplot-and-dplyr.html#cb172-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb172-6"><a href="ggplot-and-dplyr.html#cb172-6" tabindex="-1"></a>  <span class="fu">geom_text</span>()</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-243-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>Having increased the size of the points, we can no longer see the text of the state abbreviations well. We can nudge the text on the <em>x-axis</em> or on the <em>y-axis</em>. Since we are talking about several million people, let’s nudge the letters 1.5 million to the right.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="ggplot-and-dplyr.html#cb173-1" tabindex="-1"></a></span>
<span id="cb173-2"><a href="ggplot-and-dplyr.html#cb173-2" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb173-3"><a href="ggplot-and-dplyr.html#cb173-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb173-4"><a href="ggplot-and-dplyr.html#cb173-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population, <span class="at">y =</span> total, <span class="at">label=</span>abb, <span class="at">color=</span>region) <span class="sc">+</span></span>
<span id="cb173-5"><a href="ggplot-and-dplyr.html#cb173-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb173-6"><a href="ggplot-and-dplyr.html#cb173-6" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="dv">1500000</span>)</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-244-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>To avoid entering such large numbers we can transform the population on the x-axis in the <code>aes()</code> function. Thus, once we express the data without counting the millions we would have to nudge the text only 1.5 points to the right:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="ggplot-and-dplyr.html#cb174-1" tabindex="-1"></a></span>
<span id="cb174-2"><a href="ggplot-and-dplyr.html#cb174-2" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb174-3"><a href="ggplot-and-dplyr.html#cb174-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb174-4"><a href="ggplot-and-dplyr.html#cb174-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">y =</span> total, <span class="at">label=</span>abb, <span class="at">color=</span>region) <span class="sc">+</span></span>
<span id="cb174-5"><a href="ggplot-and-dplyr.html#cb174-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb174-6"><a href="ggplot-and-dplyr.html#cb174-6" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">1.5</span>)</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-245-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>This transformation gives us the same result as before and the <em>x-axis</em> is now easier to understand now that we can see the numbers.</p>
</div>
</div>
<div id="scale-layer" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Scale layer<a href="ggplot-and-dplyr.html#scale-layer" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Visually we can still improve our plot further. We see several data points concentrated in lower values and only a few extremes. In those cases it is better to have a view scaling the axes using logarithms. To do this, we will use the layers <code>scale_x_continuous()</code> and <code>scale_y_continuous()</code>. For example, if we want to transform the scale to base 2 logarithm we would have to add layers, but also change the value of <code>nudge_x</code>, due to the scale change:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="ggplot-and-dplyr.html#cb175-1" tabindex="-1"></a></span>
<span id="cb175-2"><a href="ggplot-and-dplyr.html#cb175-2" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb175-3"><a href="ggplot-and-dplyr.html#cb175-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb175-4"><a href="ggplot-and-dplyr.html#cb175-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">y =</span> total, <span class="at">label=</span>abb, <span class="at">color=</span>region) <span class="sc">+</span></span>
<span id="cb175-5"><a href="ggplot-and-dplyr.html#cb175-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb175-6"><a href="ggplot-and-dplyr.html#cb175-6" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.23</span>) <span class="sc">+</span></span>
<span id="cb175-7"><a href="ggplot-and-dplyr.html#cb175-7" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="sc">+</span></span>
<span id="cb175-8"><a href="ggplot-and-dplyr.html#cb175-8" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">&quot;log2&quot;</span>)</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-246-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>In the same way, we could do the transformation to base 10 logarithm:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="ggplot-and-dplyr.html#cb176-1" tabindex="-1"></a></span>
<span id="cb176-2"><a href="ggplot-and-dplyr.html#cb176-2" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb176-3"><a href="ggplot-and-dplyr.html#cb176-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb176-4"><a href="ggplot-and-dplyr.html#cb176-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">y =</span> total, <span class="at">label=</span>abb, <span class="at">color=</span>region) <span class="sc">+</span></span>
<span id="cb176-5"><a href="ggplot-and-dplyr.html#cb176-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb176-6"><a href="ggplot-and-dplyr.html#cb176-6" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.075</span>) <span class="sc">+</span></span>
<span id="cb176-7"><a href="ggplot-and-dplyr.html#cb176-7" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">&quot;log10&quot;</span>) <span class="sc">+</span></span>
<span id="cb176-8"><a href="ggplot-and-dplyr.html#cb176-8" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">&quot;log10&quot;</span>)</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-247-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>The transformation of the scale to base 10 logarithm is widely used in statistics and R provides us with a faster function to proceed with this scale transformation, the function <code>scale_x_log10()</code>, which gives us the same result as the previous plot.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="ggplot-and-dplyr.html#cb177-1" tabindex="-1"></a></span>
<span id="cb177-2"><a href="ggplot-and-dplyr.html#cb177-2" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb177-3"><a href="ggplot-and-dplyr.html#cb177-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb177-4"><a href="ggplot-and-dplyr.html#cb177-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">y =</span> total, <span class="at">label=</span>abb, <span class="at">color=</span>region) <span class="sc">+</span></span>
<span id="cb177-5"><a href="ggplot-and-dplyr.html#cb177-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb177-6"><a href="ggplot-and-dplyr.html#cb177-6" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.075</span>) <span class="sc">+</span></span>
<span id="cb177-7"><a href="ggplot-and-dplyr.html#cb177-7" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb177-8"><a href="ggplot-and-dplyr.html#cb177-8" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-248-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="label-title-and-legend-layer" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Label, title and legend layer<a href="ggplot-and-dplyr.html#label-title-and-legend-layer" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We can also <a href="https://www.datanovia.com/en/blog/ggplot-legend-title-position-and-labels/">change the labels</a> (<code>label</code> in English) of the plot. So far on the <em>x-axis</em> we see that <strong>population/10^6</strong> appears and we can change it with the function <code>xlab()</code>. In the same way we can change on the <em>y-axis</em> using <code>ylab()</code>. To add a title to the plot we will use the function <code>ggtitle()</code>. To change the name of the legend we will use the function <code>scale_color_discrete()</code>.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="ggplot-and-dplyr.html#cb178-1" tabindex="-1"></a></span>
<span id="cb178-2"><a href="ggplot-and-dplyr.html#cb178-2" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb178-3"><a href="ggplot-and-dplyr.html#cb178-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb178-4"><a href="ggplot-and-dplyr.html#cb178-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">y =</span> total, <span class="at">label=</span>abb, <span class="at">color=</span>region) <span class="sc">+</span></span>
<span id="cb178-5"><a href="ggplot-and-dplyr.html#cb178-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb178-6"><a href="ggplot-and-dplyr.html#cb178-6" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.075</span>) <span class="sc">+</span></span>
<span id="cb178-7"><a href="ggplot-and-dplyr.html#cb178-7" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb178-8"><a href="ggplot-and-dplyr.html#cb178-8" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb178-9"><a href="ggplot-and-dplyr.html#cb178-9" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Population expressed in millions (logarithmic scale)&quot;</span>) <span class="sc">+</span></span>
<span id="cb178-10"><a href="ggplot-and-dplyr.html#cb178-10" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Total number of murders (logarithmic scale)&quot;</span>) <span class="sc">+</span></span>
<span id="cb178-11"><a href="ggplot-and-dplyr.html#cb178-11" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Gun murders in the US in 2010&quot;</span>) <span class="sc">+</span></span>
<span id="cb178-12"><a href="ggplot-and-dplyr.html#cb178-12" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">name =</span> <span class="st">&quot;Regions&quot;</span>)</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-249-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<blockquote>
<p><strong>Modern Alternative:</strong> You can also use the <code>labs()</code> function to set multiple labels in a single layer: <code>labs(x = "...", y = "...", title = "...", color = "...")</code>. This is often cleaner for plots with many labels.</p>
</blockquote>
</div>
<div id="reference-lines" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Reference lines<a href="ggplot-and-dplyr.html#reference-lines" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We can add reference lines, whether vertical with <code>geom_vline(xintercept = )</code>, horizontal with <code>geom_hline(yintercept = ...)</code> or diagonal with <code>geom_abline(intercept = )</code>, the latter asks us at what point it cuts the <em>y-axis</em> and draws a line with a default slope of 1.</p>
<p>For example, we could calculate the average of total murders and draw a horizontal reference line.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="ggplot-and-dplyr.html#cb179-1" tabindex="-1"></a></span>
<span id="cb179-2"><a href="ggplot-and-dplyr.html#cb179-2" tabindex="-1"></a><span class="co">#Calculate the average of the total</span></span>
<span id="cb179-3"><a href="ggplot-and-dplyr.html#cb179-3" tabindex="-1"></a>avg_total <span class="ot">&lt;-</span> <span class="fu">mean</span>(murders<span class="sc">$</span>total)</span>
<span id="cb179-4"><a href="ggplot-and-dplyr.html#cb179-4" tabindex="-1"></a></span>
<span id="cb179-5"><a href="ggplot-and-dplyr.html#cb179-5" tabindex="-1"></a><span class="co">#And add the horizontal reference line</span></span>
<span id="cb179-6"><a href="ggplot-and-dplyr.html#cb179-6" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb179-7"><a href="ggplot-and-dplyr.html#cb179-7" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb179-8"><a href="ggplot-and-dplyr.html#cb179-8" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">y =</span> total, <span class="at">label=</span>abb, <span class="at">color=</span>region) <span class="sc">+</span></span>
<span id="cb179-9"><a href="ggplot-and-dplyr.html#cb179-9" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb179-10"><a href="ggplot-and-dplyr.html#cb179-10" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.075</span>) <span class="sc">+</span></span>
<span id="cb179-11"><a href="ggplot-and-dplyr.html#cb179-11" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb179-12"><a href="ggplot-and-dplyr.html#cb179-12" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb179-13"><a href="ggplot-and-dplyr.html#cb179-13" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Population expressed in millions (logarithmic scale)&quot;</span>) <span class="sc">+</span></span>
<span id="cb179-14"><a href="ggplot-and-dplyr.html#cb179-14" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Total number of murders (logarithmic scale)&quot;</span>) <span class="sc">+</span></span>
<span id="cb179-15"><a href="ggplot-and-dplyr.html#cb179-15" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Gun murders in the US in 2010&quot;</span>) <span class="sc">+</span></span>
<span id="cb179-16"><a href="ggplot-and-dplyr.html#cb179-16" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">name =</span> <span class="st">&quot;Regions&quot;</span>) <span class="sc">+</span></span>
<span id="cb179-17"><a href="ggplot-and-dplyr.html#cb179-17" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> avg_total)</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-250-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>Or we could calculate the murder rate per million inhabitants throughout the US and draw a reference diagonal. In the case of the diagonal we have to express it in the same scale of the axis, therefore we have to convert it to <code>log10</code>.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="ggplot-and-dplyr.html#cb180-1" tabindex="-1"></a></span>
<span id="cb180-2"><a href="ggplot-and-dplyr.html#cb180-2" tabindex="-1"></a><span class="co"># Calculate the average rate</span></span>
<span id="cb180-3"><a href="ggplot-and-dplyr.html#cb180-3" tabindex="-1"></a>ratio <span class="ot">&lt;-</span> <span class="fu">sum</span>(murders<span class="sc">$</span>total)<span class="sc">/</span><span class="fu">sum</span>(murders<span class="sc">$</span>population) <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span></span>
<span id="cb180-4"><a href="ggplot-and-dplyr.html#cb180-4" tabindex="-1"></a></span>
<span id="cb180-5"><a href="ggplot-and-dplyr.html#cb180-5" tabindex="-1"></a><span class="co"># Calculate base 10 logarithm to obtain the intercept on the &quot;y-axis&quot;</span></span>
<span id="cb180-6"><a href="ggplot-and-dplyr.html#cb180-6" tabindex="-1"></a>ratio_log10 <span class="ot">&lt;-</span> <span class="fu">log10</span>(ratio)</span>
<span id="cb180-7"><a href="ggplot-and-dplyr.html#cb180-7" tabindex="-1"></a></span>
<span id="cb180-8"><a href="ggplot-and-dplyr.html#cb180-8" tabindex="-1"></a><span class="co">#And add the diagonal reference line</span></span>
<span id="cb180-9"><a href="ggplot-and-dplyr.html#cb180-9" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb180-10"><a href="ggplot-and-dplyr.html#cb180-10" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb180-11"><a href="ggplot-and-dplyr.html#cb180-11" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">y =</span> total, <span class="at">label=</span>abb, <span class="at">color=</span>region) <span class="sc">+</span></span>
<span id="cb180-12"><a href="ggplot-and-dplyr.html#cb180-12" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb180-13"><a href="ggplot-and-dplyr.html#cb180-13" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.075</span>) <span class="sc">+</span></span>
<span id="cb180-14"><a href="ggplot-and-dplyr.html#cb180-14" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb180-15"><a href="ggplot-and-dplyr.html#cb180-15" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb180-16"><a href="ggplot-and-dplyr.html#cb180-16" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Population expressed in millions (logarithmic scale)&quot;</span>) <span class="sc">+</span></span>
<span id="cb180-17"><a href="ggplot-and-dplyr.html#cb180-17" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Total number of murders (logarithmic scale)&quot;</span>) <span class="sc">+</span></span>
<span id="cb180-18"><a href="ggplot-and-dplyr.html#cb180-18" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Gun murders in the US in 2010&quot;</span>) <span class="sc">+</span></span>
<span id="cb180-19"><a href="ggplot-and-dplyr.html#cb180-19" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">name =</span> <span class="st">&quot;Regions&quot;</span>) <span class="sc">+</span></span>
<span id="cb180-20"><a href="ggplot-and-dplyr.html#cb180-20" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> ratio_log10)</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-251-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>We can improve this reference line by making it dashed and gray. To do this, simply edit the <code>geom_abline()</code> function as follows:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="ggplot-and-dplyr.html#cb181-1" tabindex="-1"></a></span>
<span id="cb181-2"><a href="ggplot-and-dplyr.html#cb181-2" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb181-3"><a href="ggplot-and-dplyr.html#cb181-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb181-4"><a href="ggplot-and-dplyr.html#cb181-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">y =</span> total, <span class="at">label=</span>abb, <span class="at">color=</span>region) <span class="sc">+</span></span>
<span id="cb181-5"><a href="ggplot-and-dplyr.html#cb181-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb181-6"><a href="ggplot-and-dplyr.html#cb181-6" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.075</span>) <span class="sc">+</span></span>
<span id="cb181-7"><a href="ggplot-and-dplyr.html#cb181-7" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb181-8"><a href="ggplot-and-dplyr.html#cb181-8" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb181-9"><a href="ggplot-and-dplyr.html#cb181-9" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Population expressed in millions (logarithmic scale)&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-10"><a href="ggplot-and-dplyr.html#cb181-10" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Total number of murders (logarithmic scale)&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-11"><a href="ggplot-and-dplyr.html#cb181-11" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Gun murders in the US in 2010&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-12"><a href="ggplot-and-dplyr.html#cb181-12" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">name =</span> <span class="st">&quot;Regions&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-13"><a href="ggplot-and-dplyr.html#cb181-13" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> ratio_log10, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">color =</span> <span class="st">&quot;darkgrey&quot;</span>)</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-252-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="changing-the-plot-style" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Changing the plot style<a href="ggplot-and-dplyr.html#changing-the-plot-style" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The plot style using <code>ggplot()</code> can be easily changed. There are multiple themes we can use by loading the <strong>ggthemes</strong> library. We can, for example, use a widely used theme: the economist theme by adding the <code>theme_economist()</code> layer.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="ggplot-and-dplyr.html#cb182-1" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb182-2"><a href="ggplot-and-dplyr.html#cb182-2" tabindex="-1"></a></span>
<span id="cb182-3"><a href="ggplot-and-dplyr.html#cb182-3" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb182-4"><a href="ggplot-and-dplyr.html#cb182-4" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb182-5"><a href="ggplot-and-dplyr.html#cb182-5" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">y =</span> total, <span class="at">label=</span>abb, <span class="at">color=</span>region) <span class="sc">+</span></span>
<span id="cb182-6"><a href="ggplot-and-dplyr.html#cb182-6" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb182-7"><a href="ggplot-and-dplyr.html#cb182-7" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.075</span>) <span class="sc">+</span></span>
<span id="cb182-8"><a href="ggplot-and-dplyr.html#cb182-8" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb182-9"><a href="ggplot-and-dplyr.html#cb182-9" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb182-10"><a href="ggplot-and-dplyr.html#cb182-10" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Population expressed in millions (logarithmic scale)&quot;</span>) <span class="sc">+</span></span>
<span id="cb182-11"><a href="ggplot-and-dplyr.html#cb182-11" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Total number of murders (logarithmic scale)&quot;</span>) <span class="sc">+</span></span>
<span id="cb182-12"><a href="ggplot-and-dplyr.html#cb182-12" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Gun murders in the US in 2010&quot;</span>) <span class="sc">+</span></span>
<span id="cb182-13"><a href="ggplot-and-dplyr.html#cb182-13" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">name =</span> <span class="st">&quot;Regions&quot;</span>) <span class="sc">+</span></span>
<span id="cb182-14"><a href="ggplot-and-dplyr.html#cb182-14" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> ratio_log10, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">color =</span> <span class="st">&quot;darkgrey&quot;</span>) <span class="sc">+</span></span>
<span id="cb182-15"><a href="ggplot-and-dplyr.html#cb182-15" tabindex="-1"></a>  <span class="fu">theme_economist</span>()</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-253-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>We still see overlapping abbreviations. We can make the names repel each other using the <code>geom_text_repel()</code> function instead of <code>geom_text()</code> that we are currently using. To use this function we need to call the <strong>ggrepel</strong> library.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="ggplot-and-dplyr.html#cb183-1" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb183-2"><a href="ggplot-and-dplyr.html#cb183-2" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb183-3"><a href="ggplot-and-dplyr.html#cb183-3" tabindex="-1"></a></span>
<span id="cb183-4"><a href="ggplot-and-dplyr.html#cb183-4" tabindex="-1"></a>murders <span class="sc">|&gt;</span></span>
<span id="cb183-5"><a href="ggplot-and-dplyr.html#cb183-5" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb183-6"><a href="ggplot-and-dplyr.html#cb183-6" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">y =</span> total, <span class="at">label=</span>abb, <span class="at">color=</span>region) <span class="sc">+</span></span>
<span id="cb183-7"><a href="ggplot-and-dplyr.html#cb183-7" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb183-8"><a href="ggplot-and-dplyr.html#cb183-8" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>() <span class="sc">+</span></span>
<span id="cb183-9"><a href="ggplot-and-dplyr.html#cb183-9" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb183-10"><a href="ggplot-and-dplyr.html#cb183-10" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb183-11"><a href="ggplot-and-dplyr.html#cb183-11" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Population expressed in millions (logarithmic scale)&quot;</span>) <span class="sc">+</span></span>
<span id="cb183-12"><a href="ggplot-and-dplyr.html#cb183-12" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Total number of murders (logarithmic scale)&quot;</span>) <span class="sc">+</span></span>
<span id="cb183-13"><a href="ggplot-and-dplyr.html#cb183-13" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Gun murders in the US in 2010&quot;</span>) <span class="sc">+</span></span>
<span id="cb183-14"><a href="ggplot-and-dplyr.html#cb183-14" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">name =</span> <span class="st">&quot;Regions&quot;</span>) <span class="sc">+</span></span>
<span id="cb183-15"><a href="ggplot-and-dplyr.html#cb183-15" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> ratio_log10, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">color =</span> <span class="st">&quot;darkgrey&quot;</span>) <span class="sc">+</span></span>
<span id="cb183-16"><a href="ggplot-and-dplyr.html#cb183-16" tabindex="-1"></a>  <span class="fu">theme_economist</span>()</span>
<span id="cb183-17"><a href="ggplot-and-dplyr.html#cb183-17" tabindex="-1"></a><span class="co">#&gt; Warning: ggrepel: 1 unlabeled data points (too many overlaps). Consider</span></span>
<span id="cb183-18"><a href="ggplot-and-dplyr.html#cb183-18" tabindex="-1"></a><span class="co">#&gt; increasing max.overlaps</span></span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-254-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>This plot is visually much easier to understand and aesthetically much better than the default plot we created in previous chapters. We can explore more examples at this <a href="https://rstudio-pubs-static.s3.amazonaws.com/228019_f0c39e05758a4a51b435b19dbd321c23.html">link</a>.</p>
</div>
<div id="saving-plots" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> Saving plots<a href="ggplot-and-dplyr.html#saving-plots" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Once you’ve created a plot, you’ll often want to save it to a file. The <code>ggsave()</code> function makes this easy:</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="ggplot-and-dplyr.html#cb184-1" tabindex="-1"></a><span class="co"># Save the last plot created</span></span>
<span id="cb184-2"><a href="ggplot-and-dplyr.html#cb184-2" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;my_plot.png&quot;</span>, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">6</span>)</span>
<span id="cb184-3"><a href="ggplot-and-dplyr.html#cb184-3" tabindex="-1"></a></span>
<span id="cb184-4"><a href="ggplot-and-dplyr.html#cb184-4" tabindex="-1"></a><span class="co"># Or save a specific plot object</span></span>
<span id="cb184-5"><a href="ggplot-and-dplyr.html#cb184-5" tabindex="-1"></a>p <span class="ot">&lt;-</span> murders <span class="sc">|&gt;</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> population, <span class="at">y =</span> total) <span class="sc">+</span> <span class="fu">geom_point</span>()</span>
<span id="cb184-6"><a href="ggplot-and-dplyr.html#cb184-6" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;murders_plot.pdf&quot;</span>, <span class="at">plot =</span> p)</span></code></pre></div>
<p>The function automatically detects the file type from the extension (<code>.png</code>, <code>.pdf</code>, <code>.svg</code>, etc.).</p>
<hr />
</div>
<div id="summarizing-data-with-dplyr" class="section level2 hasAnchor" number="5.9">
<h2><span class="header-section-number">5.9</span> Summarizing data with dplyr<a href="ggplot-and-dplyr.html#summarizing-data-with-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Visualization and data summarization go hand in hand. While plots help us <em>see</em> patterns in our data, summary statistics help us <em>quantify</em> those patterns. The <code>dplyr</code> package provides powerful functions for calculating summaries.</p>
<p>The <code>tidyverse</code> package includes several packages, among them <code>dplyr</code> which makes it easier for us to summarize data from a variable. When we call the <code>tidyvere</code> library we are also calling all the functions of <code>dplyr</code>. To start using the functions of <code>dplyr</code> we are going to load the <code>heights</code> data frame which is in the <code>dslabs</code> library.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="ggplot-and-dplyr.html#cb185-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb185-2"><a href="ggplot-and-dplyr.html#cb185-2" tabindex="-1"></a><span class="fu">library</span>(dslabs)</span></code></pre></div>
<p>First let’s understand the <code>heights</code> data frame, we can apply pipeline and then use the <code>head()</code> function:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="ggplot-and-dplyr.html#cb186-1" tabindex="-1"></a>heights <span class="sc">|&gt;</span> </span>
<span id="cb186-2"><a href="ggplot-and-dplyr.html#cb186-2" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb186-3"><a href="ggplot-and-dplyr.html#cb186-3" tabindex="-1"></a><span class="co">#&gt;      sex height</span></span>
<span id="cb186-4"><a href="ggplot-and-dplyr.html#cb186-4" tabindex="-1"></a><span class="co">#&gt; 1   Male     75</span></span>
<span id="cb186-5"><a href="ggplot-and-dplyr.html#cb186-5" tabindex="-1"></a><span class="co">#&gt; 2   Male     70</span></span>
<span id="cb186-6"><a href="ggplot-and-dplyr.html#cb186-6" tabindex="-1"></a><span class="co">#&gt; 3   Male     68</span></span>
<span id="cb186-7"><a href="ggplot-and-dplyr.html#cb186-7" tabindex="-1"></a><span class="co">#&gt; 4   Male     74</span></span>
<span id="cb186-8"><a href="ggplot-and-dplyr.html#cb186-8" tabindex="-1"></a><span class="co">#&gt; 5   Male     61</span></span>
<span id="cb186-9"><a href="ggplot-and-dplyr.html#cb186-9" tabindex="-1"></a><span class="co">#&gt; 6 Female     65</span></span></code></pre></div>
<p>This data frame corresponds to the list of attributes of students in a university, where the <code>height</code> column indicates the height of each one in inches.</p>
<p>Finally, let’s add the column <code>height_m</code> where we will transform the height to meters. Remember that a meter has 39.37 inches. Let’s store the result in the variable <code>heights_m</code>.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="ggplot-and-dplyr.html#cb187-1" tabindex="-1"></a>heights_m <span class="ot">&lt;-</span> heights <span class="sc">|&gt;</span> </span>
<span id="cb187-2"><a href="ggplot-and-dplyr.html#cb187-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">height_m =</span> height<span class="sc">/</span><span class="fl">39.37</span>)</span>
<span id="cb187-3"><a href="ggplot-and-dplyr.html#cb187-3" tabindex="-1"></a></span>
<span id="cb187-4"><a href="ggplot-and-dplyr.html#cb187-4" tabindex="-1"></a>heights_m <span class="sc">|&gt;</span> </span>
<span id="cb187-5"><a href="ggplot-and-dplyr.html#cb187-5" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb187-6"><a href="ggplot-and-dplyr.html#cb187-6" tabindex="-1"></a><span class="co">#&gt;      sex height height_m</span></span>
<span id="cb187-7"><a href="ggplot-and-dplyr.html#cb187-7" tabindex="-1"></a><span class="co">#&gt; 1   Male     75 1.905004</span></span>
<span id="cb187-8"><a href="ggplot-and-dplyr.html#cb187-8" tabindex="-1"></a><span class="co">#&gt; 2   Male     70 1.778004</span></span>
<span id="cb187-9"><a href="ggplot-and-dplyr.html#cb187-9" tabindex="-1"></a><span class="co">#&gt; 3   Male     68 1.727203</span></span>
<span id="cb187-10"><a href="ggplot-and-dplyr.html#cb187-10" tabindex="-1"></a><span class="co">#&gt; 4   Male     74 1.879604</span></span>
<span id="cb187-11"><a href="ggplot-and-dplyr.html#cb187-11" tabindex="-1"></a><span class="co">#&gt; 5   Male     61 1.549403</span></span>
<span id="cb187-12"><a href="ggplot-and-dplyr.html#cb187-12" tabindex="-1"></a><span class="co">#&gt; 6 Female     65 1.651003</span></span></code></pre></div>
<p>The fastest way to summarize a list of data is indicating what the average is and how much its <a href="https://support.minitab.com/en-us/minitab/18/help-and-how-to/statistics/basic-statistics/supporting-topics/data-concepts/what-is-the-standard-deviation/">standard deviation</a><a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a> is. If we wanted to obtain the average we would use the <code>mean()</code> function and <code>sd()</code> to obtain the standard deviation. For example:</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="ggplot-and-dplyr.html#cb188-1" tabindex="-1"></a>avg <span class="ot">&lt;-</span> <span class="fu">mean</span>(heights_m<span class="sc">$</span>height_m)</span>
<span id="cb188-2"><a href="ggplot-and-dplyr.html#cb188-2" tabindex="-1"></a>std_dev <span class="ot">&lt;-</span> <span class="fu">sd</span>(heights_m<span class="sc">$</span>height_m)</span></code></pre></div>
<p>However, this summarizes all students for us without considering whether men could be on average taller than women. If we wanted to calculate the average and std. dev. we would have to filter first, then store in a variable and finally calculate the average and standard deviation. This is impractical and for that <code>dplyr</code> grants us the <code>summarize()</code> function.</p>
<div id="summarize-function" class="section level3 hasAnchor" number="5.9.1">
<h3><span class="header-section-number">5.9.1</span> Summarize function<a href="ggplot-and-dplyr.html#summarize-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can use the <code>summarize</code> function using the pipeline operator. Thus, we could calculate the average and std. dev. in this way:</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="ggplot-and-dplyr.html#cb189-1" tabindex="-1"></a>heights_m <span class="sc">|&gt;</span></span>
<span id="cb189-2"><a href="ggplot-and-dplyr.html#cb189-2" tabindex="-1"></a>    <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&quot;Male&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb189-3"><a href="ggplot-and-dplyr.html#cb189-3" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">avg =</span> <span class="fu">mean</span>(height_m), <span class="at">std_dev =</span> <span class="fu">sd</span>(height_m))</span>
<span id="cb189-4"><a href="ggplot-and-dplyr.html#cb189-4" tabindex="-1"></a><span class="co">#&gt;        avg    std_dev</span></span>
<span id="cb189-5"><a href="ggplot-and-dplyr.html#cb189-5" tabindex="-1"></a><span class="co">#&gt; 1 1.760598 0.09172018</span></span></code></pre></div>
<p>This function also generates a data frame for us. We can validate it if we store the result in the variable <code>heights_m_male</code> and then report the <em>class</em> of the variable:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="ggplot-and-dplyr.html#cb190-1" tabindex="-1"></a>heights_m_male <span class="ot">&lt;-</span> heights_m <span class="sc">|&gt;</span></span>
<span id="cb190-2"><a href="ggplot-and-dplyr.html#cb190-2" tabindex="-1"></a>    <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&quot;Male&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb190-3"><a href="ggplot-and-dplyr.html#cb190-3" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">avg =</span> <span class="fu">mean</span>(height_m), <span class="at">std_dev =</span> <span class="fu">sd</span>(height_m))</span>
<span id="cb190-4"><a href="ggplot-and-dplyr.html#cb190-4" tabindex="-1"></a></span>
<span id="cb190-5"><a href="ggplot-and-dplyr.html#cb190-5" tabindex="-1"></a><span class="fu">class</span>(heights_m_male)</span>
<span id="cb190-6"><a href="ggplot-and-dplyr.html#cb190-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;data.frame&quot;</span></span></code></pre></div>
<p>We can report the data frame <code>heights_m_male</code> and use it for future analyzes accessing with the accessor <code>$</code>.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="ggplot-and-dplyr.html#cb191-1" tabindex="-1"></a>heights_m_male</span>
<span id="cb191-2"><a href="ggplot-and-dplyr.html#cb191-2" tabindex="-1"></a><span class="co">#&gt;        avg    std_dev</span></span>
<span id="cb191-3"><a href="ggplot-and-dplyr.html#cb191-3" tabindex="-1"></a><span class="co">#&gt; 1 1.760598 0.09172018</span></span></code></pre></div>
<p>We see that the average height of men is 1.76 meters with a standard deviation of 0.09 meters.</p>
<p>In the same way, we can use <code>summarize</code> to calculate other functions such as:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="ggplot-and-dplyr.html#cb192-1" tabindex="-1"></a>heights_m <span class="sc">|&gt;</span></span>
<span id="cb192-2"><a href="ggplot-and-dplyr.html#cb192-2" tabindex="-1"></a>    <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&quot;Male&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb192-3"><a href="ggplot-and-dplyr.html#cb192-3" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">min_val =</span> <span class="fu">min</span>(height_m), <span class="at">max_val =</span> <span class="fu">max</span>(height_m), <span class="at">median_val =</span> <span class="fu">median</span>(height_m))</span>
<span id="cb192-4"><a href="ggplot-and-dplyr.html#cb192-4" tabindex="-1"></a><span class="co">#&gt;    min_val  max_val median_val</span></span>
<span id="cb192-5"><a href="ggplot-and-dplyr.html#cb192-5" tabindex="-1"></a><span class="co">#&gt; 1 1.270003 2.100004   1.752604</span></span></code></pre></div>
<p>The tallest student measures more than 2.1 meters. Half of the male students measure more than 1.75 meters.</p>
<p>However, we would now have to change to “Female” to calculate the data for women. We need to group and then summarize the data taking into account the grouping. For this there is the function <code>group_by()</code></p>
</div>
<div id="group-by-function" class="section level3 hasAnchor" number="5.9.2">
<h3><span class="header-section-number">5.9.2</span> Group By Function<a href="ggplot-and-dplyr.html#group-by-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This function allows us to create grouped data frames which makes it easier for us to summarize the data. We would only have to select based on what we want to group and no longer filter by sex. In this case the grouping would be based on the <code>sex</code> column:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="ggplot-and-dplyr.html#cb193-1" tabindex="-1"></a>heights_m <span class="sc">|&gt;</span></span>
<span id="cb193-2"><a href="ggplot-and-dplyr.html#cb193-2" tabindex="-1"></a>    <span class="fu">group_by</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb193-3"><a href="ggplot-and-dplyr.html#cb193-3" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">avg =</span> <span class="fu">mean</span>(height_m), <span class="at">std_dev =</span> <span class="fu">sd</span>(height_m))</span>
<span id="cb193-4"><a href="ggplot-and-dplyr.html#cb193-4" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span id="cb193-5"><a href="ggplot-and-dplyr.html#cb193-5" tabindex="-1"></a><span class="co">#&gt;   sex      avg std_dev</span></span>
<span id="cb193-6"><a href="ggplot-and-dplyr.html#cb193-6" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;  &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb193-7"><a href="ggplot-and-dplyr.html#cb193-7" tabindex="-1"></a><span class="co">#&gt; 1 Female  1.65  0.0955</span></span>
<span id="cb193-8"><a href="ggplot-and-dplyr.html#cb193-8" tabindex="-1"></a><span class="co">#&gt; 2 Male    1.76  0.0917</span></span></code></pre></div>
<p>On average, women are shorter than men.</p>
<p>If we now remember our danger case in the US. We can calculate the ratio of total crimes regarding the population and then compare it by region in this way:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="ggplot-and-dplyr.html#cb194-1" tabindex="-1"></a>murders <span class="sc">|&gt;</span> </span>
<span id="cb194-2"><a href="ggplot-and-dplyr.html#cb194-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ratio =</span> total <span class="sc">/</span> population <span class="sc">*</span> <span class="dv">100000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb194-3"><a href="ggplot-and-dplyr.html#cb194-3" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">|&gt;</span> </span>
<span id="cb194-4"><a href="ggplot-and-dplyr.html#cb194-4" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_ratio =</span> <span class="fu">mean</span>(ratio))</span>
<span id="cb194-5"><a href="ggplot-and-dplyr.html#cb194-5" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 × 2</span></span>
<span id="cb194-6"><a href="ggplot-and-dplyr.html#cb194-6" tabindex="-1"></a><span class="co">#&gt;   region        avg_ratio</span></span>
<span id="cb194-7"><a href="ggplot-and-dplyr.html#cb194-7" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;             &lt;dbl&gt;</span></span>
<span id="cb194-8"><a href="ggplot-and-dplyr.html#cb194-8" tabindex="-1"></a><span class="co">#&gt; 1 Northeast          1.85</span></span>
<span id="cb194-9"><a href="ggplot-and-dplyr.html#cb194-9" tabindex="-1"></a><span class="co">#&gt; 2 South              4.42</span></span>
<span id="cb194-10"><a href="ggplot-and-dplyr.html#cb194-10" tabindex="-1"></a><span class="co">#&gt; 3 North Central      2.18</span></span>
<span id="cb194-11"><a href="ggplot-and-dplyr.html#cb194-11" tabindex="-1"></a><span class="co">#&gt; 4 West               1.83</span></span></code></pre></div>
<p>On average, the South region is more dangerous.</p>
</div>
</div>
<div id="exercises-5" class="section level2 hasAnchor" number="5.10">
<h2><span class="header-section-number">5.10</span> Exercises<a href="ggplot-and-dplyr.html#exercises-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This time we are going to perform exercises within the field of biology and for this we must remember the parts of a flower. This way we will give more sense to the problem:</p>
<p><img src="_assets/images/03-visualization/flower-parts.png" alt="Botanical diagram showing flower parts: sepal, petal, stamen, and pistil" width="150pt" style="display: block; margin: auto;" /></p>
<ol start="51" style="list-style-type: decimal">
<li>Load the <code>iris</code> data frame (<code>data(iris)</code>), which details the characteristics of 150 flowers across 3 species. Create a scatter plot visualizing the relationship between sepal length and petal length.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="ggplot-and-dplyr.html#cb195-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span> </span>
<span id="cb195-2"><a href="ggplot-and-dplyr.html#cb195-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb195-3"><a href="ggplot-and-dplyr.html#cb195-3" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Petal.Length) <span class="sc">+</span></span>
<span id="cb195-4"><a href="ggplot-and-dplyr.html#cb195-4" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
</details>
<ol start="52" style="list-style-type: decimal">
<li>Enhance the previous visualization by coloring the points to represent the species of each flower.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="ggplot-and-dplyr.html#cb196-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span> </span>
<span id="cb196-2"><a href="ggplot-and-dplyr.html#cb196-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb196-3"><a href="ggplot-and-dplyr.html#cb196-3" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Petal.Length, <span class="at">color =</span> Species) <span class="sc">+</span></span>
<span id="cb196-4"><a href="ggplot-and-dplyr.html#cb196-4" tabindex="-1"></a>  <span class="fu">geom_point</span>() </span></code></pre></div>
</details>
<ol start="53" style="list-style-type: decimal">
<li>Polish your plot by setting the title to “Relationship between sepal and petal size of different flowers”, naming the x-axis “Sepal length (in cm)”, the y-axis “Petal length (in cm)”, and labeling the legend simply as “Species”.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="ggplot-and-dplyr.html#cb197-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span> </span>
<span id="cb197-2"><a href="ggplot-and-dplyr.html#cb197-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb197-3"><a href="ggplot-and-dplyr.html#cb197-3" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Petal.Length, <span class="at">color =</span> Species) <span class="sc">+</span></span>
<span id="cb197-4"><a href="ggplot-and-dplyr.html#cb197-4" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb197-5"><a href="ggplot-and-dplyr.html#cb197-5" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Sepal length (in cm)&quot;</span>) <span class="sc">+</span></span>
<span id="cb197-6"><a href="ggplot-and-dplyr.html#cb197-6" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Petal length (in cm)&quot;</span>) <span class="sc">+</span></span>
<span id="cb197-7"><a href="ggplot-and-dplyr.html#cb197-7" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Relationship between sepal and petal size of different flowers&quot;</span>) <span class="sc">+</span></span>
<span id="cb197-8"><a href="ggplot-and-dplyr.html#cb197-8" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">name =</span> <span class="st">&quot;Species&quot;</span>)</span></code></pre></div>
</details>
<ol start="54" style="list-style-type: decimal">
<li>Generate a statistical summary of the ratio between sepal length and petal length, reporting a data frame that includes the average, standard deviation, and median of this ratio.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="ggplot-and-dplyr.html#cb198-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb198-2"><a href="ggplot-and-dplyr.html#cb198-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ratio =</span> Sepal.Length <span class="sc">/</span> Petal.Length) <span class="sc">|&gt;</span> </span>
<span id="cb198-3"><a href="ggplot-and-dplyr.html#cb198-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg =</span> <span class="fu">mean</span>(ratio), <span class="at">std_dev =</span> <span class="fu">sd</span>(ratio), <span class="at">median_val =</span> <span class="fu">median</span>(ratio))</span></code></pre></div>
</details>
<ol start="55" style="list-style-type: decimal">
<li>Refine your previous ratio summary to show these statistics (average, standard deviation, and median) calculated separately for each species.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="ggplot-and-dplyr.html#cb199-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb199-2"><a href="ggplot-and-dplyr.html#cb199-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ratio =</span> Sepal.Length <span class="sc">/</span> Petal.Length) <span class="sc">|&gt;</span> </span>
<span id="cb199-3"><a href="ggplot-and-dplyr.html#cb199-3" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span> </span>
<span id="cb199-4"><a href="ggplot-and-dplyr.html#cb199-4" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg =</span> <span class="fu">mean</span>(ratio), <span class="at">std_dev =</span> <span class="fu">sd</span>(ratio), <span class="at">median_val =</span> <span class="fu">median</span>(ratio))</span></code></pre></div>
</details>
<hr />
</div>
<div id="key-takeaways" class="section level2 hasAnchor" number="5.11">
<h2><span class="header-section-number">5.11</span> Key Takeaways<a href="ggplot-and-dplyr.html#key-takeaways" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This chapter emphasized a <strong>layered approach</strong> to visualization, building plots incrementally with aesthetics, geoms, and scales. We learned to map data to visual properties using <code>aes</code>, select the appropriate geometry (like <code>geom_point</code> or <code>geom_line</code>), and transform axes to reveal patterns in skewed data. Beyond the visuals, we explored how to customize themes and labels for clarity, and how to quantify insights using <code>dplyr</code> summarization tools before saving our work with <code>ggsave()</code>.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="6">
<li id="fn6"><p>What is the standard deviation?<a href="ggplot-and-dplyr.html#fnref6" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="advanced-techniques.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="gapminder.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": true,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": null
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": null,
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
