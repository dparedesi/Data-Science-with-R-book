<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Data import and consolidation | Data Science with R</title>
  <meta name="description" content="A comprehensive guide to data science using R, covering fundamentals, visualization, statistics, machine learning with tidymodels, and generative AI integration. Third Edition by Daniel Paredes." />
  <meta name="generator" content="bookdown 0.46 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Data import and consolidation | Data Science with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A comprehensive guide to data science using R, covering fundamentals, visualization, statistics, machine learning with tidymodels, and generative AI integration. Third Edition by Daniel Paredes." />
  <meta name="github-repo" content="dparedesi/Data-Science-with-R-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Data import and consolidation | Data Science with R" />
  
  <meta name="twitter:description" content="A comprehensive guide to data science using R, covering fundamentals, visualization, statistics, machine learning with tidymodels, and generative AI integration. Third Edition by Daniel Paredes." />
  

<meta name="author" content="Author: Mg. Daniel Paredes Inilupu" />


<meta name="date" content="2025-12-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-1.html"/>
<link rel="next" href="introduction-2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics: Sin Vista -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VJJ963010J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VJJ963010J');
</script>

<!-- Global site tag (gtag.js) - Google Analytics: Vista -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165839710-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165839710-1');
</script>

<!-- Global site tag (gtag.js) - Google Analytics: Agentedec4mbio -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-17876479-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-17876479-1');
</script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#support-this-work"><i class="fa fa-check"></i>Support This Work</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#stay-connected"><i class="fa fa-check"></i>Stay Connected</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html"><i class="fa fa-check"></i>Acknowledgments</a>
<ul>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html#family"><i class="fa fa-check"></i>Family</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html#mentors-and-inspirations"><i class="fa fa-check"></i>Mentors and Inspirations</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html#contributors"><i class="fa fa-check"></i>Contributors</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#why-r"><i class="fa fa-check"></i>Why R?</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#installing-r"><i class="fa fa-check"></i>Installing R</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#installing-rstudio"><i class="fa fa-check"></i>Installing RStudio</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#rstudio-sections"><i class="fa fa-check"></i>RStudio Sections</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#essential-keyboard-shortcuts"><i class="fa fa-check"></i>Essential Keyboard Shortcuts</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#testing-your-installation"><i class="fa fa-check"></i>Testing Your Installation</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#writing-scripts"><i class="fa fa-check"></i>Writing Scripts</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#whats-next"><i class="fa fa-check"></i>What’s Next?</a></li>
</ul></li>
<li class="part"><span><b>I Fundamentals and Key Tools</b></span></li>
<li class="chapter" data-level="1" data-path="objects.html"><a href="objects.html"><i class="fa fa-check"></i><b>1</b> Objects</a>
<ul>
<li class="chapter" data-level="1.1" data-path="objects.html"><a href="objects.html#what-are-objects-in-r"><i class="fa fa-check"></i><b>1.1</b> What are objects in R?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="objects.html"><a href="objects.html#r-as-an-object-oriented-language"><i class="fa fa-check"></i><b>1.1.1</b> R as an object-oriented language</a></li>
<li class="chapter" data-level="1.1.2" data-path="objects.html"><a href="objects.html#the-power-of-abstraction"><i class="fa fa-check"></i><b>1.1.2</b> The power of abstraction</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="objects.html"><a href="objects.html#variables-the-first-objects-on-your-journey"><i class="fa fa-check"></i><b>1.2</b> Variables: The first objects on your journey</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="objects.html"><a href="objects.html#creating-variables-in-r"><i class="fa fa-check"></i><b>1.2.1</b> Creating variables in R</a></li>
<li class="chapter" data-level="1.2.2" data-path="objects.html"><a href="objects.html#operations-with-variables"><i class="fa fa-check"></i><b>1.2.2</b> Operations with variables</a></li>
<li class="chapter" data-level="1.2.3" data-path="objects.html"><a href="objects.html#best-practices-for-naming-variables"><i class="fa fa-check"></i><b>1.2.3</b> Best practices for naming variables</a></li>
<li class="chapter" data-level="1.2.4" data-path="objects.html"><a href="objects.html#data-types"><i class="fa fa-check"></i><b>1.2.4</b> Data types</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="objects.html"><a href="objects.html#object-types-for-complex-data"><i class="fa fa-check"></i><b>1.3</b> Object types for complex data</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="objects.html"><a href="objects.html#vectors-organizing-information-of-the-same-type"><i class="fa fa-check"></i><b>1.3.1</b> Vectors: organizing information of the same type</a></li>
<li class="chapter" data-level="1.3.2" data-path="objects.html"><a href="objects.html#lists-grouping-objects-of-different-types"><i class="fa fa-check"></i><b>1.3.2</b> Lists: grouping objects of different types</a></li>
<li class="chapter" data-level="1.3.3" data-path="objects.html"><a href="objects.html#matrices-organizing-data-in-rows-and-columns"><i class="fa fa-check"></i><b>1.3.3</b> Matrices: organizing data in rows and columns</a></li>
<li class="chapter" data-level="1.3.4" data-path="objects.html"><a href="objects.html#arrays-multidimensional-matrices"><i class="fa fa-check"></i><b>1.3.4</b> Arrays: multidimensional matrices</a></li>
<li class="chapter" data-level="1.3.5" data-path="objects.html"><a href="objects.html#factors-representing-categorical-data"><i class="fa fa-check"></i><b>1.3.5</b> Factors: representing categorical data</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="objects.html"><a href="objects.html#the-universe-of-objects-in-r"><i class="fa fa-check"></i><b>1.4</b> The Universe of Objects in R</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="objects.html"><a href="objects.html#philosophy-of-objects-in-r"><i class="fa fa-check"></i><b>1.4.1</b> Philosophy of objects in R</a></li>
<li class="chapter" data-level="1.4.2" data-path="objects.html"><a href="objects.html#comparison-with-other-languages"><i class="fa fa-check"></i><b>1.4.2</b> Comparison with other languages</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="objects.html"><a href="objects.html#exercises"><i class="fa fa-check"></i><b>1.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>2</b> Functions</a>
<ul>
<li class="chapter" data-level="2.1" data-path="functions.html"><a href="functions.html#introduction-to-the-world-of-functions"><i class="fa fa-check"></i><b>2.1</b> Introduction to the world of functions</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="functions.html"><a href="functions.html#what-are-functions"><i class="fa fa-check"></i><b>2.1.1</b> What are functions?</a></li>
<li class="chapter" data-level="2.1.2" data-path="functions.html"><a href="functions.html#why-use-functions"><i class="fa fa-check"></i><b>2.1.2</b> Why use functions?</a></li>
<li class="chapter" data-level="2.1.3" data-path="functions.html"><a href="functions.html#first-functions-exploring-basic-r-functions"><i class="fa fa-check"></i><b>2.1.3</b> First functions: exploring basic R functions</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="functions.html"><a href="functions.html#anatomy-of-a-function"><i class="fa fa-check"></i><b>2.2</b> Anatomy of a function</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="functions.html"><a href="functions.html#arguments-the-ingredients-of-the-function"><i class="fa fa-check"></i><b>2.2.1</b> Arguments: the ingredients of the function</a></li>
<li class="chapter" data-level="2.2.2" data-path="functions.html"><a href="functions.html#body-the-instructions-of-the-function"><i class="fa fa-check"></i><b>2.2.2</b> Body: the instructions of the function</a></li>
<li class="chapter" data-level="2.2.3" data-path="functions.html"><a href="functions.html#return-value-the-result-of-the-function"><i class="fa fa-check"></i><b>2.2.3</b> Return value: the result of the function</a></li>
<li class="chapter" data-level="2.2.4" data-path="functions.html"><a href="functions.html#examples-creating-simple-functions-step-by-step"><i class="fa fa-check"></i><b>2.2.4</b> Examples: creating simple functions step by step</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="functions.html"><a href="functions.html#mastering-the-use-of-functions"><i class="fa fa-check"></i><b>2.3</b> Mastering the use of functions</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="functions.html"><a href="functions.html#functions-with-a-variable-number-of-arguments-...-adapting-to-different-situations"><i class="fa fa-check"></i><b>2.3.1</b> Functions with a variable number of arguments (<code>...</code>): Adapting to different situations</a></li>
<li class="chapter" data-level="2.3.2" data-path="functions.html"><a href="functions.html#variable-scope-local-and-global-variables"><i class="fa fa-check"></i><b>2.3.2</b> Variable scope: local and global variables</a></li>
<li class="chapter" data-level="2.3.3" data-path="functions.html"><a href="functions.html#examples-functions-to-calculate-taxes-discounts-etc."><i class="fa fa-check"></i><b>2.3.3</b> Examples: functions to calculate taxes, discounts, etc.</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="functions.html"><a href="functions.html#higher-order-functions"><i class="fa fa-check"></i><b>2.4</b> Higher-order functions</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="functions.html"><a href="functions.html#lapply-and-sapply-applying-a-function-to-each-element"><i class="fa fa-check"></i><b>2.4.1</b> <code>lapply()</code> and <code>sapply()</code>: applying a function to each element</a></li>
<li class="chapter" data-level="2.4.2" data-path="functions.html"><a href="functions.html#apply-applying-a-function-to-rows-or-columns"><i class="fa fa-check"></i><b>2.4.2</b> <code>apply()</code>: applying a function to rows or columns</a></li>
<li class="chapter" data-level="2.4.3" data-path="functions.html"><a href="functions.html#mapply-applying-a-function-to-multiple-arguments"><i class="fa fa-check"></i><b>2.4.3</b> <code>mapply()</code>: applying a function to multiple arguments</a></li>
<li class="chapter" data-level="2.4.4" data-path="functions.html"><a href="functions.html#examples-data-analysis-with-higher-order-functions"><i class="fa fa-check"></i><b>2.4.4</b> Examples: data analysis with higher-order functions</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="functions.html"><a href="functions.html#closures-functions-with-memory"><i class="fa fa-check"></i><b>2.5</b> Closures: functions with memory</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="functions.html"><a href="functions.html#concept-functions-that-remember"><i class="fa fa-check"></i><b>2.5.1</b> Concept: functions that “remember”</a></li>
<li class="chapter" data-level="2.5.2" data-path="functions.html"><a href="functions.html#applications-creating-counters-functions-with-internal-state"><i class="fa fa-check"></i><b>2.5.2</b> Applications: creating counters, functions with internal state</a></li>
<li class="chapter" data-level="2.5.3" data-path="functions.html"><a href="functions.html#examples-simulating-a-game-creating-an-operation-history"><i class="fa fa-check"></i><b>2.5.3</b> Examples: simulating a game, creating an operation history</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="functions.html"><a href="functions.html#debugging-and-error-handling-solving-the-mysteries-of-your-code"><i class="fa fa-check"></i><b>2.6</b> Debugging and error handling: solving the mysteries of your code</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="functions.html"><a href="functions.html#identifying-errors-common-error-messages-in-r"><i class="fa fa-check"></i><b>2.6.1</b> Identifying errors: common error messages in R</a></li>
<li class="chapter" data-level="2.6.2" data-path="functions.html"><a href="functions.html#debugging-tools-debug-traceback"><i class="fa fa-check"></i><b>2.6.2</b> Debugging tools: <code>debug()</code>, <code>traceback()</code></a></li>
<li class="chapter" data-level="2.6.3" data-path="functions.html"><a href="functions.html#error-handling-trycatch"><i class="fa fa-check"></i><b>2.6.3</b> Error handling: <code>tryCatch()</code></a></li>
<li class="chapter" data-level="2.6.4" data-path="functions.html"><a href="functions.html#examples-debugging-functions-with-errors-handling-exceptions"><i class="fa fa-check"></i><b>2.6.4</b> Examples: debugging functions with errors, handling exceptions</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="functions.html"><a href="functions.html#exercises-1"><i class="fa fa-check"></i><b>2.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>3</b> Data Frames</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-frames.html"><a href="data-frames.html#introduction-to-data-frames"><i class="fa fa-check"></i><b>3.1</b> Introduction to Data Frames</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-frames.html"><a href="data-frames.html#what-are-data-frames"><i class="fa fa-check"></i><b>3.1.1</b> What are data frames?</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-frames.html"><a href="data-frames.html#why-data-frames"><i class="fa fa-check"></i><b>3.1.2</b> Why data frames?</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-frames.html"><a href="data-frames.html#data-frames-in-action-exploring-information-about-the-united-states"><i class="fa fa-check"></i><b>3.1.3</b> Data Frames in action: exploring information about the United States</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-frames.html"><a href="data-frames.html#creating-data-frames-building-your-database-for-the-move"><i class="fa fa-check"></i><b>3.2</b> Creating Data Frames: Building your database for the move</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-frames.html"><a href="data-frames.html#importing-data-from-files-csv-excel"><i class="fa fa-check"></i><b>3.2.1</b> Importing data from files: CSV, Excel</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-frames.html"><a href="data-frames.html#creating-data-frames-manually"><i class="fa fa-check"></i><b>3.2.2</b> Creating data frames manually</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-frames.html"><a href="data-frames.html#examples"><i class="fa fa-check"></i><b>3.2.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-frames.html"><a href="data-frames.html#exploring-data-frames-discovering-the-secrets-of-your-data"><i class="fa fa-check"></i><b>3.3</b> Exploring Data Frames: Discovering the secrets of your data</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-frames.html"><a href="data-frames.html#accessing-rows-columns-and-cells"><i class="fa fa-check"></i><b>3.3.1</b> Accessing rows, columns, and cells</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-frames.html"><a href="data-frames.html#functions-for-exploring-data-frames"><i class="fa fa-check"></i><b>3.3.2</b> Functions for exploring data frames</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-frames.html"><a href="data-frames.html#examples-exploring-data-frames-with-move-information"><i class="fa fa-check"></i><b>3.3.3</b> Examples: exploring data frames with move information</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-frames.html"><a href="data-frames.html#manipulating-data-frames-transforming-your-data"><i class="fa fa-check"></i><b>3.4</b> Manipulating Data Frames: Transforming your data</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data-frames.html"><a href="data-frames.html#introduction-to-the-pipeline-operator"><i class="fa fa-check"></i><b>3.4.1</b> Introduction to the pipeline operator (<code>|&gt;</code>)</a></li>
<li class="chapter" data-level="3.4.2" data-path="data-frames.html"><a href="data-frames.html#transforming-a-table-with-mutate"><i class="fa fa-check"></i><b>3.4.2</b> Transforming a table with <code>mutate()</code></a></li>
<li class="chapter" data-level="3.4.3" data-path="data-frames.html"><a href="data-frames.html#filtering-data-selecting-cities-that-interest-you"><i class="fa fa-check"></i><b>3.4.3</b> Filtering data: selecting cities that interest you</a></li>
<li class="chapter" data-level="3.4.4" data-path="data-frames.html"><a href="data-frames.html#sorting-data-finding-the-safest-cities"><i class="fa fa-check"></i><b>3.4.4</b> Sorting data: finding the safest cities</a></li>
<li class="chapter" data-level="3.4.5" data-path="data-frames.html"><a href="data-frames.html#aggregating-and-summarizing-data-obtaining-general-overview"><i class="fa fa-check"></i><b>3.4.5</b> Aggregating and summarizing data: obtaining general overview</a></li>
<li class="chapter" data-level="3.4.6" data-path="data-frames.html"><a href="data-frames.html#joining-data-frames-combining-information"><i class="fa fa-check"></i><b>3.4.6</b> Joining data frames: combining information</a></li>
<li class="chapter" data-level="3.4.7" data-path="data-frames.html"><a href="data-frames.html#examples-1"><i class="fa fa-check"></i><b>3.4.7</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="data-frames.html"><a href="data-frames.html#exercises-2"><i class="fa fa-check"></i><b>3.5</b> Exercises</a></li>
<li class="chapter" data-level="3.6" data-path="data-frames.html"><a href="data-frames.html#data-frames-in-plots"><i class="fa fa-check"></i><b>3.6</b> Data frames in plots</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="data-frames.html"><a href="data-frames.html#scatter-plots"><i class="fa fa-check"></i><b>3.6.1</b> Scatter plots</a></li>
<li class="chapter" data-level="3.6.2" data-path="data-frames.html"><a href="data-frames.html#histograms"><i class="fa fa-check"></i><b>3.6.2</b> Histograms</a></li>
<li class="chapter" data-level="3.6.3" data-path="data-frames.html"><a href="data-frames.html#box-plot"><i class="fa fa-check"></i><b>3.6.3</b> Box plot</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="data-frames.html"><a href="data-frames.html#data-interpretation"><i class="fa fa-check"></i><b>3.7</b> Data interpretation</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="data-frames.html"><a href="data-frames.html#quartiles"><i class="fa fa-check"></i><b>3.7.1</b> Quartiles</a></li>
<li class="chapter" data-level="3.7.2" data-path="data-frames.html"><a href="data-frames.html#interpretation-of-box-plot"><i class="fa fa-check"></i><b>3.7.2</b> Interpretation of box plot</a></li>
<li class="chapter" data-level="3.7.3" data-path="data-frames.html"><a href="data-frames.html#examples-2"><i class="fa fa-check"></i><b>3.7.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="data-frames.html"><a href="data-frames.html#exercises-3"><i class="fa fa-check"></i><b>3.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="advanced-techniques.html"><a href="advanced-techniques.html"><i class="fa fa-check"></i><b>4</b> Advanced Techniques</a>
<ul>
<li class="chapter" data-level="4.1" data-path="advanced-techniques.html"><a href="advanced-techniques.html#metaprogramming-writing-code-that-writes-code"><i class="fa fa-check"></i><b>4.1</b> Metaprogramming: writing code that writes code</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="advanced-techniques.html"><a href="advanced-techniques.html#manipulating-expressions-the-art-of-sculpting-code"><i class="fa fa-check"></i><b>4.1.1</b> Manipulating expressions: The art of sculpting code</a></li>
<li class="chapter" data-level="4.1.2" data-path="advanced-techniques.html"><a href="advanced-techniques.html#examples-3"><i class="fa fa-check"></i><b>4.1.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="advanced-techniques.html"><a href="advanced-techniques.html#functional-programming-a-new-paradigm"><i class="fa fa-check"></i><b>4.2</b> Functional programming: a new paradigm</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="advanced-techniques.html"><a href="advanced-techniques.html#basic-principles-of-functional-programming"><i class="fa fa-check"></i><b>4.2.1</b> Basic principles of functional programming</a></li>
<li class="chapter" data-level="4.2.2" data-path="advanced-techniques.html"><a href="advanced-techniques.html#higher-order-functions-in-r"><i class="fa fa-check"></i><b>4.2.2</b> Higher-order functions in R</a></li>
<li class="chapter" data-level="4.2.3" data-path="advanced-techniques.html"><a href="advanced-techniques.html#examples-4"><i class="fa fa-check"></i><b>4.2.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="advanced-techniques.html"><a href="advanced-techniques.html#r6-the-future-of-oop-in-r"><i class="fa fa-check"></i><b>4.3</b> R6: The future of OOP in R</a></li>
<li class="chapter" data-level="4.4" data-path="advanced-techniques.html"><a href="advanced-techniques.html#exercises-4"><i class="fa fa-check"></i><b>4.4</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Data Visualization and Summarization</b></span></li>
<li class="chapter" data-level="5" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html"><i class="fa fa-check"></i><b>5</b> Ggplot and dplyr</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#creating-the-ggplot-object"><i class="fa fa-check"></i><b>5.1</b> Creating the ggplot object</a></li>
<li class="chapter" data-level="5.2" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#aesthetic-mapping-layer"><i class="fa fa-check"></i><b>5.2</b> Aesthetic mapping layer</a></li>
<li class="chapter" data-level="5.3" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#geoms-layer"><i class="fa fa-check"></i><b>5.3</b> Geoms layer</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#tweaking-aes-and-geoms"><i class="fa fa-check"></i><b>5.3.1</b> Tweaking aes and geoms</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#scale-layer"><i class="fa fa-check"></i><b>5.4</b> Scale layer</a></li>
<li class="chapter" data-level="5.5" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#label-title-and-legend-layer"><i class="fa fa-check"></i><b>5.5</b> Label, title and legend layer</a></li>
<li class="chapter" data-level="5.6" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#reference-lines"><i class="fa fa-check"></i><b>5.6</b> Reference lines</a></li>
<li class="chapter" data-level="5.7" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#changing-the-plot-style"><i class="fa fa-check"></i><b>5.7</b> Changing the plot style</a></li>
<li class="chapter" data-level="5.8" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#saving-plots"><i class="fa fa-check"></i><b>5.8</b> Saving plots</a></li>
<li class="chapter" data-level="5.9" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#summarizing-data-with-dplyr"><i class="fa fa-check"></i><b>5.9</b> Summarizing data with dplyr</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#summarize-function"><i class="fa fa-check"></i><b>5.9.1</b> Summarize function</a></li>
<li class="chapter" data-level="5.9.2" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#group-by-function"><i class="fa fa-check"></i><b>5.9.2</b> Group By Function</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#exercises-5"><i class="fa fa-check"></i><b>5.10</b> Exercises</a></li>
<li class="chapter" data-level="5.11" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#key-takeaways"><i class="fa fa-check"></i><b>5.11</b> Key Takeaways</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="gapminder.html"><a href="gapminder.html"><i class="fa fa-check"></i><b>6</b> Gapminder</a>
<ul>
<li class="chapter" data-level="6.1" data-path="gapminder.html"><a href="gapminder.html#initial-gapminder-plots"><i class="fa fa-check"></i><b>6.1</b> Initial gapminder plots</a></li>
<li class="chapter" data-level="6.2" data-path="gapminder.html"><a href="gapminder.html#facets"><i class="fa fa-check"></i><b>6.2</b> Facets</a></li>
<li class="chapter" data-level="6.3" data-path="gapminder.html"><a href="gapminder.html#time-series"><i class="fa fa-check"></i><b>6.3</b> Time series</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="gapminder.html"><a href="gapminder.html#individual-time-series"><i class="fa fa-check"></i><b>6.3.1</b> Individual time series</a></li>
<li class="chapter" data-level="6.3.2" data-path="gapminder.html"><a href="gapminder.html#multiple-time-series"><i class="fa fa-check"></i><b>6.3.2</b> Multiple time series</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="gapminder.html"><a href="gapminder.html#exercises-6"><i class="fa fa-check"></i><b>6.4</b> Exercises</a></li>
<li class="chapter" data-level="6.5" data-path="gapminder.html"><a href="gapminder.html#histograms-with-ggplot"><i class="fa fa-check"></i><b>6.5</b> Histograms with ggplot</a></li>
<li class="chapter" data-level="6.6" data-path="gapminder.html"><a href="gapminder.html#box-plots-with-ggplot"><i class="fa fa-check"></i><b>6.6</b> Box plots with ggplot</a></li>
<li class="chapter" data-level="6.7" data-path="gapminder.html"><a href="gapminder.html#comparison-of-distributions"><i class="fa fa-check"></i><b>6.7</b> Comparison of distributions</a></li>
<li class="chapter" data-level="6.8" data-path="gapminder.html"><a href="gapminder.html#exercises-7"><i class="fa fa-check"></i><b>6.8</b> Exercises</a></li>
<li class="chapter" data-level="6.9" data-path="gapminder.html"><a href="gapminder.html#key-takeaways-1"><i class="fa fa-check"></i><b>6.9</b> Key Takeaways</a></li>
</ul></li>
<li class="part"><span><b>III Statistics</b></span></li>
<li class="chapter" data-level="" data-path="introduction-to-probabilities.html"><a href="introduction-to-probabilities.html"><i class="fa fa-check"></i>Introduction to Probabilities</a></li>
<li class="chapter" data-level="7" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html"><i class="fa fa-check"></i><b>7</b> Discrete Probabilities</a>
<ul>
<li class="chapter" data-level="7.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#calculation-using-the-mathematical-definition"><i class="fa fa-check"></i><b>7.1</b> Calculation using the mathematical definition</a></li>
<li class="chapter" data-level="7.2" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#monte-carlo-simulation-for-discrete-variables"><i class="fa fa-check"></i><b>7.2</b> Monte Carlo Simulation for Discrete Variables</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#other-functions-to-create-vectors"><i class="fa fa-check"></i><b>7.2.1</b> Other functions to create vectors</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#exercises-8"><i class="fa fa-check"></i><b>7.3</b> Exercises</a></li>
<li class="chapter" data-level="7.4" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#combinations-and-permutations"><i class="fa fa-check"></i><b>7.4</b> Combinations and Permutations</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#permutations"><i class="fa fa-check"></i><b>7.4.1</b> Permutations</a></li>
<li class="chapter" data-level="7.4.2" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#combinations"><i class="fa fa-check"></i><b>7.4.2</b> Combinations</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#sufficient-experiments-with-monte-carlo-simulation"><i class="fa fa-check"></i><b>7.5</b> Sufficient Experiments with Monte Carlo Simulation</a></li>
<li class="chapter" data-level="7.6" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#case-birthdays-in-classrooms"><i class="fa fa-check"></i><b>7.6</b> Case: Birthdays in Classrooms</a></li>
<li class="chapter" data-level="7.7" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#exercises-9"><i class="fa fa-check"></i><b>7.7</b> Exercises</a></li>
<li class="chapter" data-level="7.8" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#integrative-exercise"><i class="fa fa-check"></i><b>7.8</b> Integrative Exercise</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#monty-hall-problem"><i class="fa fa-check"></i><b>7.8.1</b> Monty Hall Problem</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html"><i class="fa fa-check"></i><b>8</b> Continuous Probabilities</a>
<ul>
<li class="chapter" data-level="8.1" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#learning-objectives"><i class="fa fa-check"></i><b>8.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#empirical-distribution"><i class="fa fa-check"></i><b>8.2</b> Empirical Distribution</a></li>
<li class="chapter" data-level="8.3" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#theoretical-distribution"><i class="fa fa-check"></i><b>8.3</b> Theoretical Distribution</a></li>
<li class="chapter" data-level="8.4" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#key-takeaways-2"><i class="fa fa-check"></i><b>8.4</b> Key Takeaways</a></li>
<li class="chapter" data-level="8.5" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#exercises-10"><i class="fa fa-check"></i><b>8.5</b> Exercises</a></li>
<li class="chapter" data-level="8.6" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#monte-carlo-simulation-for-continuous-variables"><i class="fa fa-check"></i><b>8.6</b> Monte Carlo Simulation for Continuous Variables</a></li>
<li class="chapter" data-level="8.7" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#exercises-11"><i class="fa fa-check"></i><b>8.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="statistical-inference.html"><a href="statistical-inference.html"><i class="fa fa-check"></i><b>9</b> Statistical Inference</a>
<ul>
<li class="chapter" data-level="9.1" data-path="statistical-inference.html"><a href="statistical-inference.html#learning-objectives-1"><i class="fa fa-check"></i><b>9.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="9.2" data-path="statistical-inference.html"><a href="statistical-inference.html#expected-value"><i class="fa fa-check"></i><b>9.2</b> Expected Value</a></li>
<li class="chapter" data-level="9.3" data-path="statistical-inference.html"><a href="statistical-inference.html#central-limit-theorem"><i class="fa fa-check"></i><b>9.3</b> Central Limit Theorem</a></li>
<li class="chapter" data-level="9.4" data-path="statistical-inference.html"><a href="statistical-inference.html#key-takeaways-3"><i class="fa fa-check"></i><b>9.4</b> Key Takeaways</a></li>
<li class="chapter" data-level="9.5" data-path="statistical-inference.html"><a href="statistical-inference.html#exercises-12"><i class="fa fa-check"></i><b>9.5</b> Exercises</a></li>
<li class="chapter" data-level="9.6" data-path="statistical-inference.html"><a href="statistical-inference.html#parameter-estimation-method"><i class="fa fa-check"></i><b>9.6</b> Parameter Estimation Method</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="statistical-inference.html"><a href="statistical-inference.html#margin-of-error"><i class="fa fa-check"></i><b>9.6.1</b> Margin of Error</a></li>
<li class="chapter" data-level="9.6.2" data-path="statistical-inference.html"><a href="statistical-inference.html#confidence-intervals"><i class="fa fa-check"></i><b>9.6.2</b> Confidence Intervals</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="statistical-inference.html"><a href="statistical-inference.html#spread-estimation"><i class="fa fa-check"></i><b>9.7</b> Spread Estimation</a></li>
<li class="chapter" data-level="9.8" data-path="statistical-inference.html"><a href="statistical-inference.html#estimates-outside-election-polls"><i class="fa fa-check"></i><b>9.8</b> Estimates Outside Election Polls</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="statistical-inference.html"><a href="statistical-inference.html#example-estimating-average-height"><i class="fa fa-check"></i><b>9.8.1</b> Example: Estimating Average Height</a></li>
</ul></li>
<li class="chapter" data-level="9.9" data-path="statistical-inference.html"><a href="statistical-inference.html#exercises-13"><i class="fa fa-check"></i><b>9.9</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>IV Data Wrangling</b></span></li>
<li class="chapter" data-level="" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="10" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html"><i class="fa fa-check"></i><b>10</b> Data import and consolidation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#importing-from-files"><i class="fa fa-check"></i><b>10.1</b> Importing from files</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#working-directory"><i class="fa fa-check"></i><b>10.1.1</b> Working Directory</a></li>
<li class="chapter" data-level="10.1.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#readr-and-readxl-packages"><i class="fa fa-check"></i><b>10.1.2</b> readr and readxl packages</a></li>
<li class="chapter" data-level="10.1.3" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#importing-files-from-the-internet"><i class="fa fa-check"></i><b>10.1.3</b> Importing files from the internet</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#tidy-data"><i class="fa fa-check"></i><b>10.2</b> Tidy data</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#transforming-to-tidy-data"><i class="fa fa-check"></i><b>10.2.1</b> Transforming to tidy data</a></li>
<li class="chapter" data-level="10.2.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#separate-function"><i class="fa fa-check"></i><b>10.2.2</b> separate function</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#exercises-14"><i class="fa fa-check"></i><b>10.3</b> Exercises</a></li>
<li class="chapter" data-level="10.4" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#joining-tables"><i class="fa fa-check"></i><b>10.4</b> Joining tables</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#join-functions"><i class="fa fa-check"></i><b>10.4.1</b> Join functions</a></li>
<li class="chapter" data-level="10.4.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#joining-without-a-common-identifier"><i class="fa fa-check"></i><b>10.4.2</b> Joining without a common identifier</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#web-scraping"><i class="fa fa-check"></i><b>10.5</b> Web Scraping</a></li>
<li class="chapter" data-level="10.6" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#exercises-15"><i class="fa fa-check"></i><b>10.6</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>V Machine learning</b></span></li>
<li class="chapter" data-level="" data-path="introduction-2.html"><a href="introduction-2.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="10.7" data-path="introduction-2.html"><a href="introduction-2.html#learning-objectives-2"><i class="fa fa-check"></i><b>10.7</b> Learning Objectives</a></li>
<li class="chapter" data-level="10.8" data-path="introduction-2.html"><a href="introduction-2.html#chapter-structure"><i class="fa fa-check"></i><b>10.8</b> Chapter Structure</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="supervised-learning.html"><a href="supervised-learning.html"><i class="fa fa-check"></i><b>11</b> Supervised Learning</a>
<ul>
<li class="chapter" data-level="11.1" data-path="supervised-learning.html"><a href="supervised-learning.html#classification-and-regression"><i class="fa fa-check"></i><b>11.1</b> Classification and Regression</a></li>
<li class="chapter" data-level="11.2" data-path="supervised-learning.html"><a href="supervised-learning.html#knn-k-nearest-neighbors"><i class="fa fa-check"></i><b>11.2</b> kNN: k-Nearest Neighbors</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="supervised-learning.html"><a href="supervised-learning.html#two-variables-as-input"><i class="fa fa-check"></i><b>11.2.1</b> Two variables as input</a></li>
<li class="chapter" data-level="11.2.2" data-path="supervised-learning.html"><a href="supervised-learning.html#multiple-variables-as-input"><i class="fa fa-check"></i><b>11.2.2</b> Multiple variables as input</a></li>
<li class="chapter" data-level="11.2.3" data-path="supervised-learning.html"><a href="supervised-learning.html#diverse-values-of-k"><i class="fa fa-check"></i><b>11.2.3</b> Diverse values of k</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="supervised-learning.html"><a href="supervised-learning.html#tidymodels-framework"><i class="fa fa-check"></i><b>11.3</b> tidymodels Framework</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="supervised-learning.html"><a href="supervised-learning.html#creation-of-training-and-test-data"><i class="fa fa-check"></i><b>11.3.1</b> Creation of training and test data</a></li>
<li class="chapter" data-level="11.3.2" data-path="supervised-learning.html"><a href="supervised-learning.html#training-our-prediction-algorithm"><i class="fa fa-check"></i><b>11.3.2</b> Training our prediction algorithm</a></li>
<li class="chapter" data-level="11.3.3" data-path="supervised-learning.html"><a href="supervised-learning.html#data-pre-processing-with-recipes"><i class="fa fa-check"></i><b>11.3.3</b> Data Pre-processing with Recipes</a></li>
<li class="chapter" data-level="11.3.4" data-path="supervised-learning.html"><a href="supervised-learning.html#creating-a-workflow"><i class="fa fa-check"></i><b>11.3.4</b> Creating a Workflow</a></li>
<li class="chapter" data-level="11.3.5" data-path="supervised-learning.html"><a href="supervised-learning.html#parameter-tuning-with-cross-validation"><i class="fa fa-check"></i><b>11.3.5</b> Parameter Tuning with Cross-Validation</a></li>
<li class="chapter" data-level="11.3.6" data-path="supervised-learning.html"><a href="supervised-learning.html#finalizing-the-model"><i class="fa fa-check"></i><b>11.3.6</b> Finalizing the Model</a></li>
<li class="chapter" data-level="11.3.7" data-path="supervised-learning.html"><a href="supervised-learning.html#testing-the-prediction-model"><i class="fa fa-check"></i><b>11.3.7</b> Testing the prediction model</a></li>
<li class="chapter" data-level="11.3.8" data-path="supervised-learning.html"><a href="supervised-learning.html#model-evaluation-with-yardstick"><i class="fa fa-check"></i><b>11.3.8</b> Model Evaluation with yardstick</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="supervised-learning.html"><a href="supervised-learning.html#confusion-matrix"><i class="fa fa-check"></i><b>11.4</b> Confusion Matrix</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="supervised-learning.html"><a href="supervised-learning.html#accuracy"><i class="fa fa-check"></i><b>11.4.1</b> Accuracy</a></li>
<li class="chapter" data-level="11.4.2" data-path="supervised-learning.html"><a href="supervised-learning.html#sensitivity"><i class="fa fa-check"></i><b>11.4.2</b> Sensitivity</a></li>
<li class="chapter" data-level="11.4.3" data-path="supervised-learning.html"><a href="supervised-learning.html#specificity"><i class="fa fa-check"></i><b>11.4.3</b> Specificity</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="supervised-learning.html"><a href="supervised-learning.html#exercises-16"><i class="fa fa-check"></i><b>11.5</b> Exercises</a></li>
<li class="chapter" data-level="11.6" data-path="supervised-learning.html"><a href="supervised-learning.html#simple-linear-regression"><i class="fa fa-check"></i><b>11.6</b> Simple Linear Regression</a></li>
<li class="chapter" data-level="11.7" data-path="supervised-learning.html"><a href="supervised-learning.html#multiple-linear-regression"><i class="fa fa-check"></i><b>11.7</b> Multiple Linear Regression</a></li>
<li class="chapter" data-level="11.8" data-path="supervised-learning.html"><a href="supervised-learning.html#standard-method-for-evaluating-accuracy"><i class="fa fa-check"></i><b>11.8</b> Standard Method for Evaluating Accuracy</a></li>
<li class="chapter" data-level="11.9" data-path="supervised-learning.html"><a href="supervised-learning.html#selection-of-the-most-optimal-model"><i class="fa fa-check"></i><b>11.9</b> Selection of the Most Optimal Model</a>
<ul>
<li class="chapter" data-level="11.9.1" data-path="supervised-learning.html"><a href="supervised-learning.html#k-nearest-neighbors-model"><i class="fa fa-check"></i><b>11.9.1</b> k-Nearest Neighbors Model</a></li>
<li class="chapter" data-level="11.9.2" data-path="supervised-learning.html"><a href="supervised-learning.html#generalized-linear-model---glm"><i class="fa fa-check"></i><b>11.9.2</b> Generalized Linear Model - GLM</a></li>
<li class="chapter" data-level="11.9.3" data-path="supervised-learning.html"><a href="supervised-learning.html#random-forest-model"><i class="fa fa-check"></i><b>11.9.3</b> Random Forest Model</a></li>
<li class="chapter" data-level="11.9.4" data-path="supervised-learning.html"><a href="supervised-learning.html#support-vector-machine-model---svm"><i class="fa fa-check"></i><b>11.9.4</b> Support Vector Machine Model - SVM</a></li>
<li class="chapter" data-level="11.9.5" data-path="supervised-learning.html"><a href="supervised-learning.html#naive-bayes-model"><i class="fa fa-check"></i><b>11.9.5</b> Naive Bayes Model</a></li>
<li class="chapter" data-level="11.9.6" data-path="supervised-learning.html"><a href="supervised-learning.html#model-comparison"><i class="fa fa-check"></i><b>11.9.6</b> Model Comparison</a></li>
<li class="chapter" data-level="11.9.7" data-path="supervised-learning.html"><a href="supervised-learning.html#predicting-using-the-best-model"><i class="fa fa-check"></i><b>11.9.7</b> Predicting using the best model</a></li>
</ul></li>
<li class="chapter" data-level="11.10" data-path="supervised-learning.html"><a href="supervised-learning.html#exercises-17"><i class="fa fa-check"></i><b>11.10</b> Exercises</a></li>
<li class="chapter" data-level="11.11" data-path="supervised-learning.html"><a href="supervised-learning.html#ethics-bias-in-algorithmic-decision-making"><i class="fa fa-check"></i><b>11.11</b> Ethics: Bias in Algorithmic Decision Making</a>
<ul>
<li class="chapter" data-level="11.11.1" data-path="supervised-learning.html"><a href="supervised-learning.html#the-risk-of-proxy-variables"><i class="fa fa-check"></i><b>11.11.1</b> The Risk of Proxy Variables</a></li>
<li class="chapter" data-level="11.11.2" data-path="supervised-learning.html"><a href="supervised-learning.html#feedback-loops"><i class="fa fa-check"></i><b>11.11.2</b> Feedback Loops</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html"><i class="fa fa-check"></i><b>12</b> Unsupervised Learning</a>
<ul>
<li class="chapter" data-level="12.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#learning-objectives-3"><i class="fa fa-check"></i><b>12.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="12.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#applications-of-unsupervised-learning"><i class="fa fa-check"></i><b>12.2</b> Applications of Unsupervised Learning</a></li>
<li class="chapter" data-level="12.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#k-means-clustering"><i class="fa fa-check"></i><b>12.3</b> K-Means Clustering</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-with-k-2"><i class="fa fa-check"></i><b>12.3.1</b> Clustering with k = 2</a></li>
<li class="chapter" data-level="12.3.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-with-k-3"><i class="fa fa-check"></i><b>12.3.2</b> Clustering with k &gt;= 3</a></li>
<li class="chapter" data-level="12.3.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#determination-of-optimal-clusters"><i class="fa fa-check"></i><b>12.3.3</b> Determination of Optimal Clusters</a></li>
<li class="chapter" data-level="12.3.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#k-means-for-more-than-2-variables"><i class="fa fa-check"></i><b>12.3.4</b> k-means for more than 2 variables</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#hierarchical-clustering"><i class="fa fa-check"></i><b>12.4</b> Hierarchical Clustering</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-with-two-variables"><i class="fa fa-check"></i><b>12.4.1</b> Clustering with two variables</a></li>
<li class="chapter" data-level="12.4.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#determination-of-optimal-clusters-1"><i class="fa fa-check"></i><b>12.4.2</b> Determination of Optimal Clusters</a></li>
<li class="chapter" data-level="12.4.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#obtain-the-grouping"><i class="fa fa-check"></i><b>12.4.3</b> Obtain the grouping</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#dimensionality-reduction"><i class="fa fa-check"></i><b>12.5</b> Dimensionality Reduction</a></li>
<li class="chapter" data-level="12.6" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#exercises-18"><i class="fa fa-check"></i><b>12.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html"><i class="fa fa-check"></i><b>13</b> String processing and text mining</a>
<ul>
<li class="chapter" data-level="13.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#basic-functions"><i class="fa fa-check"></i><b>13.1</b> Basic functions</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#replacing-characters"><i class="fa fa-check"></i><b>13.1.1</b> Replacing characters</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#regular-expressions"><i class="fa fa-check"></i><b>13.2</b> Regular expressions</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#alternation"><i class="fa fa-check"></i><b>13.2.1</b> Alternation</a></li>
<li class="chapter" data-level="13.2.2" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#anchoring"><i class="fa fa-check"></i><b>13.2.2</b> Anchoring</a></li>
<li class="chapter" data-level="13.2.3" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#repetitions"><i class="fa fa-check"></i><b>13.2.3</b> Repetitions</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#from-strings-to-dates"><i class="fa fa-check"></i><b>13.3</b> From strings to dates</a></li>
<li class="chapter" data-level="13.4" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#exercises-19"><i class="fa fa-check"></i><b>13.4</b> Exercises</a></li>
<li class="chapter" data-level="13.5" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#text-mining-using-tidy-data"><i class="fa fa-check"></i><b>13.5</b> Text Mining using Tidy Data</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#importing-data-and-tokenization"><i class="fa fa-check"></i><b>13.5.1</b> Importing data and Tokenization</a></li>
<li class="chapter" data-level="13.5.2" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#text-cleaning-and-tokenization"><i class="fa fa-check"></i><b>13.5.2</b> Text cleaning and Tokenization</a></li>
<li class="chapter" data-level="13.5.3" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#word-cloud"><i class="fa fa-check"></i><b>13.5.3</b> Word Cloud</a></li>
<li class="chapter" data-level="13.5.4" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#word-frequency-plot"><i class="fa fa-check"></i><b>13.5.4</b> Word Frequency Plot</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#sentiment-analysis"><i class="fa fa-check"></i><b>13.6</b> Sentiment Analysis</a></li>
<li class="chapter" data-level="13.7" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#exercises-20"><i class="fa fa-check"></i><b>13.7</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>VI Generative AI</b></span></li>
<li class="chapter" data-level="14" data-path="genai-intro.html"><a href="genai-intro.html"><i class="fa fa-check"></i><b>14</b> Data Science in the Age of AI</a>
<ul>
<li class="chapter" data-level="14.1" data-path="genai-intro.html"><a href="genai-intro.html#what-is-a-large-language-model"><i class="fa fa-check"></i><b>14.1</b> What is a Large Language Model?</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="genai-intro.html"><a href="genai-intro.html#its-all-about-probability"><i class="fa fa-check"></i><b>14.1.1</b> It’s all about Probability</a></li>
<li class="chapter" data-level="14.1.2" data-path="genai-intro.html"><a href="genai-intro.html#tokens-vs.-words"><i class="fa fa-check"></i><b>14.1.2</b> Tokens vs. Words</a></li>
<li class="chapter" data-level="14.1.3" data-path="genai-intro.html"><a href="genai-intro.html#temperature-controlling-creativity"><i class="fa fa-check"></i><b>14.1.3</b> Temperature: Controlling Creativity</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="genai-intro.html"><a href="genai-intro.html#setting-up-your-ai-environment"><i class="fa fa-check"></i><b>14.2</b> Setting Up Your AI Environment</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="genai-intro.html"><a href="genai-intro.html#the-solution-local-llms"><i class="fa fa-check"></i><b>14.2.1</b> The Solution: Local LLMs</a></li>
<li class="chapter" data-level="14.2.2" data-path="genai-intro.html"><a href="genai-intro.html#the-.renviron-file"><i class="fa fa-check"></i><b>14.2.2</b> The <code>.Renviron</code> File</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="genai-intro.html"><a href="genai-intro.html#ai-as-the-pair-programmer"><i class="fa fa-check"></i><b>14.3</b> AI as the “Pair Programmer”</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="genai-intro.html"><a href="genai-intro.html#the-great-refactorer"><i class="fa fa-check"></i><b>14.3.1</b> The Great Refactorer</a></li>
<li class="chapter" data-level="14.3.2" data-path="genai-intro.html"><a href="genai-intro.html#the-translator"><i class="fa fa-check"></i><b>14.3.2</b> The Translator</a></li>
<li class="chapter" data-level="14.3.3" data-path="genai-intro.html"><a href="genai-intro.html#pro-tip-prompt-engineering-101"><i class="fa fa-check"></i><b>14.3.3</b> Pro Tip: Prompt Engineering 101</a></li>
<li class="chapter" data-level="14.3.4" data-path="genai-intro.html"><a href="genai-intro.html#the-regex-master"><i class="fa fa-check"></i><b>14.3.4</b> The Regex Master</a></li>
<li class="chapter" data-level="14.3.5" data-path="genai-intro.html"><a href="genai-intro.html#the-error-decoder"><i class="fa fa-check"></i><b>14.3.5</b> The Error Decoder</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="genai-intro.html"><a href="genai-intro.html#the-risks-hallucinations"><i class="fa fa-check"></i><b>14.4</b> The Risks: Hallucinations</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="genai-intro.html"><a href="genai-intro.html#the-package-hallucination"><i class="fa fa-check"></i><b>14.4.1</b> The “Package” Hallucination</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="genai-intro.html"><a href="genai-intro.html#building-a-robust-request"><i class="fa fa-check"></i><b>14.5</b> Building a Robust Request</a></li>
<li class="chapter" data-level="14.6" data-path="genai-intro.html"><a href="genai-intro.html#the-holy-grail-structured-data-extraction"><i class="fa fa-check"></i><b>14.6</b> The Holy Grail: Structured Data extraction</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="genai-intro.html"><a href="genai-intro.html#forcing-json-output"><i class="fa fa-check"></i><b>14.6.1</b> Forcing JSON Output</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="genai-intro.html"><a href="genai-intro.html#batch-processing-the-purrr-workflow"><i class="fa fa-check"></i><b>14.7</b> Batch Processing: The <code>purrr</code> Workflow</a></li>
<li class="chapter" data-level="14.8" data-path="genai-intro.html"><a href="genai-intro.html#summary"><i class="fa fa-check"></i><b>14.8</b> Summary</a></li>
<li class="chapter" data-level="14.9" data-path="genai-intro.html"><a href="genai-intro.html#beyond-generation-embeddings"><i class="fa fa-check"></i><b>14.9</b> Beyond Generation: Embeddings</a>
<ul>
<li class="chapter" data-level="14.9.1" data-path="genai-intro.html"><a href="genai-intro.html#r-implementation"><i class="fa fa-check"></i><b>14.9.1</b> R Implementation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="genai-embeddings.html"><a href="genai-embeddings.html"><i class="fa fa-check"></i><b>15</b> Text Analysis with Embeddings</a>
<ul>
<li class="chapter" data-level="15.1" data-path="genai-embeddings.html"><a href="genai-embeddings.html#beyond-bag-of-words"><i class="fa fa-check"></i><b>15.1</b> Beyond Bag-of-Words</a></li>
<li class="chapter" data-level="15.2" data-path="genai-embeddings.html"><a href="genai-embeddings.html#what-is-an-embedding"><i class="fa fa-check"></i><b>15.2</b> What is an Embedding?</a></li>
<li class="chapter" data-level="15.3" data-path="genai-embeddings.html"><a href="genai-embeddings.html#getting-embeddings-in-r"><i class="fa fa-check"></i><b>15.3</b> Getting Embeddings in R</a></li>
<li class="chapter" data-level="15.4" data-path="genai-embeddings.html"><a href="genai-embeddings.html#visualizing-meaning-dimensionality-reduction"><i class="fa fa-check"></i><b>15.4</b> Visualizing Meaning (Dimensionality Reduction)</a></li>
<li class="chapter" data-level="15.5" data-path="genai-embeddings.html"><a href="genai-embeddings.html#building-a-semantic-search-engine"><i class="fa fa-check"></i><b>15.5</b> Building a Semantic Search Engine</a></li>
<li class="chapter" data-level="15.6" data-path="genai-embeddings.html"><a href="genai-embeddings.html#summary-the-ai-workflow"><i class="fa fa-check"></i><b>15.6</b> Summary: The AI Workflow</a></li>
</ul></li>
<li class="part"><span><b>VII Real Cases</b></span></li>
<li class="chapter" data-level="" data-path="introduction-3.html"><a href="introduction-3.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="16" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html"><i class="fa fa-check"></i><b>16</b> Case Study: Real Estate Market Analysis</a>
<ul>
<li class="chapter" data-level="16.1" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#objectives"><i class="fa fa-check"></i><b>16.1</b> Objectives</a></li>
<li class="chapter" data-level="16.2" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#loading-libraries"><i class="fa fa-check"></i><b>16.2</b> Loading Libraries</a></li>
<li class="chapter" data-level="16.3" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#exploring-the-data"><i class="fa fa-check"></i><b>16.3</b> Exploring the Data</a></li>
<li class="chapter" data-level="16.4" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#data-cleaning"><i class="fa fa-check"></i><b>16.4</b> Data Cleaning</a></li>
<li class="chapter" data-level="16.5" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#exploratory-analysis"><i class="fa fa-check"></i><b>16.5</b> Exploratory Analysis</a>
<ul>
<li class="chapter" data-level="16.5.1" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#market-volume-over-time"><i class="fa fa-check"></i><b>16.5.1</b> Market Volume Over Time</a></li>
<li class="chapter" data-level="16.5.2" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#comparing-cities"><i class="fa fa-check"></i><b>16.5.2</b> Comparing Cities</a></li>
</ul></li>
<li class="chapter" data-level="16.6" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#creating-indicators"><i class="fa fa-check"></i><b>16.6</b> Creating Indicators</a></li>
<li class="chapter" data-level="16.7" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#try-it-yourself"><i class="fa fa-check"></i><b>16.7</b> Try It Yourself</a></li>
<li class="chapter" data-level="16.8" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#conclusions"><i class="fa fa-check"></i><b>16.8</b> Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html"><i class="fa fa-check"></i><b>17</b> Google Analytics from R</a>
<ul>
<li class="chapter" data-level="17.1" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#problem"><i class="fa fa-check"></i><b>17.1</b> Problem</a></li>
<li class="chapter" data-level="17.2" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#access-to-data"><i class="fa fa-check"></i><b>17.2</b> Access to data</a></li>
<li class="chapter" data-level="17.3" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#visualization"><i class="fa fa-check"></i><b>17.3</b> Visualization</a></li>
<li class="chapter" data-level="17.4" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#conclusion"><i class="fa fa-check"></i><b>17.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="ethics-checklist.html"><a href="ethics-checklist.html"><i class="fa fa-check"></i><b>18</b> Appendix A: Responsible AI Checklist</a>
<ul>
<li class="chapter" data-level="18.1" data-path="ethics-checklist.html"><a href="ethics-checklist.html#data-quality-lineage"><i class="fa fa-check"></i><b>18.1</b> Data Quality &amp; Lineage</a></li>
<li class="chapter" data-level="18.2" data-path="ethics-checklist.html"><a href="ethics-checklist.html#fairness-bias"><i class="fa fa-check"></i><b>18.2</b> Fairness &amp; Bias</a></li>
<li class="chapter" data-level="18.3" data-path="ethics-checklist.html"><a href="ethics-checklist.html#transparency-explainability"><i class="fa fa-check"></i><b>18.3</b> Transparency &amp; Explainability</a></li>
<li class="chapter" data-level="18.4" data-path="ethics-checklist.html"><a href="ethics-checklist.html#reproducibility-integrity"><i class="fa fa-check"></i><b>18.4</b> Reproducibility &amp; Integrity</a></li>
<li class="chapter" data-level="18.5" data-path="ethics-checklist.html"><a href="ethics-checklist.html#genai-specifics"><i class="fa fa-check"></i><b>18.5</b> GenAI Specifics</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="r6-intro.html"><a href="r6-intro.html"><i class="fa fa-check"></i><b>19</b> Appendix B: Object Oriented Programming with R6</a>
<ul>
<li class="chapter" data-level="19.1" data-path="r6-intro.html"><a href="r6-intro.html#the-r6-package-classes-methods-encapsulation-and-inheritance"><i class="fa fa-check"></i><b>19.1</b> The R6 package: Classes, methods, encapsulation, and inheritance</a></li>
<li class="chapter" data-level="19.2" data-path="r6-intro.html"><a href="r6-intro.html#exercises-21"><i class="fa fa-check"></i><b>19.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-import-and-consolidation" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">Chapter 10</span> Data import and consolidation<a href="data-import-and-consolidation.html#data-import-and-consolidation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="importing-from-files" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Importing from files<a href="data-import-and-consolidation.html#importing-from-files" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For importing files, whether they are text types or spreadsheets, we need to know where we are going to import the data from.</p>
<div id="working-directory" class="section level3 hasAnchor" number="10.1.1">
<h3><span class="header-section-number">10.1.1</span> Working Directory<a href="data-import-and-consolidation.html#working-directory" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>By default, when we import files, R will search in the working directory. To find out the path of our working directory we will use the <code>getwd()</code> function.</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="data-import-and-consolidation.html#cb371-1" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb371-2"><a href="data-import-and-consolidation.html#cb371-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;c:/Documents/dparedesi/git-repository/DS&quot;</span></span></code></pre></div>
<p>This is the path where we can place our files to load them. If we want to load data from another folder we can change the working directory using <code>setwd()</code>.</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="data-import-and-consolidation.html#cb372-1" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;c:/Documents/Projects/R Files&quot;</span>)</span>
<span id="cb372-2"><a href="data-import-and-consolidation.html#cb372-2" tabindex="-1"></a></span>
<span id="cb372-3"><a href="data-import-and-consolidation.html#cb372-3" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb372-4"><a href="data-import-and-consolidation.html#cb372-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;c:/Documents/Projects/R Files&quot;</span></span></code></pre></div>
<blockquote>
<p><strong>Note</strong>: While <code>setwd()</code> works, it is generally discouraged in reproducible workflows because it creates absolute paths that break when code is shared or moved. Consider using <strong>RStudio Projects</strong> combined with the <code>here</code> package, which provides <code>here::here()</code> to construct relative paths that work across different systems.</p>
</blockquote>
<p>For practical purposes, we are going to use a file already available in one of the previously installed packages, <code>dslabs</code>, when we analyzed the danger level to decide which US state to travel to. To do this, we can use the <code>system.file()</code> function and determine the path where the <code>dslabs</code> package was installed.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="data-import-and-consolidation.html#cb373-1" tabindex="-1"></a>dslabs_path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="at">package=</span><span class="st">&quot;dslabs&quot;</span>)</span></code></pre></div>
<p>Likewise, we can list the files and folders within that path using the <code>list.files()</code> function.</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="data-import-and-consolidation.html#cb374-1" tabindex="-1"></a>dslabs_path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="at">package=</span><span class="st">&quot;dslabs&quot;</span>)</span>
<span id="cb374-2"><a href="data-import-and-consolidation.html#cb374-2" tabindex="-1"></a><span class="fu">list.files</span>(dslabs_path)</span>
<span id="cb374-3"><a href="data-import-and-consolidation.html#cb374-3" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;data&quot;        &quot;DESCRIPTION&quot; &quot;extdata&quot;     &quot;help&quot;        &quot;html&quot;       </span></span>
<span id="cb374-4"><a href="data-import-and-consolidation.html#cb374-4" tabindex="-1"></a><span class="co">#&gt;  [6] &quot;INDEX&quot;       &quot;Meta&quot;        &quot;NAMESPACE&quot;   &quot;R&quot;           &quot;script&quot;</span></span></code></pre></div>
<p>The folder we will use is <strong>extdata</strong>. We can access the path of this folder if we modify the parameters of the <code>system.file()</code> function.</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="data-import-and-consolidation.html#cb375-1" tabindex="-1"></a>dslabs_path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="at">package=</span><span class="st">&quot;dslabs&quot;</span>)</span>
<span id="cb375-2"><a href="data-import-and-consolidation.html#cb375-2" tabindex="-1"></a><span class="fu">list.files</span>(dslabs_path)</span>
<span id="cb375-3"><a href="data-import-and-consolidation.html#cb375-3" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;2010_bigfive_regents.xls&quot;                               </span></span>
<span id="cb375-4"><a href="data-import-and-consolidation.html#cb375-4" tabindex="-1"></a><span class="co">#&gt;  [2] &quot;calificaciones.csv&quot;                                     </span></span>
<span id="cb375-5"><a href="data-import-and-consolidation.html#cb375-5" tabindex="-1"></a><span class="co">#&gt;  [3] &quot;carbon_emissions.csv&quot;                                   </span></span>
<span id="cb375-6"><a href="data-import-and-consolidation.html#cb375-6" tabindex="-1"></a><span class="co">#&gt;  [4] &quot;fertility-two-countries-example.csv&quot;                    </span></span>
<span id="cb375-7"><a href="data-import-and-consolidation.html#cb375-7" tabindex="-1"></a><span class="co">#&gt;  [5] &quot;HRlist2.txt&quot;                                            </span></span>
<span id="cb375-8"><a href="data-import-and-consolidation.html#cb375-8" tabindex="-1"></a><span class="co">#&gt;  [6] &quot;life-expectancy-and-fertility-two-countries-example.csv&quot;</span></span>
<span id="cb375-9"><a href="data-import-and-consolidation.html#cb375-9" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;murders.csv&quot;                                            </span></span>
<span id="cb375-10"><a href="data-import-and-consolidation.html#cb375-10" tabindex="-1"></a><span class="co">#&gt;  [8] &quot;olive.csv&quot;                                              </span></span>
<span id="cb375-11"><a href="data-import-and-consolidation.html#cb375-11" tabindex="-1"></a><span class="co">#&gt;  [9] &quot;RD-Mortality-Report_2015-18-180531.pdf&quot;                 </span></span>
<span id="cb375-12"><a href="data-import-and-consolidation.html#cb375-12" tabindex="-1"></a><span class="co">#&gt; [10] &quot;ssa-death-probability.csv&quot;</span></span></code></pre></div>
<p>The file we will use is <strong>murders.csv</strong>. To build the complete path of this file we can concatenate the strings or we can also directly use the <code>file.path(path, file_name)</code> function.</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="data-import-and-consolidation.html#cb376-1" tabindex="-1"></a>csv_example_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dslabs_path, <span class="st">&quot;murders.csv&quot;</span>)</span></code></pre></div>
<p>Finally, we will copy the file to our working directory with the <code>file.copy(source_path, destination_path)</code> function.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="data-import-and-consolidation.html#cb377-1" tabindex="-1"></a><span class="fu">file.copy</span>(csv_example_path, <span class="fu">getwd</span>())</span>
<span id="cb377-2"><a href="data-import-and-consolidation.html#cb377-2" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>We can validate the copy with the <code>file.exists(file_name)</code> function.</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="data-import-and-consolidation.html#cb378-1" tabindex="-1"></a><span class="fu">file.exists</span>(<span class="st">&quot;murders.csv&quot;</span>)</span>
<span id="cb378-2"><a href="data-import-and-consolidation.html#cb378-2" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>It is recommended to check the documentation of the file manipulation functions.</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="data-import-and-consolidation.html#cb379-1" tabindex="-1"></a>?files</span></code></pre></div>
</div>
<div id="readr-and-readxl-packages" class="section level3 hasAnchor" number="10.1.2">
<h3><span class="header-section-number">10.1.2</span> readr and readxl packages<a href="data-import-and-consolidation.html#readr-and-readxl-packages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now that we have the file in our working directory, we will use functions within the <strong>readr</strong> and <strong>readxl</strong> packages to import files into R. Both are included in the <strong>tidyverse</strong> package that we previously installed.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="data-import-and-consolidation.html#cb380-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># Here readr is included automatically</span></span>
<span id="cb380-2"><a href="data-import-and-consolidation.html#cb380-2" tabindex="-1"></a><span class="fu">library</span>(readxl)</span></code></pre></div>
<p>The functions we will use the most will be <code>read_csv()</code> and <code>read_excel()</code>. The latter supports .xls and .xlsx extensions.</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="data-import-and-consolidation.html#cb381-1" tabindex="-1"></a>data_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;murders.csv&quot;</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb381-2"><a href="data-import-and-consolidation.html#cb381-2" tabindex="-1"></a></span>
<span id="cb381-3"><a href="data-import-and-consolidation.html#cb381-3" tabindex="-1"></a><span class="co"># Once imported we can remove the file if we wish</span></span>
<span id="cb381-4"><a href="data-import-and-consolidation.html#cb381-4" tabindex="-1"></a><span class="fu">file.remove</span>(<span class="st">&quot;murders.csv&quot;</span>)</span>
<span id="cb381-5"><a href="data-import-and-consolidation.html#cb381-5" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>We see how by default it detects the headers in the first row and assigns them a default data type. Let’s now explore our <code>data_df</code> object.</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="data-import-and-consolidation.html#cb382-1" tabindex="-1"></a>data_df</span>
<span id="cb382-2"><a href="data-import-and-consolidation.html#cb382-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 51 × 5</span></span>
<span id="cb382-3"><a href="data-import-and-consolidation.html#cb382-3" tabindex="-1"></a><span class="co">#&gt;    state                abb   region    population total</span></span>
<span id="cb382-4"><a href="data-import-and-consolidation.html#cb382-4" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb382-5"><a href="data-import-and-consolidation.html#cb382-5" tabindex="-1"></a><span class="co">#&gt;  1 Alabama              AL    South        4779736   135</span></span>
<span id="cb382-6"><a href="data-import-and-consolidation.html#cb382-6" tabindex="-1"></a><span class="co">#&gt;  2 Alaska               AK    West          710231    19</span></span>
<span id="cb382-7"><a href="data-import-and-consolidation.html#cb382-7" tabindex="-1"></a><span class="co">#&gt;  3 Arizona              AZ    West         6392017   232</span></span>
<span id="cb382-8"><a href="data-import-and-consolidation.html#cb382-8" tabindex="-1"></a><span class="co">#&gt;  4 Arkansas             AR    South        2915918    93</span></span>
<span id="cb382-9"><a href="data-import-and-consolidation.html#cb382-9" tabindex="-1"></a><span class="co">#&gt;  5 California           CA    West        37253956  1257</span></span>
<span id="cb382-10"><a href="data-import-and-consolidation.html#cb382-10" tabindex="-1"></a><span class="co">#&gt;  6 Colorado             CO    West         5029196    65</span></span>
<span id="cb382-11"><a href="data-import-and-consolidation.html#cb382-11" tabindex="-1"></a><span class="co">#&gt;  7 Connecticut          CT    Northeast    3574097    97</span></span>
<span id="cb382-12"><a href="data-import-and-consolidation.html#cb382-12" tabindex="-1"></a><span class="co">#&gt;  8 Delaware             DE    South         897934    38</span></span>
<span id="cb382-13"><a href="data-import-and-consolidation.html#cb382-13" tabindex="-1"></a><span class="co">#&gt;  9 District of Columbia DC    South         601723    99</span></span>
<span id="cb382-14"><a href="data-import-and-consolidation.html#cb382-14" tabindex="-1"></a><span class="co">#&gt; 10 Florida              FL    South       19687653   669</span></span>
<span id="cb382-15"><a href="data-import-and-consolidation.html#cb382-15" tabindex="-1"></a><span class="co">#&gt; # ℹ 41 more rows</span></span></code></pre></div>
<p>The first thing it indicates is that the object is of type <strong>tibble</strong>. This object is very similar to a data frame, but with improved features such as, for example, the number of rows and columns in the console, the data type under the header, the default report of only the first 10 records automatically, among many others that we will discover in this chapter.</p>
<p>The same syntax and logic would apply for importing an excel file. In this case we are importing directly from the package path and not from our working directory.</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="data-import-and-consolidation.html#cb383-1" tabindex="-1"></a>excel_example_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dslabs_path, <span class="st">&quot;2010_bigfive_regents.xls&quot;</span>)</span>
<span id="cb383-2"><a href="data-import-and-consolidation.html#cb383-2" tabindex="-1"></a>data_df_from_excel <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(excel_example_path)</span></code></pre></div>
<p><strong>readr</strong> gives us 7 different types of functions for importing flat files:</p>
<p>The <code>readr</code> package provides a versatile suite of functions for importing flat files, each tailored to a specific delimiter or format. The most common is <strong><code>read_csv()</code></strong>, designed for comma-separated values. For tab-separated files, we use <strong><code>read_tsv()</code></strong>, while <strong><code>read_delim()</code></strong> offers a general-purpose solution for files with custom delimiters (like semicolons or pipes). Other specialized functions include <strong><code>read_fwf()</code></strong> for fixed-width files, <strong><code>read_table()</code></strong> for whitespace-separated columns, and <strong><code>read_log()</code></strong> for parsing standard web server logs.</p>
<blockquote>
<p><strong>Tip</strong>: For files that use semicolons as delimiters (common in European locales), use <code>read_csv2()</code> or <code>read_delim()</code> with <code>delim = ";"</code>. Also, if you encounter import issues, use <code>problems(data_df)</code> after importing to diagnose parsing errors.</p>
</blockquote>
<blockquote>
<p>[!TIP]
<strong>Clean Column Names</strong>: Interpreted data often has column names with spaces or capital letters (e.g., “Customer ID”). We highly recommend piping your data into <code>janitor::clean_names()</code> immediately after reading it to standardize everything to <code>snake_case</code> (e.g., “customer_id”).</p>
</blockquote>
</div>
<div id="importing-files-from-the-internet" class="section level3 hasAnchor" number="10.1.3">
<h3><span class="header-section-number">10.1.3</span> Importing files from the internet<a href="data-import-and-consolidation.html#importing-files-from-the-internet" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We have seen how we can enter the full path to load a file directly from another source different from our working directory. In the same way, if we have a file in an internet path we can pass it directly to R since <code>read_csv()</code> and the other <strong>readr</strong> import functions support URL input as a parameter.</p>
<p>Here we see the import of grades from students of the Data Science with R course.</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="data-import-and-consolidation.html#cb384-1" tabindex="-1"></a><span class="do">##### Example 1:</span></span>
<span id="cb384-2"><a href="data-import-and-consolidation.html#cb384-2" tabindex="-1"></a><span class="co"># Historical grades data</span></span>
<span id="cb384-3"><a href="data-import-and-consolidation.html#cb384-3" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://dparedesi.github.io/Data-Science-with-R-book/data/student-grades.csv&quot;</span></span>
<span id="cb384-4"><a href="data-import-and-consolidation.html#cb384-4" tabindex="-1"></a>grades <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="data-import-and-consolidation.html#cb385-1" tabindex="-1"></a>grades <span class="ot">&lt;-</span> grades <span class="sc">|&gt;</span></span>
<span id="cb385-2"><a href="data-import-and-consolidation.html#cb385-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total =</span> (P1 <span class="sc">+</span> P2 <span class="sc">+</span> P3 <span class="sc">+</span> P4 <span class="sc">+</span> P5 <span class="sc">+</span> P6)<span class="sc">/</span><span class="dv">30</span><span class="sc">*</span><span class="dv">20</span>)</span>
<span id="cb385-3"><a href="data-import-and-consolidation.html#cb385-3" tabindex="-1"></a></span>
<span id="cb385-4"><a href="data-import-and-consolidation.html#cb385-4" tabindex="-1"></a>grades <span class="sc">|&gt;</span> </span>
<span id="cb385-5"><a href="data-import-and-consolidation.html#cb385-5" tabindex="-1"></a>  <span class="fu">select</span>(P1, P2, P3, P4, P5, total) <span class="sc">|&gt;</span> </span>
<span id="cb385-6"><a href="data-import-and-consolidation.html#cb385-6" tabindex="-1"></a>  <span class="fu">summary</span>()</span>
<span id="cb385-7"><a href="data-import-and-consolidation.html#cb385-7" tabindex="-1"></a><span class="co">#&gt;        P1              P2             P3              P4              P5       </span></span>
<span id="cb385-8"><a href="data-import-and-consolidation.html#cb385-8" tabindex="-1"></a><span class="co">#&gt;  Min.   :1.000   Min.   :1.00   Min.   :4.000   Min.   :1.000   Min.   :1.000  </span></span>
<span id="cb385-9"><a href="data-import-and-consolidation.html#cb385-9" tabindex="-1"></a><span class="co">#&gt;  1st Qu.:3.000   1st Qu.:4.00   1st Qu.:5.000   1st Qu.:5.000   1st Qu.:5.000  </span></span>
<span id="cb385-10"><a href="data-import-and-consolidation.html#cb385-10" tabindex="-1"></a><span class="co">#&gt;  Median :4.000   Median :5.00   Median :5.000   Median :5.000   Median :5.000  </span></span>
<span id="cb385-11"><a href="data-import-and-consolidation.html#cb385-11" tabindex="-1"></a><span class="co">#&gt;  Mean   :3.762   Mean   :4.19   Mean   :4.905   Mean   :4.571   Mean   :4.429  </span></span>
<span id="cb385-12"><a href="data-import-and-consolidation.html#cb385-12" tabindex="-1"></a><span class="co">#&gt;  3rd Qu.:5.000   3rd Qu.:5.00   3rd Qu.:5.000   3rd Qu.:5.000   3rd Qu.:5.000  </span></span>
<span id="cb385-13"><a href="data-import-and-consolidation.html#cb385-13" tabindex="-1"></a><span class="co">#&gt;  Max.   :5.000   Max.   :5.00   Max.   :5.000   Max.   :5.000   Max.   :5.000  </span></span>
<span id="cb385-14"><a href="data-import-and-consolidation.html#cb385-14" tabindex="-1"></a><span class="co">#&gt;      total      </span></span>
<span id="cb385-15"><a href="data-import-and-consolidation.html#cb385-15" tabindex="-1"></a><span class="co">#&gt;  Min.   :10.67  </span></span>
<span id="cb385-16"><a href="data-import-and-consolidation.html#cb385-16" tabindex="-1"></a><span class="co">#&gt;  1st Qu.:16.67  </span></span>
<span id="cb385-17"><a href="data-import-and-consolidation.html#cb385-17" tabindex="-1"></a><span class="co">#&gt;  Median :18.67  </span></span>
<span id="cb385-18"><a href="data-import-and-consolidation.html#cb385-18" tabindex="-1"></a><span class="co">#&gt;  Mean   :17.43  </span></span>
<span id="cb385-19"><a href="data-import-and-consolidation.html#cb385-19" tabindex="-1"></a><span class="co">#&gt;  3rd Qu.:19.33  </span></span>
<span id="cb385-20"><a href="data-import-and-consolidation.html#cb385-20" tabindex="-1"></a><span class="co">#&gt;  Max.   :20.00</span></span></code></pre></div>
<p>From this we could visualize a histogram:</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="data-import-and-consolidation.html#cb386-1" tabindex="-1"></a><span class="fu">hist</span>(grades<span class="sc">$</span>total)</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-510-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>Or we could compare between genders which one has the highest median:</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="data-import-and-consolidation.html#cb387-1" tabindex="-1"></a>grades <span class="sc">|&gt;</span></span>
<span id="cb387-2"><a href="data-import-and-consolidation.html#cb387-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb387-3"><a href="data-import-and-consolidation.html#cb387-3" tabindex="-1"></a>  <span class="fu">aes</span>(gender, total) <span class="sc">+</span></span>
<span id="cb387-4"><a href="data-import-and-consolidation.html#cb387-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span>
<span id="cb387-5"><a href="data-import-and-consolidation.html#cb387-5" tabindex="-1"></a>  </span></code></pre></div>
<p>We could also extract updated Covid-19 information.</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="data-import-and-consolidation.html#cb388-1" tabindex="-1"></a><span class="do">##### Example 2:</span></span>
<span id="cb388-2"><a href="data-import-and-consolidation.html#cb388-2" tabindex="-1"></a><span class="co"># Covid-19 Data</span></span>
<span id="cb388-3"><a href="data-import-and-consolidation.html#cb388-3" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://covid.ourworldindata.org/data/owid-covid-data.csv&quot;</span></span>
<span id="cb388-4"><a href="data-import-and-consolidation.html#cb388-4" tabindex="-1"></a>internet_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb388-5"><a href="data-import-and-consolidation.html#cb388-5" tabindex="-1"></a></span>
<span id="cb388-6"><a href="data-import-and-consolidation.html#cb388-6" tabindex="-1"></a>internet_data <span class="sc">|&gt;</span> </span>
<span id="cb388-7"><a href="data-import-and-consolidation.html#cb388-7" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(date)) <span class="sc">|&gt;</span> </span>
<span id="cb388-8"><a href="data-import-and-consolidation.html#cb388-8" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
</div>
</div>
<div id="tidy-data" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> Tidy data<a href="data-import-and-consolidation.html#tidy-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ordered data or <em>tidy data</em> are those obtained from a process called <em>data tidying</em>. It is one of the important cleaning processes during processing of large data or ‘big data’ and is a very used step in Data Science. The main characteristics are that each different observation of that variable has to be in a different row and that each variable you measure has to be in a column <span class="citation">(<a href="#ref-leek2015">Leek 2015</a>)</span>.</p>
<p>As we may have noticed, we have been using <em>tidy data</em> since the first chapters. However, not all our data comes ordered. Most of it comes in what we call wide data or <em>wide data</em>.</p>
<p>For example, we have previously used data from Gapminder. Let’s filter the data from Germany and South Korea to remember how we had our data.</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="data-import-and-consolidation.html#cb389-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb389-2"><a href="data-import-and-consolidation.html#cb389-2" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;South Korea&quot;</span>, <span class="st">&quot;Germany&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb389-3"><a href="data-import-and-consolidation.html#cb389-3" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb389-4"><a href="data-import-and-consolidation.html#cb389-4" tabindex="-1"></a><span class="co">#&gt;        country year infant_mortality life_expectancy fertility population</span></span>
<span id="cb389-5"><a href="data-import-and-consolidation.html#cb389-5" tabindex="-1"></a><span class="co">#&gt; 1      Germany 1960             34.0           69.26      2.41   73179665</span></span>
<span id="cb389-6"><a href="data-import-and-consolidation.html#cb389-6" tabindex="-1"></a><span class="co">#&gt; 2  South Korea 1960             80.2           53.02      6.16   25074028</span></span>
<span id="cb389-7"><a href="data-import-and-consolidation.html#cb389-7" tabindex="-1"></a><span class="co">#&gt; 3      Germany 1961               NA           69.85      2.44   73686490</span></span>
<span id="cb389-8"><a href="data-import-and-consolidation.html#cb389-8" tabindex="-1"></a><span class="co">#&gt; 4  South Korea 1961             76.1           53.75      5.99   25808542</span></span>
<span id="cb389-9"><a href="data-import-and-consolidation.html#cb389-9" tabindex="-1"></a><span class="co">#&gt; 5      Germany 1962               NA           70.01      2.47   74238494</span></span>
<span id="cb389-10"><a href="data-import-and-consolidation.html#cb389-10" tabindex="-1"></a><span class="co">#&gt; 6  South Korea 1962             72.4           54.51      5.79   26495107</span></span>
<span id="cb389-11"><a href="data-import-and-consolidation.html#cb389-11" tabindex="-1"></a><span class="co">#&gt; 7      Germany 1963               NA           70.10      2.49   74820389</span></span>
<span id="cb389-12"><a href="data-import-and-consolidation.html#cb389-12" tabindex="-1"></a><span class="co">#&gt; 8  South Korea 1963             68.8           55.27      5.57   27143075</span></span>
<span id="cb389-13"><a href="data-import-and-consolidation.html#cb389-13" tabindex="-1"></a><span class="co">#&gt; 9      Germany 1964               NA           70.66      2.49   75410766</span></span>
<span id="cb389-14"><a href="data-import-and-consolidation.html#cb389-14" tabindex="-1"></a><span class="co">#&gt; 10 South Korea 1964             65.3           56.04      5.36   27770874</span></span>
<span id="cb389-15"><a href="data-import-and-consolidation.html#cb389-15" tabindex="-1"></a><span class="co">#&gt;            gdp continent         region</span></span>
<span id="cb389-16"><a href="data-import-and-consolidation.html#cb389-16" tabindex="-1"></a><span class="co">#&gt; 1           NA    Europe Western Europe</span></span>
<span id="cb389-17"><a href="data-import-and-consolidation.html#cb389-17" tabindex="-1"></a><span class="co">#&gt; 2  28928298962      Asia   Eastern Asia</span></span>
<span id="cb389-18"><a href="data-import-and-consolidation.html#cb389-18" tabindex="-1"></a><span class="co">#&gt; 3           NA    Europe Western Europe</span></span>
<span id="cb389-19"><a href="data-import-and-consolidation.html#cb389-19" tabindex="-1"></a><span class="co">#&gt; 4  30356298714      Asia   Eastern Asia</span></span>
<span id="cb389-20"><a href="data-import-and-consolidation.html#cb389-20" tabindex="-1"></a><span class="co">#&gt; 5           NA    Europe Western Europe</span></span>
<span id="cb389-21"><a href="data-import-and-consolidation.html#cb389-21" tabindex="-1"></a><span class="co">#&gt; 6  31102566019      Asia   Eastern Asia</span></span>
<span id="cb389-22"><a href="data-import-and-consolidation.html#cb389-22" tabindex="-1"></a><span class="co">#&gt; 7           NA    Europe Western Europe</span></span>
<span id="cb389-23"><a href="data-import-and-consolidation.html#cb389-23" tabindex="-1"></a><span class="co">#&gt; 8  34067175844      Asia   Eastern Asia</span></span>
<span id="cb389-24"><a href="data-import-and-consolidation.html#cb389-24" tabindex="-1"></a><span class="co">#&gt; 9           NA    Europe Western Europe</span></span>
<span id="cb389-25"><a href="data-import-and-consolidation.html#cb389-25" tabindex="-1"></a><span class="co">#&gt; 10 36643076469      Asia   Eastern Asia</span></span></code></pre></div>
<p>We notice that each row is an observation and each column represents a variable. It is ordered data, <em>tidy data</em>. On the other hand, we can see what the data was like for these two countries if we access the source in the <code>dslabs</code> package.</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="data-import-and-consolidation.html#cb390-1" tabindex="-1"></a>fertility_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dslabs_path, <span class="st">&quot;fertility-two-countries-example.csv&quot;</span>)</span>
<span id="cb390-2"><a href="data-import-and-consolidation.html#cb390-2" tabindex="-1"></a></span>
<span id="cb390-3"><a href="data-import-and-consolidation.html#cb390-3" tabindex="-1"></a>wide_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(fertility_path, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb390-4"><a href="data-import-and-consolidation.html#cb390-4" tabindex="-1"></a></span>
<span id="cb390-5"><a href="data-import-and-consolidation.html#cb390-5" tabindex="-1"></a>wide_data</span>
<span id="cb390-6"><a href="data-import-and-consolidation.html#cb390-6" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 57</span></span>
<span id="cb390-7"><a href="data-import-and-consolidation.html#cb390-7" tabindex="-1"></a><span class="co">#&gt;   country  `1960` `1961` `1962` `1963` `1964` `1965` `1966` `1967` `1968` `1969`</span></span>
<span id="cb390-8"><a href="data-import-and-consolidation.html#cb390-8" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb390-9"><a href="data-import-and-consolidation.html#cb390-9" tabindex="-1"></a><span class="co">#&gt; 1 Germany    2.41   2.44   2.47   2.49   2.49   2.48   2.44   2.37   2.28   2.17</span></span>
<span id="cb390-10"><a href="data-import-and-consolidation.html#cb390-10" tabindex="-1"></a><span class="co">#&gt; 2 South K…   6.16   5.99   5.79   5.57   5.36   5.16   4.99   4.85   4.73   4.62</span></span>
<span id="cb390-11"><a href="data-import-and-consolidation.html#cb390-11" tabindex="-1"></a><span class="co">#&gt; # ℹ 46 more variables: `1970` &lt;dbl&gt;, `1971` &lt;dbl&gt;, `1972` &lt;dbl&gt;, `1973` &lt;dbl&gt;,</span></span>
<span id="cb390-12"><a href="data-import-and-consolidation.html#cb390-12" tabindex="-1"></a><span class="co">#&gt; #   `1974` &lt;dbl&gt;, `1975` &lt;dbl&gt;, `1976` &lt;dbl&gt;, `1977` &lt;dbl&gt;, `1978` &lt;dbl&gt;,</span></span>
<span id="cb390-13"><a href="data-import-and-consolidation.html#cb390-13" tabindex="-1"></a><span class="co">#&gt; #   `1979` &lt;dbl&gt;, `1980` &lt;dbl&gt;, `1981` &lt;dbl&gt;, `1982` &lt;dbl&gt;, `1983` &lt;dbl&gt;,</span></span>
<span id="cb390-14"><a href="data-import-and-consolidation.html#cb390-14" tabindex="-1"></a><span class="co">#&gt; #   `1984` &lt;dbl&gt;, `1985` &lt;dbl&gt;, `1986` &lt;dbl&gt;, `1987` &lt;dbl&gt;, `1988` &lt;dbl&gt;,</span></span>
<span id="cb390-15"><a href="data-import-and-consolidation.html#cb390-15" tabindex="-1"></a><span class="co">#&gt; #   `1989` &lt;dbl&gt;, `1990` &lt;dbl&gt;, `1991` &lt;dbl&gt;, `1992` &lt;dbl&gt;, `1993` &lt;dbl&gt;,</span></span>
<span id="cb390-16"><a href="data-import-and-consolidation.html#cb390-16" tabindex="-1"></a><span class="co">#&gt; #   `1994` &lt;dbl&gt;, `1995` &lt;dbl&gt;, `1996` &lt;dbl&gt;, `1997` &lt;dbl&gt;, `1998` &lt;dbl&gt;,</span></span>
<span id="cb390-17"><a href="data-import-and-consolidation.html#cb390-17" tabindex="-1"></a><span class="co">#&gt; #   `1999` &lt;dbl&gt;, `2000` &lt;dbl&gt;, `2001` &lt;dbl&gt;, `2002` &lt;dbl&gt;, `2003` &lt;dbl&gt;, …</span></span></code></pre></div>
<p>We see that the original data had two rows, one per country and then each column represented a year. This is what we call wide data or <em>wide data</em>. Normally we will have <em>wide data</em> that we first have to convert to <em>tidy data</em> to later be able to perform our analyses.</p>
<div id="transforming-to-tidy-data" class="section level3 hasAnchor" number="10.2.1">
<h3><span class="header-section-number">10.2.1</span> Transforming to tidy data<a href="data-import-and-consolidation.html#transforming-to-tidy-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>tidyverse</code> library provides two functions to reshape data between <em>wide</em> and <em>long</em> (tidy) formats. We use <code>pivot_longer()</code> to convert from <em>wide data</em> to <em>tidy data</em> and <code>pivot_wider()</code> to convert from <em>tidy data</em> to <em>wide data</em>.</p>
<div id="pivot_longer-function" class="section level4 hasAnchor" number="10.2.1.1">
<h4><span class="header-section-number">10.2.1.1</span> pivot_longer function<a href="data-import-and-consolidation.html#pivot_longer-function" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let’s see the utility with the <code>wide_data</code> object that we created in the previous section as a result of importing data from the csv. First apply the <code>pivot_longer()</code> function to explore the conversion that is performed by default.</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="data-import-and-consolidation.html#cb391-1" tabindex="-1"></a>tidy_data <span class="ot">&lt;-</span> wide_data <span class="sc">|&gt;</span></span>
<span id="cb391-2"><a href="data-import-and-consolidation.html#cb391-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>country, <span class="at">names_to =</span> <span class="st">&quot;key&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>)</span>
<span id="cb391-3"><a href="data-import-and-consolidation.html#cb391-3" tabindex="-1"></a></span>
<span id="cb391-4"><a href="data-import-and-consolidation.html#cb391-4" tabindex="-1"></a>tidy_data</span>
<span id="cb391-5"><a href="data-import-and-consolidation.html#cb391-5" tabindex="-1"></a><span class="co">#&gt; # A tibble: 112 × 3</span></span>
<span id="cb391-6"><a href="data-import-and-consolidation.html#cb391-6" tabindex="-1"></a><span class="co">#&gt;    country key   value</span></span>
<span id="cb391-7"><a href="data-import-and-consolidation.html#cb391-7" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;</span></span>
<span id="cb391-8"><a href="data-import-and-consolidation.html#cb391-8" tabindex="-1"></a><span class="co">#&gt;  1 Germany 1960   2.41</span></span>
<span id="cb391-9"><a href="data-import-and-consolidation.html#cb391-9" tabindex="-1"></a><span class="co">#&gt;  2 Germany 1961   2.44</span></span>
<span id="cb391-10"><a href="data-import-and-consolidation.html#cb391-10" tabindex="-1"></a><span class="co">#&gt;  3 Germany 1962   2.47</span></span>
<span id="cb391-11"><a href="data-import-and-consolidation.html#cb391-11" tabindex="-1"></a><span class="co">#&gt;  4 Germany 1963   2.49</span></span>
<span id="cb391-12"><a href="data-import-and-consolidation.html#cb391-12" tabindex="-1"></a><span class="co">#&gt;  5 Germany 1964   2.49</span></span>
<span id="cb391-13"><a href="data-import-and-consolidation.html#cb391-13" tabindex="-1"></a><span class="co">#&gt;  6 Germany 1965   2.48</span></span>
<span id="cb391-14"><a href="data-import-and-consolidation.html#cb391-14" tabindex="-1"></a><span class="co">#&gt;  7 Germany 1966   2.44</span></span>
<span id="cb391-15"><a href="data-import-and-consolidation.html#cb391-15" tabindex="-1"></a><span class="co">#&gt;  8 Germany 1967   2.37</span></span>
<span id="cb391-16"><a href="data-import-and-consolidation.html#cb391-16" tabindex="-1"></a><span class="co">#&gt;  9 Germany 1968   2.28</span></span>
<span id="cb391-17"><a href="data-import-and-consolidation.html#cb391-17" tabindex="-1"></a><span class="co">#&gt; 10 Germany 1969   2.17</span></span>
<span id="cb391-18"><a href="data-import-and-consolidation.html#cb391-18" tabindex="-1"></a><span class="co">#&gt; # ℹ 102 more rows</span></span></code></pre></div>
<p>We see how the <code>pivot_longer()</code> function has collected the columns into two, the names column (“key”) and the values column (“value”). We can change the title of these new columns, for example “year” and “fertility”.</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="data-import-and-consolidation.html#cb392-1" tabindex="-1"></a>tidy_data <span class="ot">&lt;-</span> wide_data <span class="sc">|&gt;</span></span>
<span id="cb392-2"><a href="data-import-and-consolidation.html#cb392-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>country, <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;fertility&quot;</span>)</span>
<span id="cb392-3"><a href="data-import-and-consolidation.html#cb392-3" tabindex="-1"></a></span>
<span id="cb392-4"><a href="data-import-and-consolidation.html#cb392-4" tabindex="-1"></a>tidy_data</span>
<span id="cb392-5"><a href="data-import-and-consolidation.html#cb392-5" tabindex="-1"></a><span class="co">#&gt; # A tibble: 112 × 3</span></span>
<span id="cb392-6"><a href="data-import-and-consolidation.html#cb392-6" tabindex="-1"></a><span class="co">#&gt;    country year  fertility</span></span>
<span id="cb392-7"><a href="data-import-and-consolidation.html#cb392-7" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;</span></span>
<span id="cb392-8"><a href="data-import-and-consolidation.html#cb392-8" tabindex="-1"></a><span class="co">#&gt;  1 Germany 1960       2.41</span></span>
<span id="cb392-9"><a href="data-import-and-consolidation.html#cb392-9" tabindex="-1"></a><span class="co">#&gt;  2 Germany 1961       2.44</span></span>
<span id="cb392-10"><a href="data-import-and-consolidation.html#cb392-10" tabindex="-1"></a><span class="co">#&gt;  3 Germany 1962       2.47</span></span>
<span id="cb392-11"><a href="data-import-and-consolidation.html#cb392-11" tabindex="-1"></a><span class="co">#&gt;  4 Germany 1963       2.49</span></span>
<span id="cb392-12"><a href="data-import-and-consolidation.html#cb392-12" tabindex="-1"></a><span class="co">#&gt;  5 Germany 1964       2.49</span></span>
<span id="cb392-13"><a href="data-import-and-consolidation.html#cb392-13" tabindex="-1"></a><span class="co">#&gt;  6 Germany 1965       2.48</span></span>
<span id="cb392-14"><a href="data-import-and-consolidation.html#cb392-14" tabindex="-1"></a><span class="co">#&gt;  7 Germany 1966       2.44</span></span>
<span id="cb392-15"><a href="data-import-and-consolidation.html#cb392-15" tabindex="-1"></a><span class="co">#&gt;  8 Germany 1967       2.37</span></span>
<span id="cb392-16"><a href="data-import-and-consolidation.html#cb392-16" tabindex="-1"></a><span class="co">#&gt;  9 Germany 1968       2.28</span></span>
<span id="cb392-17"><a href="data-import-and-consolidation.html#cb392-17" tabindex="-1"></a><span class="co">#&gt; 10 Germany 1969       2.17</span></span>
<span id="cb392-18"><a href="data-import-and-consolidation.html#cb392-18" tabindex="-1"></a><span class="co">#&gt; # ℹ 102 more rows</span></span></code></pre></div>
<p>We use <code>cols = -country</code> to exclude the country column from being pivoted. By default the column names are collected as text. To convert them to numbers we use the <code>names_transform</code> argument.</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="data-import-and-consolidation.html#cb393-1" tabindex="-1"></a>tidy_data <span class="ot">&lt;-</span> wide_data <span class="sc">|&gt;</span></span>
<span id="cb393-2"><a href="data-import-and-consolidation.html#cb393-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>country, <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;fertility&quot;</span>,</span>
<span id="cb393-3"><a href="data-import-and-consolidation.html#cb393-3" tabindex="-1"></a>               <span class="at">names_transform =</span> <span class="fu">list</span>(<span class="at">year =</span> as.integer))</span>
<span id="cb393-4"><a href="data-import-and-consolidation.html#cb393-4" tabindex="-1"></a></span>
<span id="cb393-5"><a href="data-import-and-consolidation.html#cb393-5" tabindex="-1"></a>tidy_data</span>
<span id="cb393-6"><a href="data-import-and-consolidation.html#cb393-6" tabindex="-1"></a><span class="co">#&gt; # A tibble: 112 × 3</span></span>
<span id="cb393-7"><a href="data-import-and-consolidation.html#cb393-7" tabindex="-1"></a><span class="co">#&gt;    country  year fertility</span></span>
<span id="cb393-8"><a href="data-import-and-consolidation.html#cb393-8" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb393-9"><a href="data-import-and-consolidation.html#cb393-9" tabindex="-1"></a><span class="co">#&gt;  1 Germany  1960      2.41</span></span>
<span id="cb393-10"><a href="data-import-and-consolidation.html#cb393-10" tabindex="-1"></a><span class="co">#&gt;  2 Germany  1961      2.44</span></span>
<span id="cb393-11"><a href="data-import-and-consolidation.html#cb393-11" tabindex="-1"></a><span class="co">#&gt;  3 Germany  1962      2.47</span></span>
<span id="cb393-12"><a href="data-import-and-consolidation.html#cb393-12" tabindex="-1"></a><span class="co">#&gt;  4 Germany  1963      2.49</span></span>
<span id="cb393-13"><a href="data-import-and-consolidation.html#cb393-13" tabindex="-1"></a><span class="co">#&gt;  5 Germany  1964      2.49</span></span>
<span id="cb393-14"><a href="data-import-and-consolidation.html#cb393-14" tabindex="-1"></a><span class="co">#&gt;  6 Germany  1965      2.48</span></span>
<span id="cb393-15"><a href="data-import-and-consolidation.html#cb393-15" tabindex="-1"></a><span class="co">#&gt;  7 Germany  1966      2.44</span></span>
<span id="cb393-16"><a href="data-import-and-consolidation.html#cb393-16" tabindex="-1"></a><span class="co">#&gt;  8 Germany  1967      2.37</span></span>
<span id="cb393-17"><a href="data-import-and-consolidation.html#cb393-17" tabindex="-1"></a><span class="co">#&gt;  9 Germany  1968      2.28</span></span>
<span id="cb393-18"><a href="data-import-and-consolidation.html#cb393-18" tabindex="-1"></a><span class="co">#&gt; 10 Germany  1969      2.17</span></span>
<span id="cb393-19"><a href="data-import-and-consolidation.html#cb393-19" tabindex="-1"></a><span class="co">#&gt; # ℹ 102 more rows</span></span></code></pre></div>
<p>This data would now be ready to create graphs using <code>ggplot()</code>.</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="data-import-and-consolidation.html#cb394-1" tabindex="-1"></a>tidy_data <span class="sc">|&gt;</span></span>
<span id="cb394-2"><a href="data-import-and-consolidation.html#cb394-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb394-3"><a href="data-import-and-consolidation.html#cb394-3" tabindex="-1"></a>  <span class="fu">aes</span>(year, fertility, <span class="at">color =</span> country) <span class="sc">+</span></span>
<span id="cb394-4"><a href="data-import-and-consolidation.html#cb394-4" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="Data-Science-with-R_files/figure-html/unnamed-chunk-518-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="pivot_wider-function" class="section level4 hasAnchor" number="10.2.1.2">
<h4><span class="header-section-number">10.2.1.2</span> pivot_wider function<a href="data-import-and-consolidation.html#pivot_wider-function" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sometimes, as we will see in the following section, it will be useful to go back from rows to columns. For this we will use the <code>pivot_wider()</code> function, where we specify <code>names_from</code> (the column containing the new column names) and <code>values_from</code> (the column containing the values). Additionally, we can use the <code>:</code> operator to indicate from which column to which column we want to select.</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="data-import-and-consolidation.html#cb395-1" tabindex="-1"></a>tidy_data <span class="sc">|&gt;</span> </span>
<span id="cb395-2"><a href="data-import-and-consolidation.html#cb395-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year, <span class="at">values_from =</span> fertility) <span class="sc">|&gt;</span> </span>
<span id="cb395-3"><a href="data-import-and-consolidation.html#cb395-3" tabindex="-1"></a>  <span class="fu">select</span>(country, <span class="st">`</span><span class="at">1965</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">1970</span><span class="st">`</span>)</span>
<span id="cb395-4"><a href="data-import-and-consolidation.html#cb395-4" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 7</span></span>
<span id="cb395-5"><a href="data-import-and-consolidation.html#cb395-5" tabindex="-1"></a><span class="co">#&gt;   country     `1965` `1966` `1967` `1968` `1969` `1970`</span></span>
<span id="cb395-6"><a href="data-import-and-consolidation.html#cb395-6" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb395-7"><a href="data-import-and-consolidation.html#cb395-7" tabindex="-1"></a><span class="co">#&gt; 1 Germany       2.48   2.44   2.37   2.28   2.17   2.04</span></span>
<span id="cb395-8"><a href="data-import-and-consolidation.html#cb395-8" tabindex="-1"></a><span class="co">#&gt; 2 South Korea   5.16   4.99   4.85   4.73   4.62   4.53</span></span></code></pre></div>
</div>
</div>
<div id="separate-function" class="section level3 hasAnchor" number="10.2.2">
<h3><span class="header-section-number">10.2.2</span> separate function<a href="data-import-and-consolidation.html#separate-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the cases described above we had a situation with relatively ordered data. We only had to do a collection transformation and converted to <em>tidy data</em>. However, the data is not always stored in such an easily interpretable way. Sometimes we have data like this:</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="data-import-and-consolidation.html#cb396-1" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dslabs_path, <span class="st">&quot;life-expectancy-and-fertility-two-countries-example.csv&quot;</span>)</span>
<span id="cb396-2"><a href="data-import-and-consolidation.html#cb396-2" tabindex="-1"></a></span>
<span id="cb396-3"><a href="data-import-and-consolidation.html#cb396-3" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(path, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb396-4"><a href="data-import-and-consolidation.html#cb396-4" tabindex="-1"></a></span>
<span id="cb396-5"><a href="data-import-and-consolidation.html#cb396-5" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb396-6"><a href="data-import-and-consolidation.html#cb396-6" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="co">#Report first 5 columns</span></span>
<span id="cb396-7"><a href="data-import-and-consolidation.html#cb396-7" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 5</span></span>
<span id="cb396-8"><a href="data-import-and-consolidation.html#cb396-8" tabindex="-1"></a><span class="co">#&gt;   country     `1960_fertility` `1960_life_expectancy` `1961_fertility`</span></span>
<span id="cb396-9"><a href="data-import-and-consolidation.html#cb396-9" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                  &lt;dbl&gt;                  &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb396-10"><a href="data-import-and-consolidation.html#cb396-10" tabindex="-1"></a><span class="co">#&gt; 1 Germany                 2.41                   69.3             2.44</span></span>
<span id="cb396-11"><a href="data-import-and-consolidation.html#cb396-11" tabindex="-1"></a><span class="co">#&gt; 2 South Korea             6.16                   53.0             5.99</span></span>
<span id="cb396-12"><a href="data-import-and-consolidation.html#cb396-12" tabindex="-1"></a><span class="co">#&gt; # ℹ 1 more variable: `1961_life_expectancy` &lt;dbl&gt;</span></span></code></pre></div>
<p>If we apply <code>pivot_longer()</code> directly we would not have our data ordered yet. Let’s see:</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="data-import-and-consolidation.html#cb397-1" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb397-2"><a href="data-import-and-consolidation.html#cb397-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>country, <span class="at">names_to =</span> <span class="st">&quot;key_col&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value_col&quot;</span>)</span>
<span id="cb397-3"><a href="data-import-and-consolidation.html#cb397-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 224 × 3</span></span>
<span id="cb397-4"><a href="data-import-and-consolidation.html#cb397-4" tabindex="-1"></a><span class="co">#&gt;    country key_col              value_col</span></span>
<span id="cb397-5"><a href="data-import-and-consolidation.html#cb397-5" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;                    &lt;dbl&gt;</span></span>
<span id="cb397-6"><a href="data-import-and-consolidation.html#cb397-6" tabindex="-1"></a><span class="co">#&gt;  1 Germany 1960_fertility            2.41</span></span>
<span id="cb397-7"><a href="data-import-and-consolidation.html#cb397-7" tabindex="-1"></a><span class="co">#&gt;  2 Germany 1960_life_expectancy     69.3 </span></span>
<span id="cb397-8"><a href="data-import-and-consolidation.html#cb397-8" tabindex="-1"></a><span class="co">#&gt;  3 Germany 1961_fertility            2.44</span></span>
<span id="cb397-9"><a href="data-import-and-consolidation.html#cb397-9" tabindex="-1"></a><span class="co">#&gt;  4 Germany 1961_life_expectancy     69.8 </span></span>
<span id="cb397-10"><a href="data-import-and-consolidation.html#cb397-10" tabindex="-1"></a><span class="co">#&gt;  5 Germany 1962_fertility            2.47</span></span>
<span id="cb397-11"><a href="data-import-and-consolidation.html#cb397-11" tabindex="-1"></a><span class="co">#&gt;  6 Germany 1962_life_expectancy     70.0 </span></span>
<span id="cb397-12"><a href="data-import-and-consolidation.html#cb397-12" tabindex="-1"></a><span class="co">#&gt;  7 Germany 1963_fertility            2.49</span></span>
<span id="cb397-13"><a href="data-import-and-consolidation.html#cb397-13" tabindex="-1"></a><span class="co">#&gt;  8 Germany 1963_life_expectancy     70.1 </span></span>
<span id="cb397-14"><a href="data-import-and-consolidation.html#cb397-14" tabindex="-1"></a><span class="co">#&gt;  9 Germany 1964_fertility            2.49</span></span>
<span id="cb397-15"><a href="data-import-and-consolidation.html#cb397-15" tabindex="-1"></a><span class="co">#&gt; 10 Germany 1964_life_expectancy     70.7 </span></span>
<span id="cb397-16"><a href="data-import-and-consolidation.html#cb397-16" tabindex="-1"></a><span class="co">#&gt; # ℹ 214 more rows</span></span></code></pre></div>
<p>We will use the <code>separate()</code> function to separate a column into multiple columns using a specific separator. In this case our separator would be the character <code>_</code>. Also, we will add the attribute <code>extra="merge"</code> to indicate that if there is more than one separator character, do not separate them and keep them joined.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="data-import-and-consolidation.html#cb398-1" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb398-2"><a href="data-import-and-consolidation.html#cb398-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>country, <span class="at">names_to =</span> <span class="st">&quot;key_col&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value_col&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb398-3"><a href="data-import-and-consolidation.html#cb398-3" tabindex="-1"></a>  <span class="fu">separate</span>(key_col, <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;other_var&quot;</span>), <span class="at">sep=</span><span class="st">&quot;_&quot;</span>, <span class="at">extra =</span> <span class="st">&quot;merge&quot;</span>)</span>
<span id="cb398-4"><a href="data-import-and-consolidation.html#cb398-4" tabindex="-1"></a><span class="co">#&gt; # A tibble: 224 × 4</span></span>
<span id="cb398-5"><a href="data-import-and-consolidation.html#cb398-5" tabindex="-1"></a><span class="co">#&gt;    country year  other_var       value_col</span></span>
<span id="cb398-6"><a href="data-import-and-consolidation.html#cb398-6" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;               &lt;dbl&gt;</span></span>
<span id="cb398-7"><a href="data-import-and-consolidation.html#cb398-7" tabindex="-1"></a><span class="co">#&gt;  1 Germany 1960  fertility            2.41</span></span>
<span id="cb398-8"><a href="data-import-and-consolidation.html#cb398-8" tabindex="-1"></a><span class="co">#&gt;  2 Germany 1960  life_expectancy     69.3 </span></span>
<span id="cb398-9"><a href="data-import-and-consolidation.html#cb398-9" tabindex="-1"></a><span class="co">#&gt;  3 Germany 1961  fertility            2.44</span></span>
<span id="cb398-10"><a href="data-import-and-consolidation.html#cb398-10" tabindex="-1"></a><span class="co">#&gt;  4 Germany 1961  life_expectancy     69.8 </span></span>
<span id="cb398-11"><a href="data-import-and-consolidation.html#cb398-11" tabindex="-1"></a><span class="co">#&gt;  5 Germany 1962  fertility            2.47</span></span>
<span id="cb398-12"><a href="data-import-and-consolidation.html#cb398-12" tabindex="-1"></a><span class="co">#&gt;  6 Germany 1962  life_expectancy     70.0 </span></span>
<span id="cb398-13"><a href="data-import-and-consolidation.html#cb398-13" tabindex="-1"></a><span class="co">#&gt;  7 Germany 1963  fertility            2.49</span></span>
<span id="cb398-14"><a href="data-import-and-consolidation.html#cb398-14" tabindex="-1"></a><span class="co">#&gt;  8 Germany 1963  life_expectancy     70.1 </span></span>
<span id="cb398-15"><a href="data-import-and-consolidation.html#cb398-15" tabindex="-1"></a><span class="co">#&gt;  9 Germany 1964  fertility            2.49</span></span>
<span id="cb398-16"><a href="data-import-and-consolidation.html#cb398-16" tabindex="-1"></a><span class="co">#&gt; 10 Germany 1964  life_expectancy     70.7 </span></span>
<span id="cb398-17"><a href="data-import-and-consolidation.html#cb398-17" tabindex="-1"></a><span class="co">#&gt; # ℹ 214 more rows</span></span></code></pre></div>
<p>We already have the year separated, but this data is still not <em>tidy data</em> since there is a row for fertility and a row for life expectancy for each country. We have to pass these values from row to columns. And for that we already learned that we can use the <code>pivot_wider()</code> function</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="data-import-and-consolidation.html#cb399-1" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb399-2"><a href="data-import-and-consolidation.html#cb399-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>country, <span class="at">names_to =</span> <span class="st">&quot;key_col&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value_col&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb399-3"><a href="data-import-and-consolidation.html#cb399-3" tabindex="-1"></a>  <span class="fu">separate</span>(key_col, <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;other_var&quot;</span>), <span class="at">sep=</span><span class="st">&quot;_&quot;</span>, <span class="at">extra =</span> <span class="st">&quot;merge&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb399-4"><a href="data-import-and-consolidation.html#cb399-4" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> other_var, <span class="at">values_from =</span> value_col)</span>
<span id="cb399-5"><a href="data-import-and-consolidation.html#cb399-5" tabindex="-1"></a><span class="co">#&gt; # A tibble: 112 × 4</span></span>
<span id="cb399-6"><a href="data-import-and-consolidation.html#cb399-6" tabindex="-1"></a><span class="co">#&gt;    country year  fertility life_expectancy</span></span>
<span id="cb399-7"><a href="data-import-and-consolidation.html#cb399-7" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;           &lt;dbl&gt;</span></span>
<span id="cb399-8"><a href="data-import-and-consolidation.html#cb399-8" tabindex="-1"></a><span class="co">#&gt;  1 Germany 1960       2.41            69.3</span></span>
<span id="cb399-9"><a href="data-import-and-consolidation.html#cb399-9" tabindex="-1"></a><span class="co">#&gt;  2 Germany 1961       2.44            69.8</span></span>
<span id="cb399-10"><a href="data-import-and-consolidation.html#cb399-10" tabindex="-1"></a><span class="co">#&gt;  3 Germany 1962       2.47            70.0</span></span>
<span id="cb399-11"><a href="data-import-and-consolidation.html#cb399-11" tabindex="-1"></a><span class="co">#&gt;  4 Germany 1963       2.49            70.1</span></span>
<span id="cb399-12"><a href="data-import-and-consolidation.html#cb399-12" tabindex="-1"></a><span class="co">#&gt;  5 Germany 1964       2.49            70.7</span></span>
<span id="cb399-13"><a href="data-import-and-consolidation.html#cb399-13" tabindex="-1"></a><span class="co">#&gt;  6 Germany 1965       2.48            70.6</span></span>
<span id="cb399-14"><a href="data-import-and-consolidation.html#cb399-14" tabindex="-1"></a><span class="co">#&gt;  7 Germany 1966       2.44            70.8</span></span>
<span id="cb399-15"><a href="data-import-and-consolidation.html#cb399-15" tabindex="-1"></a><span class="co">#&gt;  8 Germany 1967       2.37            71.0</span></span>
<span id="cb399-16"><a href="data-import-and-consolidation.html#cb399-16" tabindex="-1"></a><span class="co">#&gt;  9 Germany 1968       2.28            70.6</span></span>
<span id="cb399-17"><a href="data-import-and-consolidation.html#cb399-17" tabindex="-1"></a><span class="co">#&gt; 10 Germany 1969       2.17            70.5</span></span>
<span id="cb399-18"><a href="data-import-and-consolidation.html#cb399-18" tabindex="-1"></a><span class="co">#&gt; # ℹ 102 more rows</span></span></code></pre></div>
<p>In other cases, instead of separating a column we will want to join them. In future cases we will see how the <code>unite(column_1, column2)</code> function can also be useful.</p>
</div>
</div>
<div id="exercises-14" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> Exercises<a href="data-import-and-consolidation.html#exercises-14" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol start="85" style="list-style-type: decimal">
<li>Access the <strong>Uber Peru 2010</strong> dataset from <a href="https://dparedesi.github.io/Data-Science-with-R-book/data/uber-peru-2010.csv">this link</a> and attempt to import it into an object named <code>uber_peru_2010</code>. Pay attention to the delimiters used in the file.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="data-import-and-consolidation.html#cb400-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://dparedesi.github.io/Data-Science-with-R-book/data/uber-peru-2010.csv&quot;</span></span>
<span id="cb400-2"><a href="data-import-and-consolidation.html#cb400-2" tabindex="-1"></a></span>
<span id="cb400-3"><a href="data-import-and-consolidation.html#cb400-3" tabindex="-1"></a><span class="co"># We will use read_csv since it is separated by commas</span></span>
<span id="cb400-4"><a href="data-import-and-consolidation.html#cb400-4" tabindex="-1"></a>uber_peru_2010 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb400-5"><a href="data-import-and-consolidation.html#cb400-5" tabindex="-1"></a></span>
<span id="cb400-6"><a href="data-import-and-consolidation.html#cb400-6" tabindex="-1"></a><span class="co"># Upon importing it we realize it is separated by &quot;;&quot;</span></span>
<span id="cb400-7"><a href="data-import-and-consolidation.html#cb400-7" tabindex="-1"></a>uber_peru_2010 <span class="sc">|&gt;</span> </span>
<span id="cb400-8"><a href="data-import-and-consolidation.html#cb400-8" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb400-9"><a href="data-import-and-consolidation.html#cb400-9" tabindex="-1"></a></span>
<span id="cb400-10"><a href="data-import-and-consolidation.html#cb400-10" tabindex="-1"></a><span class="co"># Therefore we import again using read_delim</span></span>
<span id="cb400-11"><a href="data-import-and-consolidation.html#cb400-11" tabindex="-1"></a>uber_peru_2010 <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;external/uber-peru-2010.csv&quot;</span>, </span>
<span id="cb400-12"><a href="data-import-and-consolidation.html#cb400-12" tabindex="-1"></a>                             <span class="at">delim =</span> <span class="st">&quot;;&quot;</span>, </span>
<span id="cb400-13"><a href="data-import-and-consolidation.html#cb400-13" tabindex="-1"></a>                             <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">.default =</span> <span class="st">&quot;c&quot;</span>)</span>
<span id="cb400-14"><a href="data-import-and-consolidation.html#cb400-14" tabindex="-1"></a>                             )</span>
<span id="cb400-15"><a href="data-import-and-consolidation.html#cb400-15" tabindex="-1"></a></span>
<span id="cb400-16"><a href="data-import-and-consolidation.html#cb400-16" tabindex="-1"></a>uber_peru_2010 <span class="sc">|&gt;</span> </span>
<span id="cb400-17"><a href="data-import-and-consolidation.html#cb400-17" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
</details>
<ol start="86" style="list-style-type: decimal">
<li>Import the <strong>SINADEF</strong> deaths registry from <a href="https://www.datosabiertos.gob.pe/sites/default/files/sinadef-deaths.csv">this source</a> into an object called <code>deaths</code>. Ensure you handle the file encoding correctly to avoid character issues.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="data-import-and-consolidation.html#cb401-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://www.datosabiertos.gob.pe/sites/default/files/sinadef-deaths.csv&quot;</span></span>
<span id="cb401-2"><a href="data-import-and-consolidation.html#cb401-2" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://dparedesi.github.io/Data-Science-with-R-book/data/sinadef-deaths.csv&quot;</span></span>
<span id="cb401-3"><a href="data-import-and-consolidation.html#cb401-3" tabindex="-1"></a></span>
<span id="cb401-4"><a href="data-import-and-consolidation.html#cb401-4" tabindex="-1"></a><span class="co"># We will use read_delim because it is delimited by &quot;;&quot; and not by &quot;,&quot;</span></span>
<span id="cb401-5"><a href="data-import-and-consolidation.html#cb401-5" tabindex="-1"></a><span class="co"># Also we change the encoding to avoid error in loading</span></span>
<span id="cb401-6"><a href="data-import-and-consolidation.html#cb401-6" tabindex="-1"></a>deaths <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(url, <span class="st">&quot;;&quot;</span>,</span>
<span id="cb401-7"><a href="data-import-and-consolidation.html#cb401-7" tabindex="-1"></a>                          <span class="at">local =</span> <span class="fu">locale</span>(<span class="at">encoding =</span> <span class="st">&quot;latin1&quot;</span>))</span></code></pre></div>
</details>
<ol start="87" style="list-style-type: decimal">
<li>Download the resource file from <a href="https://dparedesi.github.io/Data-Science-with-R-book/data/resources-other-idd.xlsx">this link</a> to a temporary location. Validating that the file exists, load the specific sheet named “Deflators” into an object named <code>data</code>.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="data-import-and-consolidation.html#cb402-1" tabindex="-1"></a><span class="co"># Store the url</span></span>
<span id="cb402-2"><a href="data-import-and-consolidation.html#cb402-2" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://dparedesi.github.io/Data-Science-with-R-book/data/resources-other-idd.xlsx&quot;</span></span>
<span id="cb402-3"><a href="data-import-and-consolidation.html#cb402-3" tabindex="-1"></a></span>
<span id="cb402-4"><a href="data-import-and-consolidation.html#cb402-4" tabindex="-1"></a><span class="co"># Create a temporary name &amp; path for our file. See: ?tempfile</span></span>
<span id="cb402-5"><a href="data-import-and-consolidation.html#cb402-5" tabindex="-1"></a>temp_file <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="cb402-6"><a href="data-import-and-consolidation.html#cb402-6" tabindex="-1"></a></span>
<span id="cb402-7"><a href="data-import-and-consolidation.html#cb402-7" tabindex="-1"></a><span class="co"># Download the file to our temp</span></span>
<span id="cb402-8"><a href="data-import-and-consolidation.html#cb402-8" tabindex="-1"></a><span class="fu">download.file</span>(url, temp_file)</span>
<span id="cb402-9"><a href="data-import-and-consolidation.html#cb402-9" tabindex="-1"></a></span>
<span id="cb402-10"><a href="data-import-and-consolidation.html#cb402-10" tabindex="-1"></a><span class="co"># Import the excel</span></span>
<span id="cb402-11"><a href="data-import-and-consolidation.html#cb402-11" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(temp_file, <span class="at">sheet =</span> <span class="st">&quot;Deflators&quot;</span>)</span>
<span id="cb402-12"><a href="data-import-and-consolidation.html#cb402-12" tabindex="-1"></a></span>
<span id="cb402-13"><a href="data-import-and-consolidation.html#cb402-13" tabindex="-1"></a><span class="co"># Remove the temporary file</span></span>
<span id="cb402-14"><a href="data-import-and-consolidation.html#cb402-14" tabindex="-1"></a><span class="fu">file.remove</span>(temp_file)</span></code></pre></div>
</details>
<p>For the following files run the following code so that you have access to the objects referred to in the problems:</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="data-import-and-consolidation.html#cb403-1" tabindex="-1"></a><span class="co"># GDP by countries</span></span>
<span id="cb403-2"><a href="data-import-and-consolidation.html#cb403-2" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://dparedesi.github.io/Data-Science-with-R-book/data/gdp.csv&quot;</span></span>
<span id="cb403-3"><a href="data-import-and-consolidation.html#cb403-3" tabindex="-1"></a>gdp <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb403-4"><a href="data-import-and-consolidation.html#cb403-4" tabindex="-1"></a></span>
<span id="cb403-5"><a href="data-import-and-consolidation.html#cb403-5" tabindex="-1"></a><span class="co"># Diseases by years by countries</span></span>
<span id="cb403-6"><a href="data-import-and-consolidation.html#cb403-6" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://dparedesi.github.io/Data-Science-with-R-book/data/diseases-evolution.csv&quot;</span></span>
<span id="cb403-7"><a href="data-import-and-consolidation.html#cb403-7" tabindex="-1"></a>diseases_wide <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb403-8"><a href="data-import-and-consolidation.html#cb403-8" tabindex="-1"></a></span>
<span id="cb403-9"><a href="data-import-and-consolidation.html#cb403-9" tabindex="-1"></a><span class="co"># Number of female mayors</span></span>
<span id="cb403-10"><a href="data-import-and-consolidation.html#cb403-10" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://dparedesi.github.io/Data-Science-with-R-book/data/female-mayors.csv&quot;</span></span>
<span id="cb403-11"><a href="data-import-and-consolidation.html#cb403-11" tabindex="-1"></a>female_mayors <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb403-12"><a href="data-import-and-consolidation.html#cb403-12" tabindex="-1"></a></span>
<span id="cb403-13"><a href="data-import-and-consolidation.html#cb403-13" tabindex="-1"></a><span class="co"># Evolution of a university</span></span>
<span id="cb403-14"><a href="data-import-and-consolidation.html#cb403-14" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://dparedesi.github.io/Data-Science-with-R-book/data/university.csv&quot;</span></span>
<span id="cb403-15"><a href="data-import-and-consolidation.html#cb403-15" tabindex="-1"></a>university <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<ol start="88" style="list-style-type: decimal">
<li>Examine the structure of the <code>gdp</code> dataset. Transform it into a <em>tidy</em> format suitable for analysis, and then create a line plot visualizing the evolution of GDP over time for each country.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="data-import-and-consolidation.html#cb404-1" tabindex="-1"></a><span class="co"># To tidy data</span></span>
<span id="cb404-2"><a href="data-import-and-consolidation.html#cb404-2" tabindex="-1"></a>gdp <span class="ot">&lt;-</span> gdp <span class="sc">|&gt;</span> </span>
<span id="cb404-3"><a href="data-import-and-consolidation.html#cb404-3" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>country, <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;gdp&quot;</span>,</span>
<span id="cb404-4"><a href="data-import-and-consolidation.html#cb404-4" tabindex="-1"></a>               <span class="at">names_transform =</span> <span class="fu">list</span>(<span class="at">year =</span> as.integer))</span>
<span id="cb404-5"><a href="data-import-and-consolidation.html#cb404-5" tabindex="-1"></a></span>
<span id="cb404-6"><a href="data-import-and-consolidation.html#cb404-6" tabindex="-1"></a>gdp</span>
<span id="cb404-7"><a href="data-import-and-consolidation.html#cb404-7" tabindex="-1"></a></span>
<span id="cb404-8"><a href="data-import-and-consolidation.html#cb404-8" tabindex="-1"></a><span class="co"># Visualization</span></span>
<span id="cb404-9"><a href="data-import-and-consolidation.html#cb404-9" tabindex="-1"></a>gdp <span class="sc">|&gt;</span> </span>
<span id="cb404-10"><a href="data-import-and-consolidation.html#cb404-10" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb404-11"><a href="data-import-and-consolidation.html#cb404-11" tabindex="-1"></a>  <span class="fu">aes</span>(year, gdp, <span class="at">color=</span>country) <span class="sc">+</span></span>
<span id="cb404-12"><a href="data-import-and-consolidation.html#cb404-12" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
</details>
<ol start="89" style="list-style-type: decimal">
<li>The <code>diseases_wide</code> object contains disease counts in a wide format. Reshape this dataframe into a <em>tidy</em> structure where the specific diseases are consolidated into a single column.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="data-import-and-consolidation.html#cb405-1" tabindex="-1"></a><span class="co"># Solution</span></span>
<span id="cb405-2"><a href="data-import-and-consolidation.html#cb405-2" tabindex="-1"></a>diseases_1 <span class="ot">&lt;-</span> diseases_wide <span class="sc">|&gt;</span> </span>
<span id="cb405-3"><a href="data-import-and-consolidation.html#cb405-3" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="sc">-</span>country, <span class="sc">-</span>year, <span class="sc">-</span>population), <span class="at">names_to =</span> <span class="st">&quot;disease&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;count&quot;</span>)</span>
<span id="cb405-4"><a href="data-import-and-consolidation.html#cb405-4" tabindex="-1"></a></span>
<span id="cb405-5"><a href="data-import-and-consolidation.html#cb405-5" tabindex="-1"></a>diseases_1</span>
<span id="cb405-6"><a href="data-import-and-consolidation.html#cb405-6" tabindex="-1"></a></span>
<span id="cb405-7"><a href="data-import-and-consolidation.html#cb405-7" tabindex="-1"></a><span class="co"># Alternative solution. Instead of indicating what to omit, we indicate what to take into account</span></span>
<span id="cb405-8"><a href="data-import-and-consolidation.html#cb405-8" tabindex="-1"></a>diseases_2 <span class="ot">&lt;-</span> diseases_wide <span class="sc">|&gt;</span> </span>
<span id="cb405-9"><a href="data-import-and-consolidation.html#cb405-9" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> HepatitisA<span class="sc">:</span>Rubella, <span class="at">names_to =</span> <span class="st">&quot;disease&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;count&quot;</span>)</span>
<span id="cb405-10"><a href="data-import-and-consolidation.html#cb405-10" tabindex="-1"></a></span>
<span id="cb405-11"><a href="data-import-and-consolidation.html#cb405-11" tabindex="-1"></a>diseases_2</span></code></pre></div>
</details>
<ol start="90" style="list-style-type: decimal">
<li>Convert the <code>female_mayors</code> dataset, which is currently in a long format, into a <em>wide</em> format where the variables are spread across columns.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="data-import-and-consolidation.html#cb406-1" tabindex="-1"></a>female_mayors <span class="ot">&lt;-</span> female_mayors <span class="sc">|&gt;</span> </span>
<span id="cb406-2"><a href="data-import-and-consolidation.html#cb406-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable, <span class="at">values_from =</span> total)</span></code></pre></div>
</details>
<ol start="91" style="list-style-type: decimal">
<li>The <code>university</code> dataset is untidy. Reshape it by first pivoting longer to gather variables, separating the combined variable names, and then pivoting wider to achieve a final tidy structure.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="data-import-and-consolidation.html#cb407-1" tabindex="-1"></a>university <span class="ot">&lt;-</span> university <span class="sc">|&gt;</span> </span>
<span id="cb407-2"><a href="data-import-and-consolidation.html#cb407-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>semester, <span class="at">names_to =</span> <span class="st">&quot;variable&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb407-3"><a href="data-import-and-consolidation.html#cb407-3" tabindex="-1"></a>  <span class="fu">separate</span>(variable, <span class="fu">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;variable2&quot;</span>), <span class="at">sep=</span><span class="st">&quot;_&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb407-4"><a href="data-import-and-consolidation.html#cb407-4" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable2, <span class="at">values_from =</span> value)</span>
<span id="cb407-5"><a href="data-import-and-consolidation.html#cb407-5" tabindex="-1"></a></span>
<span id="cb407-6"><a href="data-import-and-consolidation.html#cb407-6" tabindex="-1"></a>university</span></code></pre></div>
</details>
</div>
<div id="joining-tables" class="section level2 hasAnchor" number="10.4">
<h2><span class="header-section-number">10.4</span> Joining tables<a href="data-import-and-consolidation.html#joining-tables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Regularly we will have data from different sources that we then have to combine to be able to perform our analyses. For this we will learn different groups of functions that will allow us to combine multiple objects.</p>
<div id="join-functions" class="section level3 hasAnchor" number="10.4.1">
<h3><span class="header-section-number">10.4.1</span> Join functions<a href="data-import-and-consolidation.html#join-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Join functions are the most used in table crossing. To use them we have to make sure we have the <code>dplyr</code> library installed.</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="data-import-and-consolidation.html#cb408-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<p>This library includes a variety of functions to combine tables.</p>
<p>The <code>dplyr</code> package offers a family of join functions to combine tables based on common keys. The most frequently used is <strong><code>left_join()</code></strong>, which preserves all rows from the first (left) table and appends matching data from the second. Conversely, <strong><code>right_join()</code></strong> keeps all rows from the second table. <strong><code>inner_join()</code></strong> is more restrictive, retaining only the rows that have matching keys in <em>both</em> tables, effectively filtering for the intersection. <strong><code>full_join()</code></strong> does the opposite, keeping <em>all</em> rows from both tables and filling missing values with <code>NA</code>. Finally, filtering joins like <strong><code>semi_join()</code></strong> (keeps rows in the first table that match the second) and <strong><code>anti_join()</code></strong> (keeps rows in the first table that do <em>not</em> match the second) are excellent for data validation and filtering without adding new columns.</p>
<p>To see the join functions with examples we will use the following files:</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="data-import-and-consolidation.html#cb409-1" tabindex="-1"></a>url_1 <span class="ot">&lt;-</span> <span class="st">&quot;https://dparedesi.github.io/Data-Science-with-R-book/data/join-card.csv&quot;</span></span>
<span id="cb409-2"><a href="data-import-and-consolidation.html#cb409-2" tabindex="-1"></a>url_2 <span class="ot">&lt;-</span> <span class="st">&quot;https://dparedesi.github.io/Data-Science-with-R-book/data/join-customer.csv&quot;</span></span>
<span id="cb409-3"><a href="data-import-and-consolidation.html#cb409-3" tabindex="-1"></a></span>
<span id="cb409-4"><a href="data-import-and-consolidation.html#cb409-4" tabindex="-1"></a>card_data_1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url_1, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">id =</span> <span class="fu">col_character</span>()))</span>
<span id="cb409-5"><a href="data-import-and-consolidation.html#cb409-5" tabindex="-1"></a>customer_data_2 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url_2, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">id =</span> <span class="fu">col_character</span>()))</span>
<span id="cb409-6"><a href="data-import-and-consolidation.html#cb409-6" tabindex="-1"></a></span>
<span id="cb409-7"><a href="data-import-and-consolidation.html#cb409-7" tabindex="-1"></a>card_data_1</span>
<span id="cb409-8"><a href="data-import-and-consolidation.html#cb409-8" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span id="cb409-9"><a href="data-import-and-consolidation.html#cb409-9" tabindex="-1"></a><span class="co">#&gt;   id       customer_type card            </span></span>
<span id="cb409-10"><a href="data-import-and-consolidation.html#cb409-10" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;           </span></span>
<span id="cb409-11"><a href="data-import-and-consolidation.html#cb409-11" tabindex="-1"></a><span class="co">#&gt; 1 45860518 premium       VISA gold       </span></span>
<span id="cb409-12"><a href="data-import-and-consolidation.html#cb409-12" tabindex="-1"></a><span class="co">#&gt; 2 46534312 bronze        Mastercard Black</span></span>
<span id="cb409-13"><a href="data-import-and-consolidation.html#cb409-13" tabindex="-1"></a><span class="co">#&gt; 3 47564535 silver        VISA platinum   </span></span>
<span id="cb409-14"><a href="data-import-and-consolidation.html#cb409-14" tabindex="-1"></a><span class="co">#&gt; 4 48987654 bronze        American Express</span></span>
<span id="cb409-15"><a href="data-import-and-consolidation.html#cb409-15" tabindex="-1"></a><span class="co">#&gt; 5 78765434 gold          VISA Signature  </span></span>
<span id="cb409-16"><a href="data-import-and-consolidation.html#cb409-16" tabindex="-1"></a><span class="co">#&gt; 6 41346556 premium       Diners Club</span></span>
<span id="cb409-17"><a href="data-import-and-consolidation.html#cb409-17" tabindex="-1"></a></span>
<span id="cb409-18"><a href="data-import-and-consolidation.html#cb409-18" tabindex="-1"></a>customer_data_2</span>
<span id="cb409-19"><a href="data-import-and-consolidation.html#cb409-19" tabindex="-1"></a><span class="co">#&gt; # A tibble: 8 × 4</span></span>
<span id="cb409-20"><a href="data-import-and-consolidation.html#cb409-20" tabindex="-1"></a><span class="co">#&gt;   id       first_name last_name mother_last_name</span></span>
<span id="cb409-21"><a href="data-import-and-consolidation.html#cb409-21" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;           </span></span>
<span id="cb409-22"><a href="data-import-and-consolidation.html#cb409-22" tabindex="-1"></a><span class="co">#&gt; 1 49321442 Iver       Castro    Rivera          </span></span>
<span id="cb409-23"><a href="data-import-and-consolidation.html#cb409-23" tabindex="-1"></a><span class="co">#&gt; 2 47564535 Enrique    Gutierrez Rivasplata      </span></span>
<span id="cb409-24"><a href="data-import-and-consolidation.html#cb409-24" tabindex="-1"></a><span class="co">#&gt; 3 48987654 Alexandra  Cupe      Gaspar          </span></span>
<span id="cb409-25"><a href="data-import-and-consolidation.html#cb409-25" tabindex="-1"></a><span class="co">#&gt; 4 47542345 Christiam  Olortegui Roca            </span></span>
<span id="cb409-26"><a href="data-import-and-consolidation.html#cb409-26" tabindex="-1"></a><span class="co">#&gt; 5 41346556 Karen      Jara      Mory            </span></span>
<span id="cb409-27"><a href="data-import-and-consolidation.html#cb409-27" tabindex="-1"></a><span class="co">#&gt; 6 45860518 Hebert     Lopez     Chavez          </span></span>
<span id="cb409-28"><a href="data-import-and-consolidation.html#cb409-28" tabindex="-1"></a><span class="co">#&gt; 7 71234321 Jesus      Valle     Mariños         </span></span>
<span id="cb409-29"><a href="data-import-and-consolidation.html#cb409-29" tabindex="-1"></a><span class="co">#&gt; 8 73231243 Jenny      Sosa      Sosa</span></span></code></pre></div>
<div id="left-join" class="section level4 hasAnchor" number="10.4.1.1">
<h4><span class="header-section-number">10.4.1.1</span> Left join<a href="data-import-and-consolidation.html#left-join" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Given two tables with the same identifier (in our case our identifier consists only of a single column: ID), the left join function maintains the information of the first table and completes it with the data that crosses in the second table</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="data-import-and-consolidation.html#cb410-1" tabindex="-1"></a><span class="fu">left_join</span>(card_data_1, customer_data_2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;id&quot;</span>))</span>
<span id="cb410-2"><a href="data-import-and-consolidation.html#cb410-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 6</span></span>
<span id="cb410-3"><a href="data-import-and-consolidation.html#cb410-3" tabindex="-1"></a><span class="co">#&gt;   id       customer_type card             first_name last_name mother_last_name</span></span>
<span id="cb410-4"><a href="data-import-and-consolidation.html#cb410-4" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;           </span></span>
<span id="cb410-5"><a href="data-import-and-consolidation.html#cb410-5" tabindex="-1"></a><span class="co">#&gt; 1 45860518 premium       VISA gold        Hebert     Lopez     Chavez          </span></span>
<span id="cb410-6"><a href="data-import-and-consolidation.html#cb410-6" tabindex="-1"></a><span class="co">#&gt; 2 46534312 bronze        Mastercard Black &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;            </span></span>
<span id="cb410-7"><a href="data-import-and-consolidation.html#cb410-7" tabindex="-1"></a><span class="co">#&gt; 3 47564535 silver        VISA platinum    Enrique    Gutierrez Rivasplata      </span></span>
<span id="cb410-8"><a href="data-import-and-consolidation.html#cb410-8" tabindex="-1"></a><span class="co">#&gt; 4 48987654 bronze        American Express Alexandra  Cupe      Gaspar          </span></span>
<span id="cb410-9"><a href="data-import-and-consolidation.html#cb410-9" tabindex="-1"></a><span class="co">#&gt; 5 78765434 gold          VISA Signature   &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;            </span></span>
<span id="cb410-10"><a href="data-import-and-consolidation.html#cb410-10" tabindex="-1"></a><span class="co">#&gt; 6 41346556 premium       Diners Club      Karen      Jara      Mory</span></span></code></pre></div>
<p>As we can see, the first three columns are exactly the same as we initially had and to the right of those columns we see the columns of the other table for the values ​​that did cross the data. In this case we are facing a data inconsistency since all customers of <code>card_data_1</code> should be in <code>customer_data_2</code>. This inconsistency could lead us to have to map the data loss process, etc.</p>
</div>
<div id="right-join" class="section level4 hasAnchor" number="10.4.1.2">
<h4><span class="header-section-number">10.4.1.2</span> Right join<a href="data-import-and-consolidation.html#right-join" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Given two tables with the same identifier, the right join function maintains the information of the second table and completes it with the data that crosses in the first table</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="data-import-and-consolidation.html#cb411-1" tabindex="-1"></a><span class="fu">right_join</span>(card_data_1, customer_data_2, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb411-2"><a href="data-import-and-consolidation.html#cb411-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 8 × 6</span></span>
<span id="cb411-3"><a href="data-import-and-consolidation.html#cb411-3" tabindex="-1"></a><span class="co">#&gt;   id       customer_type card             first_name last_name mother_last_name</span></span>
<span id="cb411-4"><a href="data-import-and-consolidation.html#cb411-4" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;           </span></span>
<span id="cb411-5"><a href="data-import-and-consolidation.html#cb411-5" tabindex="-1"></a><span class="co">#&gt; 1 45860518 premium       VISA gold        Hebert     Lopez     Chavez          </span></span>
<span id="cb411-6"><a href="data-import-and-consolidation.html#cb411-6" tabindex="-1"></a><span class="co">#&gt; 2 47564535 silver        VISA platinum    Enrique    Gutierrez Rivasplata      </span></span>
<span id="cb411-7"><a href="data-import-and-consolidation.html#cb411-7" tabindex="-1"></a><span class="co">#&gt; 3 48987654 bronze        American Express Alexandra  Cupe      Gaspar          </span></span>
<span id="cb411-8"><a href="data-import-and-consolidation.html#cb411-8" tabindex="-1"></a><span class="co">#&gt; 4 41346556 premium       Diners Club      Karen      Jara      Mory            </span></span>
<span id="cb411-9"><a href="data-import-and-consolidation.html#cb411-9" tabindex="-1"></a><span class="co">#&gt; 5 49321442 &lt;NA&gt;          &lt;NA&gt;             Iver       Castro    Rivera          </span></span>
<span id="cb411-10"><a href="data-import-and-consolidation.html#cb411-10" tabindex="-1"></a><span class="co">#&gt; 6 47542345 &lt;NA&gt;          &lt;NA&gt;             Christiam  Olortegui Roca            </span></span>
<span id="cb411-11"><a href="data-import-and-consolidation.html#cb411-11" tabindex="-1"></a><span class="co">#&gt; 7 71234321 &lt;NA&gt;          &lt;NA&gt;             Jesus      Valle     Mariños         </span></span>
<span id="cb411-12"><a href="data-import-and-consolidation.html#cb411-12" tabindex="-1"></a><span class="co">#&gt; 8 73231243 &lt;NA&gt;          &lt;NA&gt;             Jenny      Sosa      Sosa</span></span></code></pre></div>
<p>The idea is the same as in <code>left_join</code>, only this time the <code>NA</code> are in the first two columns.</p>
</div>
<div id="inner-join" class="section level4 hasAnchor" number="10.4.1.3">
<h4><span class="header-section-number">10.4.1.3</span> Inner join<a href="data-import-and-consolidation.html#inner-join" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this case we will only have the intersection of the tables. Only the result of the data that are in both tables will be shown.</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="data-import-and-consolidation.html#cb412-1" tabindex="-1"></a><span class="fu">inner_join</span>(card_data_1, customer_data_2, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb412-2"><a href="data-import-and-consolidation.html#cb412-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 × 6</span></span>
<span id="cb412-3"><a href="data-import-and-consolidation.html#cb412-3" tabindex="-1"></a><span class="co">#&gt;   id       customer_type card             first_name last_name mother_last_name</span></span>
<span id="cb412-4"><a href="data-import-and-consolidation.html#cb412-4" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;           </span></span>
<span id="cb412-5"><a href="data-import-and-consolidation.html#cb412-5" tabindex="-1"></a><span class="co">#&gt; 1 45860518 premium       VISA gold        Hebert     Lopez     Chavez          </span></span>
<span id="cb412-6"><a href="data-import-and-consolidation.html#cb412-6" tabindex="-1"></a><span class="co">#&gt; 2 47564535 silver        VISA platinum    Enrique    Gutierrez Rivasplata      </span></span>
<span id="cb412-7"><a href="data-import-and-consolidation.html#cb412-7" tabindex="-1"></a><span class="co">#&gt; 3 48987654 bronze        American Express Alexandra  Cupe      Gaspar          </span></span>
<span id="cb412-8"><a href="data-import-and-consolidation.html#cb412-8" tabindex="-1"></a><span class="co">#&gt; 4 41346556 premium       Diners Club      Karen      Jara      Mory</span></span></code></pre></div>
</div>
<div id="full-join" class="section level4 hasAnchor" number="10.4.1.4">
<h4><span class="header-section-number">10.4.1.4</span> Full join<a href="data-import-and-consolidation.html#full-join" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Full join is a total crossing of both. It shows us all the data that are in both the first and the second table.</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="data-import-and-consolidation.html#cb413-1" tabindex="-1"></a><span class="fu">full_join</span>(card_data_1, customer_data_2, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb413-2"><a href="data-import-and-consolidation.html#cb413-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10 × 6</span></span>
<span id="cb413-3"><a href="data-import-and-consolidation.html#cb413-3" tabindex="-1"></a><span class="co">#&gt;    id       customer_type card             first_name last_name mother_last_name</span></span>
<span id="cb413-4"><a href="data-import-and-consolidation.html#cb413-4" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;           </span></span>
<span id="cb413-5"><a href="data-import-and-consolidation.html#cb413-5" tabindex="-1"></a><span class="co">#&gt;  1 45860518 premium       VISA gold        Hebert     Lopez     Chavez          </span></span>
<span id="cb413-6"><a href="data-import-and-consolidation.html#cb413-6" tabindex="-1"></a><span class="co">#&gt;  2 46534312 bronze        Mastercard Black &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;            </span></span>
<span id="cb413-7"><a href="data-import-and-consolidation.html#cb413-7" tabindex="-1"></a><span class="co">#&gt;  3 47564535 silver        VISA platinum    Enrique    Gutierrez Rivasplata      </span></span>
<span id="cb413-8"><a href="data-import-and-consolidation.html#cb413-8" tabindex="-1"></a><span class="co">#&gt;  4 48987654 bronze        American Express Alexandra  Cupe      Gaspar          </span></span>
<span id="cb413-9"><a href="data-import-and-consolidation.html#cb413-9" tabindex="-1"></a><span class="co">#&gt;  5 78765434 gold          VISA Signature   &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;            </span></span>
<span id="cb413-10"><a href="data-import-and-consolidation.html#cb413-10" tabindex="-1"></a><span class="co">#&gt;  6 41346556 premium       Diners Club      Karen      Jara      Mory            </span></span>
<span id="cb413-11"><a href="data-import-and-consolidation.html#cb413-11" tabindex="-1"></a><span class="co">#&gt;  7 49321442 &lt;NA&gt;          &lt;NA&gt;             Iver       Castro    Rivera          </span></span>
<span id="cb413-12"><a href="data-import-and-consolidation.html#cb413-12" tabindex="-1"></a><span class="co">#&gt;  8 47542345 &lt;NA&gt;          &lt;NA&gt;             Christiam  Olortegui Roca            </span></span>
<span id="cb413-13"><a href="data-import-and-consolidation.html#cb413-13" tabindex="-1"></a><span class="co">#&gt;  9 71234321 &lt;NA&gt;          &lt;NA&gt;             Jesus      Valle     Mariños         </span></span>
<span id="cb413-14"><a href="data-import-and-consolidation.html#cb413-14" tabindex="-1"></a><span class="co">#&gt; 10 73231243 &lt;NA&gt;          &lt;NA&gt;             Jenny      Sosa      Sosa</span></span></code></pre></div>
<blockquote>
<p><strong>Tip</strong>: To join on multiple columns, use a vector: <code>by = c("col1", "col2")</code>. To join on columns with different names, use named vectors: <code>by = c("left_col" = "right_col")</code>.</p>
</blockquote>
</div>
<div id="semi-join" class="section level4 hasAnchor" number="10.4.1.5">
<h4><span class="header-section-number">10.4.1.5</span> Semi join<a href="data-import-and-consolidation.html#semi-join" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The case of the semi join is very similar to <code>left_join</code> with the difference that it only shows us the columns of the first table and eliminates the data that did not manage to cross (what in <code>left_join</code> comes out as NA). Also, none of the columns of table 2 appear. This is like doing a filter requesting the following: show me only the data from table 1 that is also in table 2.</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="data-import-and-consolidation.html#cb414-1" tabindex="-1"></a><span class="fu">semi_join</span>(card_data_1, customer_data_2, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb414-2"><a href="data-import-and-consolidation.html#cb414-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 × 3</span></span>
<span id="cb414-3"><a href="data-import-and-consolidation.html#cb414-3" tabindex="-1"></a><span class="co">#&gt;   id       customer_type card            </span></span>
<span id="cb414-4"><a href="data-import-and-consolidation.html#cb414-4" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;           </span></span>
<span id="cb414-5"><a href="data-import-and-consolidation.html#cb414-5" tabindex="-1"></a><span class="co">#&gt; 1 45860518 premium       VISA gold       </span></span>
<span id="cb414-6"><a href="data-import-and-consolidation.html#cb414-6" tabindex="-1"></a><span class="co">#&gt; 2 47564535 silver        VISA platinum   </span></span>
<span id="cb414-7"><a href="data-import-and-consolidation.html#cb414-7" tabindex="-1"></a><span class="co">#&gt; 3 48987654 bronze        American Express</span></span>
<span id="cb414-8"><a href="data-import-and-consolidation.html#cb414-8" tabindex="-1"></a><span class="co">#&gt; 4 41346556 premium       Diners Club</span></span></code></pre></div>
</div>
<div id="anti-join" class="section level4 hasAnchor" number="10.4.1.6">
<h4><span class="header-section-number">10.4.1.6</span> Anti join<a href="data-import-and-consolidation.html#anti-join" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the case of <code>anti_join</code> we have the opposite of <code>semi_join</code> since it shows the data from table 1 that are <strong>not</strong> in table 2.</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="data-import-and-consolidation.html#cb415-1" tabindex="-1"></a><span class="fu">anti_join</span>(card_data_1, customer_data_2, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb415-2"><a href="data-import-and-consolidation.html#cb415-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span id="cb415-3"><a href="data-import-and-consolidation.html#cb415-3" tabindex="-1"></a><span class="co">#&gt;   id       customer_type card            </span></span>
<span id="cb415-4"><a href="data-import-and-consolidation.html#cb415-4" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;           </span></span>
<span id="cb415-5"><a href="data-import-and-consolidation.html#cb415-5" tabindex="-1"></a><span class="co">#&gt; 1 46534312 bronze        Mastercard Black</span></span>
<span id="cb415-6"><a href="data-import-and-consolidation.html#cb415-6" tabindex="-1"></a><span class="co">#&gt; 2 78765434 gold          VISA Signature</span></span></code></pre></div>
</div>
</div>
<div id="joining-without-a-common-identifier" class="section level3 hasAnchor" number="10.4.2">
<h3><span class="header-section-number">10.4.2</span> Joining without a common identifier<a href="data-import-and-consolidation.html#joining-without-a-common-identifier" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Likewise, we will have some moments when we need to combine only two objects, without using any type of intersection. For this we will use the <code>bind</code> functions. These functions allow us to put together two vectors or tables either in rows or columns.</p>
<div id="union-of-vectors" class="section level4 hasAnchor" number="10.4.2.1">
<h4><span class="header-section-number">10.4.2.1</span> Union of vectors<a href="data-import-and-consolidation.html#union-of-vectors" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If we have two or more vectors of the same size we can create the union of the columns to create a table using the <code>bind_cols()</code> function. Let’s see with an example:</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="data-import-and-consolidation.html#cb416-1" tabindex="-1"></a>vector_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;hello&quot;</span>, <span class="st">&quot;Have you seen&quot;</span>, <span class="st">&quot;the&quot;</span>)</span>
<span id="cb416-2"><a href="data-import-and-consolidation.html#cb416-2" tabindex="-1"></a>vector_2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Julian&quot;</span>, <span class="st">&quot;Carla&quot;</span>, <span class="st">&quot;Wednesday&quot;</span>)</span>
<span id="cb416-3"><a href="data-import-and-consolidation.html#cb416-3" tabindex="-1"></a></span>
<span id="cb416-4"><a href="data-import-and-consolidation.html#cb416-4" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(<span class="at">greeting =</span> vector_1, <span class="at">nouns =</span> vector_2)</span>
<span id="cb416-5"><a href="data-import-and-consolidation.html#cb416-5" tabindex="-1"></a></span>
<span id="cb416-6"><a href="data-import-and-consolidation.html#cb416-6" tabindex="-1"></a>result</span>
<span id="cb416-7"><a href="data-import-and-consolidation.html#cb416-7" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 2</span></span>
<span id="cb416-8"><a href="data-import-and-consolidation.html#cb416-8" tabindex="-1"></a><span class="co">#&gt;   greeting      nouns    </span></span>
<span id="cb416-9"><a href="data-import-and-consolidation.html#cb416-9" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;    </span></span>
<span id="cb416-10"><a href="data-import-and-consolidation.html#cb416-10" tabindex="-1"></a><span class="co">#&gt; 1 hello         Julian   </span></span>
<span id="cb416-11"><a href="data-import-and-consolidation.html#cb416-11" tabindex="-1"></a><span class="co">#&gt; 2 Have you seen Carla    </span></span>
<span id="cb416-12"><a href="data-import-and-consolidation.html#cb416-12" tabindex="-1"></a><span class="co">#&gt; 3 the           Wednesday</span></span></code></pre></div>
</div>
<div id="union-of-tables" class="section level4 hasAnchor" number="10.4.2.2">
<h4><span class="header-section-number">10.4.2.2</span> Union of tables<a href="data-import-and-consolidation.html#union-of-tables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the case of tables the use is the same. Likewise, we can also join the rows of two or more tables. To see its application let’s first create some example tables:</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="data-import-and-consolidation.html#cb417-1" tabindex="-1"></a>table_1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb417-2"><a href="data-import-and-consolidation.html#cb417-2" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Jhasury&quot;</span>, <span class="st">&quot;Thomas&quot;</span>, <span class="st">&quot;Andres&quot;</span>, <span class="st">&quot;Josep&quot;</span>),</span>
<span id="cb417-3"><a href="data-import-and-consolidation.html#cb417-3" tabindex="-1"></a>  <span class="at">surname =</span> <span class="fu">c</span>(<span class="st">&quot;Campos&quot;</span>, <span class="st">&quot;Gonzales&quot;</span>, <span class="st">&quot;Santiago&quot;</span>, <span class="st">&quot;Villaverde&quot;</span>),</span>
<span id="cb417-4"><a href="data-import-and-consolidation.html#cb417-4" tabindex="-1"></a>  <span class="at">address =</span> <span class="fu">c</span>(<span class="st">&quot;Jr. los campos 471&quot;</span>, <span class="st">&quot;Av. Casuarinas 142&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;Av. Tupac Amaru 164&quot;</span>),</span>
<span id="cb417-5"><a href="data-import-and-consolidation.html#cb417-5" tabindex="-1"></a>  <span class="at">phone =</span> <span class="fu">c</span>(<span class="st">&quot;976567325&quot;</span>, <span class="st">&quot;956732587&quot;</span>, <span class="st">&quot;961445664&quot;</span>, <span class="st">&quot;987786453&quot;</span>)</span>
<span id="cb417-6"><a href="data-import-and-consolidation.html#cb417-6" tabindex="-1"></a>)</span>
<span id="cb417-7"><a href="data-import-and-consolidation.html#cb417-7" tabindex="-1"></a></span>
<span id="cb417-8"><a href="data-import-and-consolidation.html#cb417-8" tabindex="-1"></a>table_2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb417-9"><a href="data-import-and-consolidation.html#cb417-9" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">21</span>, <span class="dv">24</span>, <span class="dv">19</span>, <span class="dv">12</span>),</span>
<span id="cb417-10"><a href="data-import-and-consolidation.html#cb417-10" tabindex="-1"></a>  <span class="at">sign =</span> <span class="fu">c</span>(<span class="st">&quot;Aries&quot;</span>, <span class="st">&quot;Capricorn&quot;</span>, <span class="st">&quot;Sagittarius&quot;</span>, <span class="st">&quot;Libra&quot;</span>)</span>
<span id="cb417-11"><a href="data-import-and-consolidation.html#cb417-11" tabindex="-1"></a>)</span>
<span id="cb417-12"><a href="data-import-and-consolidation.html#cb417-12" tabindex="-1"></a></span>
<span id="cb417-13"><a href="data-import-and-consolidation.html#cb417-13" tabindex="-1"></a><span class="co"># Create a table from row 2 to 3 of table_1</span></span>
<span id="cb417-14"><a href="data-import-and-consolidation.html#cb417-14" tabindex="-1"></a>table_3 <span class="ot">&lt;-</span> table_1[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, ]</span></code></pre></div>
<p>Once we have our tables let’s proceed to join them. We see that they do not have a common identifier.</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="data-import-and-consolidation.html#cb418-1" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(table_1, table_2)</span>
<span id="cb418-2"><a href="data-import-and-consolidation.html#cb418-2" tabindex="-1"></a>result</span>
<span id="cb418-3"><a href="data-import-and-consolidation.html#cb418-3" tabindex="-1"></a><span class="co">#&gt;      name    surname             address     phone age        sign</span></span>
<span id="cb418-4"><a href="data-import-and-consolidation.html#cb418-4" tabindex="-1"></a><span class="co">#&gt; 1 Jhasury     Campos  Jr. los campos 471 976567325  21       Aries</span></span>
<span id="cb418-5"><a href="data-import-and-consolidation.html#cb418-5" tabindex="-1"></a><span class="co">#&gt; 2  Thomas   Gonzales  Av. Casuarinas 142 956732587  24   Capricorn</span></span>
<span id="cb418-6"><a href="data-import-and-consolidation.html#cb418-6" tabindex="-1"></a><span class="co">#&gt; 3  Andres   Santiago                &lt;NA&gt; 961445664  19 Sagittarius</span></span>
<span id="cb418-7"><a href="data-import-and-consolidation.html#cb418-7" tabindex="-1"></a><span class="co">#&gt; 4   Josep Villaverde Av. Tupac Amaru 164 987786453  12       Libra</span></span></code></pre></div>
<p>or joining by rows like this:</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="data-import-and-consolidation.html#cb419-1" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(table_1, table_3)</span>
<span id="cb419-2"><a href="data-import-and-consolidation.html#cb419-2" tabindex="-1"></a>result</span>
<span id="cb419-3"><a href="data-import-and-consolidation.html#cb419-3" tabindex="-1"></a><span class="co">#&gt;      name    surname             address     phone</span></span>
<span id="cb419-4"><a href="data-import-and-consolidation.html#cb419-4" tabindex="-1"></a><span class="co">#&gt; 1 Jhasury     Campos  Jr. los campos 471 976567325</span></span>
<span id="cb419-5"><a href="data-import-and-consolidation.html#cb419-5" tabindex="-1"></a><span class="co">#&gt; 2  Thomas   Gonzales  Av. Casuarinas 142 956732587</span></span>
<span id="cb419-6"><a href="data-import-and-consolidation.html#cb419-6" tabindex="-1"></a><span class="co">#&gt; 3  Andres   Santiago                &lt;NA&gt; 961445664</span></span>
<span id="cb419-7"><a href="data-import-and-consolidation.html#cb419-7" tabindex="-1"></a><span class="co">#&gt; 4   Josep Villaverde Av. Tupac Amaru 164 987786453</span></span>
<span id="cb419-8"><a href="data-import-and-consolidation.html#cb419-8" tabindex="-1"></a><span class="co">#&gt; 5  Thomas   Gonzales  Av. Casuarinas 142 956732587</span></span>
<span id="cb419-9"><a href="data-import-and-consolidation.html#cb419-9" tabindex="-1"></a><span class="co">#&gt; 6  Andres   Santiago                &lt;NA&gt; 961445664</span></span></code></pre></div>
</div>
</div>
</div>
<div id="web-scraping" class="section level2 hasAnchor" number="10.5">
<h2><span class="header-section-number">10.5</span> Web Scraping<a href="data-import-and-consolidation.html#web-scraping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Web Scraping is the process of extracting data from a website. We will use it when we need to extract data directly from tables that are presented on websites. For this we will use the <code>rvest</code> library, included in the <code>tidyverse</code> library.</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="data-import-and-consolidation.html#cb420-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb420-2"><a href="data-import-and-consolidation.html#cb420-2" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code></pre></div>
<blockquote>
<p><strong>Important</strong>: When scraping websites, always respect the site’s <code>robots.txt</code> file and terms of service. Avoid making excessive requests that could overload servers. For commercial use, consider whether the data is licensed or requires permission.</p>
</blockquote>
<p>The function we will use the most will be <code>read_html()</code> and as an argument we will place the url of the web from where we want to extract the data. We are not talking about a url that downloads a text file but a web page like this:</p>
<p><img src="assets/images/05-wrangling/hispanic-countries.png" alt="Wikipedia table of Hispanic countries by population" width="80%" style="display: block; margin: auto;" /></p>
<p>Thus, we will use <code>read_html()</code> to store all the web html and then little by little access the table data in R.</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="data-import-and-consolidation.html#cb421-1" tabindex="-1"></a>html_data <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">&quot;https://es.wikipedia.org/wiki/Anexo:Pa%C3%ADses_hispanos_por_poblaci%C3%B3n&quot;</span>)</span>
<span id="cb421-2"><a href="data-import-and-consolidation.html#cb421-2" tabindex="-1"></a></span>
<span id="cb421-3"><a href="data-import-and-consolidation.html#cb421-3" tabindex="-1"></a>html_data</span>
<span id="cb421-4"><a href="data-import-and-consolidation.html#cb421-4" tabindex="-1"></a><span class="co">#&gt; {html_document}</span></span>
<span id="cb421-5"><a href="data-import-and-consolidation.html#cb421-5" tabindex="-1"></a><span class="co">#&gt; &lt;html class=&quot;client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-1 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-enabled skin-theme-clientpref-day vector-sticky-header-enabled vector-toc-available&quot; lang=&quot;es&quot; dir=&quot;ltr&quot;&gt;</span></span>
<span id="cb421-6"><a href="data-import-and-consolidation.html#cb421-6" tabindex="-1"></a><span class="co">#&gt; [1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8 ...</span></span>
<span id="cb421-7"><a href="data-import-and-consolidation.html#cb421-7" tabindex="-1"></a><span class="co">#&gt; [2] &lt;body class=&quot;skin--responsive skin-vector skin-vector-search-vue mediawik ...</span></span></code></pre></div>
<p>Now that we have the data stored in the object we have to go looking for the data, doing scraping. For this we will use the <code>html_nodes("table")</code> function to access the “table” node.</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="data-import-and-consolidation.html#cb422-1" tabindex="-1"></a>web_tables <span class="ot">&lt;-</span> html_data <span class="sc">|&gt;</span> </span>
<span id="cb422-2"><a href="data-import-and-consolidation.html#cb422-2" tabindex="-1"></a>  <span class="fu">html_elements</span>(<span class="st">&quot;table&quot;</span>)</span></code></pre></div>
<p>Finally, we have to go index by index looking for the table that interests us. To give it table format we will use <code>html_table</code>. In this case we will use double brackets because it is a list of lists and the <code>setNames()</code> function to change the name of the columns.</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="data-import-and-consolidation.html#cb423-1" tabindex="-1"></a><span class="co"># We format as table and store in raw_table</span></span>
<span id="cb423-2"><a href="data-import-and-consolidation.html#cb423-2" tabindex="-1"></a>raw_table <span class="ot">&lt;-</span> web_tables[[<span class="dv">1</span>]] <span class="sc">|&gt;</span> </span>
<span id="cb423-3"><a href="data-import-and-consolidation.html#cb423-3" tabindex="-1"></a>  <span class="fu">html_table</span>()</span>
<span id="cb423-4"><a href="data-import-and-consolidation.html#cb423-4" tabindex="-1"></a></span>
<span id="cb423-5"><a href="data-import-and-consolidation.html#cb423-5" tabindex="-1"></a><span class="co"># Change header names</span></span>
<span id="cb423-6"><a href="data-import-and-consolidation.html#cb423-6" tabindex="-1"></a>raw_table <span class="ot">&lt;-</span> raw_table <span class="sc">|&gt;</span> </span>
<span id="cb423-7"><a href="data-import-and-consolidation.html#cb423-7" tabindex="-1"></a>  <span class="fu">setNames</span>(</span>
<span id="cb423-8"><a href="data-import-and-consolidation.html#cb423-8" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;N&quot;</span>, <span class="st">&quot;country&quot;</span>, <span class="st">&quot;population&quot;</span>, <span class="st">&quot;pop_prop&quot;</span>, <span class="st">&quot;avg_change&quot;</span>, <span class="st">&quot;link&quot;</span>)</span>
<span id="cb423-9"><a href="data-import-and-consolidation.html#cb423-9" tabindex="-1"></a>  )</span>
<span id="cb423-10"><a href="data-import-and-consolidation.html#cb423-10" tabindex="-1"></a></span>
<span id="cb423-11"><a href="data-import-and-consolidation.html#cb423-11" tabindex="-1"></a><span class="co"># Convert to tibble</span></span>
<span id="cb423-12"><a href="data-import-and-consolidation.html#cb423-12" tabindex="-1"></a>raw_table <span class="ot">&lt;-</span> raw_table <span class="sc">|&gt;</span> </span>
<span id="cb423-13"><a href="data-import-and-consolidation.html#cb423-13" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb423-14"><a href="data-import-and-consolidation.html#cb423-14" tabindex="-1"></a></span>
<span id="cb423-15"><a href="data-import-and-consolidation.html#cb423-15" tabindex="-1"></a><span class="co"># Report first rows</span></span>
<span id="cb423-16"><a href="data-import-and-consolidation.html#cb423-16" tabindex="-1"></a>raw_table <span class="sc">|&gt;</span> </span>
<span id="cb423-17"><a href="data-import-and-consolidation.html#cb423-17" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span>
<span id="cb423-18"><a href="data-import-and-consolidation.html#cb423-18" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb423-19"><a href="data-import-and-consolidation.html#cb423-19" tabindex="-1"></a><span class="co">#&gt;   N     country                                                                 </span></span>
<span id="cb423-20"><a href="data-import-and-consolidation.html#cb423-20" tabindex="-1"></a><span class="co">#&gt;   &lt;lgl&gt; &lt;chr&gt;                                                                   </span></span>
<span id="cb423-21"><a href="data-import-and-consolidation.html#cb423-21" tabindex="-1"></a><span class="co">#&gt; 1 NA    Este artículo o sección se encuentra desactualizado.La información sumi…</span></span></code></pre></div>
<p>We already have our data imported and we could already start exploring its content in detail.</p>
</div>
<div id="exercises-15" class="section level2 hasAnchor" number="10.6">
<h2><span class="header-section-number">10.6</span> Exercises<a href="data-import-and-consolidation.html#exercises-15" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For the following exercises we will use objects from the <strong>Lahman</strong> library, which contains US baseball player data. Run the following Script before starting to solve the exercises.</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="data-import-and-consolidation.html#cb424-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;Lahman&quot;</span>)</span>
<span id="cb424-2"><a href="data-import-and-consolidation.html#cb424-2" tabindex="-1"></a><span class="fu">library</span>(Lahman)</span>
<span id="cb424-3"><a href="data-import-and-consolidation.html#cb424-3" tabindex="-1"></a></span>
<span id="cb424-4"><a href="data-import-and-consolidation.html#cb424-4" tabindex="-1"></a><span class="co"># Top 10 players of the year 2016</span></span>
<span id="cb424-5"><a href="data-import-and-consolidation.html#cb424-5" tabindex="-1"></a>top_players <span class="ot">&lt;-</span> Batting <span class="sc">|&gt;</span> </span>
<span id="cb424-6"><a href="data-import-and-consolidation.html#cb424-6" tabindex="-1"></a>  <span class="fu">filter</span>(yearID <span class="sc">==</span> <span class="dv">2016</span>) <span class="sc">|&gt;</span></span>
<span id="cb424-7"><a href="data-import-and-consolidation.html#cb424-7" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(HR)) <span class="sc">|&gt;</span>    <span class="co"># sorted by number of &quot;Home run&quot;</span></span>
<span id="cb424-8"><a href="data-import-and-consolidation.html#cb424-8" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)    <span class="co"># Take from row 1 to 10</span></span>
<span id="cb424-9"><a href="data-import-and-consolidation.html#cb424-9" tabindex="-1"></a></span>
<span id="cb424-10"><a href="data-import-and-consolidation.html#cb424-10" tabindex="-1"></a>top_players <span class="ot">&lt;-</span> top_players <span class="sc">|&gt;</span> <span class="fu">as_tibble</span>()</span>
<span id="cb424-11"><a href="data-import-and-consolidation.html#cb424-11" tabindex="-1"></a></span>
<span id="cb424-12"><a href="data-import-and-consolidation.html#cb424-12" tabindex="-1"></a><span class="co"># List of all baseball players from recent years</span></span>
<span id="cb424-13"><a href="data-import-and-consolidation.html#cb424-13" tabindex="-1"></a>master <span class="ot">&lt;-</span> Master <span class="sc">|&gt;</span> <span class="fu">as_tibble</span>()</span>
<span id="cb424-14"><a href="data-import-and-consolidation.html#cb424-14" tabindex="-1"></a></span>
<span id="cb424-15"><a href="data-import-and-consolidation.html#cb424-15" tabindex="-1"></a><span class="co"># Awards won by players</span></span>
<span id="cb424-16"><a href="data-import-and-consolidation.html#cb424-16" tabindex="-1"></a>awards <span class="ot">&lt;-</span> AwardsPlayers <span class="sc">|&gt;</span></span>
<span id="cb424-17"><a href="data-import-and-consolidation.html#cb424-17" tabindex="-1"></a>  <span class="fu">filter</span>(yearID <span class="sc">==</span> <span class="dv">2016</span>) <span class="sc">|&gt;</span> </span>
<span id="cb424-18"><a href="data-import-and-consolidation.html#cb424-18" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code></pre></div>
<ol start="92" style="list-style-type: decimal">
<li>Using the <code>top_players</code> and <code>Master</code> datasets, join them to retrieve the <code>playerID</code>, first name, last name, and home runs (<code>HR</code>) for the top 10 players of 2016.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="data-import-and-consolidation.html#cb425-1" tabindex="-1"></a>top_10 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(top_players, master, <span class="at">by =</span> <span class="st">&quot;playerID&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb425-2"><a href="data-import-and-consolidation.html#cb425-2" tabindex="-1"></a>  <span class="fu">select</span>(playerID, nameFirst, nameLast, HR)</span>
<span id="cb425-3"><a href="data-import-and-consolidation.html#cb425-3" tabindex="-1"></a></span>
<span id="cb425-4"><a href="data-import-and-consolidation.html#cb425-4" tabindex="-1"></a>top_10</span></code></pre></div>
</details>
<ol start="93" style="list-style-type: decimal">
<li>Identify the <strong>intersection</strong> of top players and award winners. List the ID and names of the top 10 players from 2016 who also won at least one award that year.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="data-import-and-consolidation.html#cb426-1" tabindex="-1"></a><span class="fu">semi_join</span>(top_10, awards, <span class="at">by =</span> <span class="st">&quot;playerID&quot;</span>)</span></code></pre></div>
</details>
<ol start="94" style="list-style-type: decimal">
<li>Find the players who won awards in 2016 but did <strong>not</strong> make it into the top 10 list. Report their IDs and names.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="data-import-and-consolidation.html#cb427-1" tabindex="-1"></a><span class="co"># First we calculate all prizes of those who are not top 10:</span></span>
<span id="cb427-2"><a href="data-import-and-consolidation.html#cb427-2" tabindex="-1"></a>non_top_award_ids <span class="ot">&lt;-</span> <span class="fu">anti_join</span>(awards, top_10, <span class="at">by =</span> <span class="st">&quot;playerID&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb427-3"><a href="data-import-and-consolidation.html#cb427-3" tabindex="-1"></a>  <span class="fu">select</span>(playerID)</span>
<span id="cb427-4"><a href="data-import-and-consolidation.html#cb427-4" tabindex="-1"></a></span>
<span id="cb427-5"><a href="data-import-and-consolidation.html#cb427-5" tabindex="-1"></a><span class="co"># As a player could have obtained several prizes we obtain unique values</span></span>
<span id="cb427-6"><a href="data-import-and-consolidation.html#cb427-6" tabindex="-1"></a>non_top_award_ids <span class="ot">&lt;-</span> <span class="fu">unique</span>(non_top_award_ids)</span>
<span id="cb427-7"><a href="data-import-and-consolidation.html#cb427-7" tabindex="-1"></a></span>
<span id="cb427-8"><a href="data-import-and-consolidation.html#cb427-8" tabindex="-1"></a><span class="co"># Then we cross with the master to obtain the names</span></span>
<span id="cb427-9"><a href="data-import-and-consolidation.html#cb427-9" tabindex="-1"></a>other_names <span class="ot">&lt;-</span> <span class="fu">left_join</span>(non_top_award_ids, master, <span class="at">by =</span> <span class="st">&quot;playerID&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb427-10"><a href="data-import-and-consolidation.html#cb427-10" tabindex="-1"></a>  <span class="fu">select</span>(playerID, nameFirst, nameLast)</span>
<span id="cb427-11"><a href="data-import-and-consolidation.html#cb427-11" tabindex="-1"></a></span>
<span id="cb427-12"><a href="data-import-and-consolidation.html#cb427-12" tabindex="-1"></a>other_names</span></code></pre></div>
</details>
<ol start="95" style="list-style-type: decimal">
<li>Scrape the MLB payroll data from <code>http://www.stevetheump.com/Payrolls.htm</code>. Store the entire page html, extract the tables, and specifically isolate the fourth table (<code>node 4</code>), formatting it as a data frame.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="data-import-and-consolidation.html#cb428-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;http://www.stevetheump.com/Payrolls.htm&quot;</span></span>
<span id="cb428-2"><a href="data-import-and-consolidation.html#cb428-2" tabindex="-1"></a>html <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span>
<span id="cb428-3"><a href="data-import-and-consolidation.html#cb428-3" tabindex="-1"></a></span>
<span id="cb428-4"><a href="data-import-and-consolidation.html#cb428-4" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> html <span class="sc">|&gt;</span> </span>
<span id="cb428-5"><a href="data-import-and-consolidation.html#cb428-5" tabindex="-1"></a>  <span class="fu">html_elements</span>(<span class="st">&quot;table&quot;</span>)</span>
<span id="cb428-6"><a href="data-import-and-consolidation.html#cb428-6" tabindex="-1"></a></span>
<span id="cb428-7"><a href="data-import-and-consolidation.html#cb428-7" tabindex="-1"></a>nodes[[<span class="dv">4</span>]] <span class="sc">|&gt;</span> </span>
<span id="cb428-8"><a href="data-import-and-consolidation.html#cb428-8" tabindex="-1"></a>  <span class="fu">html_table</span>()</span></code></pre></div>
</details>
<ol start="96" style="list-style-type: decimal">
<li>Using the scraped tables, prepare the 2019 payroll (node 4) and 2018 payroll (node 5) data. Standardize the column names to <code>team</code>, <code>payroll_2019</code>, and <code>payroll_2018</code> respectively. Finally, perform a <strong>full join</strong> to combine these datasets by team name.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="data-import-and-consolidation.html#cb429-1" tabindex="-1"></a>payroll_2019 <span class="ot">&lt;-</span> nodes[[<span class="dv">4</span>]] <span class="sc">|&gt;</span> </span>
<span id="cb429-2"><a href="data-import-and-consolidation.html#cb429-2" tabindex="-1"></a>  <span class="fu">html_table</span>()</span>
<span id="cb429-3"><a href="data-import-and-consolidation.html#cb429-3" tabindex="-1"></a></span>
<span id="cb429-4"><a href="data-import-and-consolidation.html#cb429-4" tabindex="-1"></a>payroll_2018 <span class="ot">&lt;-</span> nodes[[<span class="dv">5</span>]] <span class="sc">|&gt;</span> </span>
<span id="cb429-5"><a href="data-import-and-consolidation.html#cb429-5" tabindex="-1"></a>  <span class="fu">html_table</span>()</span>
<span id="cb429-6"><a href="data-import-and-consolidation.html#cb429-6" tabindex="-1"></a></span>
<span id="cb429-7"><a href="data-import-and-consolidation.html#cb429-7" tabindex="-1"></a><span class="do">####### Payroll 2019: ################</span></span>
<span id="cb429-8"><a href="data-import-and-consolidation.html#cb429-8" tabindex="-1"></a><span class="co">#We eliminate row 15 which is the league average:</span></span>
<span id="cb429-9"><a href="data-import-and-consolidation.html#cb429-9" tabindex="-1"></a>payroll_2019 <span class="ot">&lt;-</span> payroll_2019[<span class="sc">-</span><span class="dv">15</span>, ]</span>
<span id="cb429-10"><a href="data-import-and-consolidation.html#cb429-10" tabindex="-1"></a></span>
<span id="cb429-11"><a href="data-import-and-consolidation.html#cb429-11" tabindex="-1"></a><span class="co">#We filter the requested columns:</span></span>
<span id="cb429-12"><a href="data-import-and-consolidation.html#cb429-12" tabindex="-1"></a>payroll_2019 <span class="ot">&lt;-</span> payroll_2019 <span class="sc">|&gt;</span> </span>
<span id="cb429-13"><a href="data-import-and-consolidation.html#cb429-13" tabindex="-1"></a>  <span class="fu">select</span>(X2, X4) <span class="sc">|&gt;</span> </span>
<span id="cb429-14"><a href="data-import-and-consolidation.html#cb429-14" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">team =</span> X2, <span class="at">payroll_2019 =</span> X4)</span>
<span id="cb429-15"><a href="data-import-and-consolidation.html#cb429-15" tabindex="-1"></a></span>
<span id="cb429-16"><a href="data-import-and-consolidation.html#cb429-16" tabindex="-1"></a><span class="co"># We eliminate row 1 since it is the source header</span></span>
<span id="cb429-17"><a href="data-import-and-consolidation.html#cb429-17" tabindex="-1"></a>payroll_2019 <span class="ot">&lt;-</span> payroll_2019[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb429-18"><a href="data-import-and-consolidation.html#cb429-18" tabindex="-1"></a></span>
<span id="cb429-19"><a href="data-import-and-consolidation.html#cb429-19" tabindex="-1"></a><span class="do">####### Payroll 2018: ################</span></span>
<span id="cb429-20"><a href="data-import-and-consolidation.html#cb429-20" tabindex="-1"></a><span class="co"># We select the two columns that interest us and </span></span>
<span id="cb429-21"><a href="data-import-and-consolidation.html#cb429-21" tabindex="-1"></a><span class="co">#change name to headers</span></span>
<span id="cb429-22"><a href="data-import-and-consolidation.html#cb429-22" tabindex="-1"></a>payroll_2018 <span class="ot">&lt;-</span> payroll_2018 <span class="sc">|&gt;</span> </span>
<span id="cb429-23"><a href="data-import-and-consolidation.html#cb429-23" tabindex="-1"></a>  <span class="fu">select</span>(Team, Payroll) <span class="sc">|&gt;</span> </span>
<span id="cb429-24"><a href="data-import-and-consolidation.html#cb429-24" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">team =</span> Team, <span class="at">payroll_2018 =</span> Payroll)</span>
<span id="cb429-25"><a href="data-import-and-consolidation.html#cb429-25" tabindex="-1"></a></span>
<span id="cb429-26"><a href="data-import-and-consolidation.html#cb429-26" tabindex="-1"></a><span class="do">####### Full join: ################</span></span>
<span id="cb429-27"><a href="data-import-and-consolidation.html#cb429-27" tabindex="-1"></a><span class="fu">full_join</span>(payroll_2018, payroll_2019, <span class="at">by =</span> <span class="st">&quot;team&quot;</span>)</span></code></pre></div>
</details>

</div>
</div>



<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-leek2015" class="csl-entry">
Leek, Jeff. 2015. <em>The Elements of Data Analytic</em>. Leanpub. <a href="https://leanpub.com/datastyle">https://leanpub.com/datastyle</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": true,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": null
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": null,
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
