<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Gapminder | Data Science with R</title>
  <meta name="description" content="Theory and practice to enter the world of data analysis and predictions with R, by Daniel Paredes" />
  <meta name="generator" content="bookdown 0.46 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Gapminder | Data Science with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Theory and practice to enter the world of data analysis and predictions with R, by Daniel Paredes" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Gapminder | Data Science with R" />
  
  <meta name="twitter:description" content="Theory and practice to enter the world of data analysis and predictions with R, by Daniel Paredes" />
  

<meta name="author" content="Author: Mg. Daniel Paredes Inilupu" />


<meta name="date" content="2025-12-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ggplot-and-dplyr.html"/>
<link rel="next" href="introduction-to-probabilities.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics: Sin Vista -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VJJ963010J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VJJ963010J');
</script>

<!-- Global site tag (gtag.js) - Google Analytics: Vista -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165839710-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165839710-1');
</script>

<!-- Global site tag (gtag.js) - Google Analytics: Agentedec4mbio -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-17876479-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-17876479-1');
</script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html"><i class="fa fa-check"></i>Acknowledgments</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#why-r"><i class="fa fa-check"></i>Why R?</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#installing-r"><i class="fa fa-check"></i>Installing R</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#installing-rstudio"><i class="fa fa-check"></i>Installing RStudio</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#rstudio-sections"><i class="fa fa-check"></i>RStudio Sections</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#testing-rstudio"><i class="fa fa-check"></i>Testing RStudio</a></li>
</ul></li>
<li class="part"><span><b>I Fundamentals and Key Tools</b></span></li>
<li class="chapter" data-level="1" data-path="objects.html"><a href="objects.html"><i class="fa fa-check"></i><b>1</b> Objects</a>
<ul>
<li class="chapter" data-level="1.1" data-path="objects.html"><a href="objects.html#what-are-objects-in-r"><i class="fa fa-check"></i><b>1.1</b> What are objects in R?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="objects.html"><a href="objects.html#r-as-an-object-oriented-language"><i class="fa fa-check"></i><b>1.1.1</b> R as an object-oriented language</a></li>
<li class="chapter" data-level="1.1.2" data-path="objects.html"><a href="objects.html#the-power-of-abstraction"><i class="fa fa-check"></i><b>1.1.2</b> The power of abstraction</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="objects.html"><a href="objects.html#variables-the-first-objects-on-your-journey"><i class="fa fa-check"></i><b>1.2</b> Variables: The first objects on your journey</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="objects.html"><a href="objects.html#creating-variables-in-r"><i class="fa fa-check"></i><b>1.2.1</b> Creating variables in R</a></li>
<li class="chapter" data-level="1.2.2" data-path="objects.html"><a href="objects.html#operations-with-variables"><i class="fa fa-check"></i><b>1.2.2</b> Operations with variables</a></li>
<li class="chapter" data-level="1.2.3" data-path="objects.html"><a href="objects.html#best-practices-for-naming-variables"><i class="fa fa-check"></i><b>1.2.3</b> Best practices for naming variables</a></li>
<li class="chapter" data-level="1.2.4" data-path="objects.html"><a href="objects.html#data-types"><i class="fa fa-check"></i><b>1.2.4</b> Data types</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="objects.html"><a href="objects.html#object-types-for-complex-data"><i class="fa fa-check"></i><b>1.3</b> Object types for complex data</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="objects.html"><a href="objects.html#vectors-organizing-information-of-the-same-type"><i class="fa fa-check"></i><b>1.3.1</b> Vectors: organizing information of the same type</a></li>
<li class="chapter" data-level="1.3.2" data-path="objects.html"><a href="objects.html#lists-grouping-objects-of-different-types"><i class="fa fa-check"></i><b>1.3.2</b> Lists: grouping objects of different types</a></li>
<li class="chapter" data-level="1.3.3" data-path="objects.html"><a href="objects.html#matrices-organizing-data-in-rows-and-columns"><i class="fa fa-check"></i><b>1.3.3</b> Matrices: organizing data in rows and columns</a></li>
<li class="chapter" data-level="1.3.4" data-path="objects.html"><a href="objects.html#arrays-multidimensional-matrices"><i class="fa fa-check"></i><b>1.3.4</b> Arrays: multidimensional matrices</a></li>
<li class="chapter" data-level="1.3.5" data-path="objects.html"><a href="objects.html#factors-representing-categorical-data"><i class="fa fa-check"></i><b>1.3.5</b> Factors: representing categorical data</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="objects.html"><a href="objects.html#the-universe-of-objects-in-r"><i class="fa fa-check"></i><b>1.4</b> The Universe of Objects in R</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="objects.html"><a href="objects.html#philosophy-of-objects-in-r"><i class="fa fa-check"></i><b>1.4.1</b> Philosophy of objects in R</a></li>
<li class="chapter" data-level="1.4.2" data-path="objects.html"><a href="objects.html#comparison-with-other-languages"><i class="fa fa-check"></i><b>1.4.2</b> Comparison with other languages</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="objects.html"><a href="objects.html#exercises"><i class="fa fa-check"></i><b>1.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>2</b> Functions</a>
<ul>
<li class="chapter" data-level="2.1" data-path="functions.html"><a href="functions.html#introduction-to-the-world-of-functions"><i class="fa fa-check"></i><b>2.1</b> Introduction to the world of functions</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="functions.html"><a href="functions.html#what-are-functions"><i class="fa fa-check"></i><b>2.1.1</b> What are functions?</a></li>
<li class="chapter" data-level="2.1.2" data-path="functions.html"><a href="functions.html#why-use-functions"><i class="fa fa-check"></i><b>2.1.2</b> Why use functions?</a></li>
<li class="chapter" data-level="2.1.3" data-path="functions.html"><a href="functions.html#first-functions-exploring-basic-r-functions"><i class="fa fa-check"></i><b>2.1.3</b> First functions: exploring basic R functions</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="functions.html"><a href="functions.html#anatomy-of-a-function"><i class="fa fa-check"></i><b>2.2</b> Anatomy of a function</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="functions.html"><a href="functions.html#arguments-the-ingredients-of-the-function"><i class="fa fa-check"></i><b>2.2.1</b> Arguments: the ingredients of the function</a></li>
<li class="chapter" data-level="2.2.2" data-path="functions.html"><a href="functions.html#body-the-instructions-of-the-function"><i class="fa fa-check"></i><b>2.2.2</b> Body: the instructions of the function</a></li>
<li class="chapter" data-level="2.2.3" data-path="functions.html"><a href="functions.html#return-value-the-result-of-the-function"><i class="fa fa-check"></i><b>2.2.3</b> Return value: the result of the function</a></li>
<li class="chapter" data-level="2.2.4" data-path="functions.html"><a href="functions.html#examples-creating-simple-functions-step-by-step"><i class="fa fa-check"></i><b>2.2.4</b> Examples: creating simple functions step by step</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="functions.html"><a href="functions.html#mastering-the-use-of-functions"><i class="fa fa-check"></i><b>2.3</b> Mastering the use of functions</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="functions.html"><a href="functions.html#functions-with-a-variable-number-of-arguments-...-adapting-to-different-situations"><i class="fa fa-check"></i><b>2.3.1</b> Functions with a variable number of arguments (<code>...</code>): Adapting to different situations</a></li>
<li class="chapter" data-level="2.3.2" data-path="functions.html"><a href="functions.html#variable-scope-local-and-global-variables"><i class="fa fa-check"></i><b>2.3.2</b> Variable scope: local and global variables</a></li>
<li class="chapter" data-level="2.3.3" data-path="functions.html"><a href="functions.html#examples-functions-to-calculate-taxes-discounts-etc."><i class="fa fa-check"></i><b>2.3.3</b> Examples: functions to calculate taxes, discounts, etc.</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="functions.html"><a href="functions.html#higher-order-functions"><i class="fa fa-check"></i><b>2.4</b> Higher-order functions</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="functions.html"><a href="functions.html#lapply-and-sapply-applying-a-function-to-each-element"><i class="fa fa-check"></i><b>2.4.1</b> <code>lapply()</code> and <code>sapply()</code>: applying a function to each element</a></li>
<li class="chapter" data-level="2.4.2" data-path="functions.html"><a href="functions.html#apply-applying-a-function-to-rows-or-columns"><i class="fa fa-check"></i><b>2.4.2</b> <code>apply()</code>: applying a function to rows or columns</a></li>
<li class="chapter" data-level="2.4.3" data-path="functions.html"><a href="functions.html#mapply-applying-a-function-to-multiple-arguments"><i class="fa fa-check"></i><b>2.4.3</b> <code>mapply()</code>: applying a function to multiple arguments</a></li>
<li class="chapter" data-level="2.4.4" data-path="functions.html"><a href="functions.html#examples-data-analysis-with-higher-order-functions"><i class="fa fa-check"></i><b>2.4.4</b> Examples: data analysis with higher-order functions</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="functions.html"><a href="functions.html#closures-functions-with-memory"><i class="fa fa-check"></i><b>2.5</b> Closures: functions with memory</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="functions.html"><a href="functions.html#concept-functions-that-remember"><i class="fa fa-check"></i><b>2.5.1</b> Concept: functions that “remember”</a></li>
<li class="chapter" data-level="2.5.2" data-path="functions.html"><a href="functions.html#applications-creating-counters-functions-with-internal-state"><i class="fa fa-check"></i><b>2.5.2</b> Applications: creating counters, functions with internal state</a></li>
<li class="chapter" data-level="2.5.3" data-path="functions.html"><a href="functions.html#examples-simulating-a-game-creating-an-operation-history"><i class="fa fa-check"></i><b>2.5.3</b> Examples: simulating a game, creating an operation history</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="functions.html"><a href="functions.html#debugging-and-error-handling-solving-the-mysteries-of-your-code"><i class="fa fa-check"></i><b>2.6</b> Debugging and error handling: solving the mysteries of your code</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="functions.html"><a href="functions.html#identifying-errors-common-error-messages-in-r"><i class="fa fa-check"></i><b>2.6.1</b> Identifying errors: common error messages in R</a></li>
<li class="chapter" data-level="2.6.2" data-path="functions.html"><a href="functions.html#debugging-tools-debug-traceback"><i class="fa fa-check"></i><b>2.6.2</b> Debugging tools: <code>debug()</code>, <code>traceback()</code></a></li>
<li class="chapter" data-level="2.6.3" data-path="functions.html"><a href="functions.html#error-handling-trycatch"><i class="fa fa-check"></i><b>2.6.3</b> Error handling: <code>tryCatch()</code></a></li>
<li class="chapter" data-level="2.6.4" data-path="functions.html"><a href="functions.html#examples-debugging-functions-with-errors-handling-exceptions"><i class="fa fa-check"></i><b>2.6.4</b> Examples: debugging functions with errors, handling exceptions</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="functions.html"><a href="functions.html#exercises-1"><i class="fa fa-check"></i><b>2.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>3</b> Data Frames</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-frames.html"><a href="data-frames.html#introduction-to-data-frames"><i class="fa fa-check"></i><b>3.1</b> Introduction to Data Frames</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-frames.html"><a href="data-frames.html#what-are-data-frames"><i class="fa fa-check"></i><b>3.1.1</b> What are data frames?</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-frames.html"><a href="data-frames.html#why-data-frames"><i class="fa fa-check"></i><b>3.1.2</b> Why data frames?</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-frames.html"><a href="data-frames.html#data-frames-in-action-exploring-information-about-the-united-states"><i class="fa fa-check"></i><b>3.1.3</b> Data Frames in action: exploring information about the United States</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-frames.html"><a href="data-frames.html#creating-data-frames-building-your-database-for-the-move"><i class="fa fa-check"></i><b>3.2</b> Creating Data Frames: Building your database for the move</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-frames.html"><a href="data-frames.html#importing-data-from-files-csv-excel"><i class="fa fa-check"></i><b>3.2.1</b> Importing data from files: CSV, Excel</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-frames.html"><a href="data-frames.html#creating-data-frames-manually"><i class="fa fa-check"></i><b>3.2.2</b> Creating data frames manually</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-frames.html"><a href="data-frames.html#examples"><i class="fa fa-check"></i><b>3.2.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-frames.html"><a href="data-frames.html#exploring-data-frames-discovering-the-secrets-of-your-data"><i class="fa fa-check"></i><b>3.3</b> Exploring Data Frames: Discovering the secrets of your data</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-frames.html"><a href="data-frames.html#accessing-rows-columns-and-cells"><i class="fa fa-check"></i><b>3.3.1</b> Accessing rows, columns, and cells</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-frames.html"><a href="data-frames.html#functions-for-exploring-data-frames"><i class="fa fa-check"></i><b>3.3.2</b> Functions for exploring data frames</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-frames.html"><a href="data-frames.html#examples-exploring-data-frames-with-move-information"><i class="fa fa-check"></i><b>3.3.3</b> Examples: exploring data frames with move information</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-frames.html"><a href="data-frames.html#manipulating-data-frames-transforming-your-data"><i class="fa fa-check"></i><b>3.4</b> Manipulating Data Frames: Transforming your data</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data-frames.html"><a href="data-frames.html#introduction-to-the-pipeline-operator"><i class="fa fa-check"></i><b>3.4.1</b> Introduction to the pipeline operator (<code>|&gt;</code>)</a></li>
<li class="chapter" data-level="3.4.2" data-path="data-frames.html"><a href="data-frames.html#transforming-a-table-with-mutate"><i class="fa fa-check"></i><b>3.4.2</b> Transforming a table with <code>mutate()</code></a></li>
<li class="chapter" data-level="3.4.3" data-path="data-frames.html"><a href="data-frames.html#filtering-data-selecting-cities-that-interest-you"><i class="fa fa-check"></i><b>3.4.3</b> Filtering data: selecting cities that interest you</a></li>
<li class="chapter" data-level="3.4.4" data-path="data-frames.html"><a href="data-frames.html#sorting-data-finding-the-safest-cities"><i class="fa fa-check"></i><b>3.4.4</b> Sorting data: finding the safest cities</a></li>
<li class="chapter" data-level="3.4.5" data-path="data-frames.html"><a href="data-frames.html#aggregating-and-summarizing-data-obtaining-general-overview"><i class="fa fa-check"></i><b>3.4.5</b> Aggregating and summarizing data: obtaining general overview</a></li>
<li class="chapter" data-level="3.4.6" data-path="data-frames.html"><a href="data-frames.html#joining-data-frames-combining-information"><i class="fa fa-check"></i><b>3.4.6</b> Joining data frames: combining information</a></li>
<li class="chapter" data-level="3.4.7" data-path="data-frames.html"><a href="data-frames.html#examples-1"><i class="fa fa-check"></i><b>3.4.7</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="data-frames.html"><a href="data-frames.html#exercises-2"><i class="fa fa-check"></i><b>3.5</b> Exercises</a></li>
<li class="chapter" data-level="3.6" data-path="data-frames.html"><a href="data-frames.html#data-frames-in-plots"><i class="fa fa-check"></i><b>3.6</b> Data frames in plots</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="data-frames.html"><a href="data-frames.html#scatter-plots"><i class="fa fa-check"></i><b>3.6.1</b> Scatter plots</a></li>
<li class="chapter" data-level="3.6.2" data-path="data-frames.html"><a href="data-frames.html#histograms"><i class="fa fa-check"></i><b>3.6.2</b> Histograms</a></li>
<li class="chapter" data-level="3.6.3" data-path="data-frames.html"><a href="data-frames.html#box-plot"><i class="fa fa-check"></i><b>3.6.3</b> Box plot</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="data-frames.html"><a href="data-frames.html#data-interpretation"><i class="fa fa-check"></i><b>3.7</b> Data interpretation</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="data-frames.html"><a href="data-frames.html#quartiles"><i class="fa fa-check"></i><b>3.7.1</b> Quartiles</a></li>
<li class="chapter" data-level="3.7.2" data-path="data-frames.html"><a href="data-frames.html#interpretation-of-box-plot"><i class="fa fa-check"></i><b>3.7.2</b> Interpretation of box plot</a></li>
<li class="chapter" data-level="3.7.3" data-path="data-frames.html"><a href="data-frames.html#examples-2"><i class="fa fa-check"></i><b>3.7.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="data-frames.html"><a href="data-frames.html#exercises-3"><i class="fa fa-check"></i><b>3.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="advanced-techniques.html"><a href="advanced-techniques.html"><i class="fa fa-check"></i><b>4</b> Advanced Techniques</a>
<ul>
<li class="chapter" data-level="4.1" data-path="advanced-techniques.html"><a href="advanced-techniques.html#metaprogramming-writing-code-that-writes-code"><i class="fa fa-check"></i><b>4.1</b> Metaprogramming: writing code that writes code</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="advanced-techniques.html"><a href="advanced-techniques.html#manipulating-expressions-the-art-of-sculpting-code"><i class="fa fa-check"></i><b>4.1.1</b> Manipulating expressions: The art of sculpting code</a></li>
<li class="chapter" data-level="4.1.2" data-path="advanced-techniques.html"><a href="advanced-techniques.html#examples-3"><i class="fa fa-check"></i><b>4.1.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="advanced-techniques.html"><a href="advanced-techniques.html#functional-programming-a-new-paradigm"><i class="fa fa-check"></i><b>4.2</b> Functional programming: a new paradigm</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="advanced-techniques.html"><a href="advanced-techniques.html#basic-principles-of-functional-programming"><i class="fa fa-check"></i><b>4.2.1</b> Basic principles of functional programming</a></li>
<li class="chapter" data-level="4.2.2" data-path="advanced-techniques.html"><a href="advanced-techniques.html#higher-order-functions-in-r"><i class="fa fa-check"></i><b>4.2.2</b> Higher-order functions in R</a></li>
<li class="chapter" data-level="4.2.3" data-path="advanced-techniques.html"><a href="advanced-techniques.html#examples-4"><i class="fa fa-check"></i><b>4.2.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="advanced-techniques.html"><a href="advanced-techniques.html#r6-the-future-of-oop-in-r"><i class="fa fa-check"></i><b>4.3</b> R6: The future of OOP in R</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="advanced-techniques.html"><a href="advanced-techniques.html#the-r6-package-classes-methods-encapsulation-and-inheritance"><i class="fa fa-check"></i><b>4.3.1</b> The R6 package: Classes, methods, encapsulation, and inheritance</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="advanced-techniques.html"><a href="advanced-techniques.html#exercises-4"><i class="fa fa-check"></i><b>4.4</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Data Visualization and Summarization</b></span></li>
<li class="chapter" data-level="5" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html"><i class="fa fa-check"></i><b>5</b> Ggplot and dplyr</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#creating-the-ggplot-object"><i class="fa fa-check"></i><b>5.1</b> Creating the ggplot object</a></li>
<li class="chapter" data-level="5.2" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#aesthetic-mapping-layer"><i class="fa fa-check"></i><b>5.2</b> Aesthetic mapping layer</a></li>
<li class="chapter" data-level="5.3" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#geoms-layer"><i class="fa fa-check"></i><b>5.3</b> Geoms layer</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#tweaking-aes-and-geoms"><i class="fa fa-check"></i><b>5.3.1</b> Tweaking aes and geoms</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#scale-layer"><i class="fa fa-check"></i><b>5.4</b> Scale layer</a></li>
<li class="chapter" data-level="5.5" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#label-title-and-legend-layer"><i class="fa fa-check"></i><b>5.5</b> Label, title and legend layer</a></li>
<li class="chapter" data-level="5.6" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#reference-lines"><i class="fa fa-check"></i><b>5.6</b> Reference lines</a></li>
<li class="chapter" data-level="5.7" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#changing-the-plot-style"><i class="fa fa-check"></i><b>5.7</b> Changing the plot style</a></li>
<li class="chapter" data-level="5.8" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#summarizing-data-with-dplyr"><i class="fa fa-check"></i><b>5.8</b> Summarizing data with dplyr</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#summarize-function"><i class="fa fa-check"></i><b>5.8.1</b> Summarize function</a></li>
<li class="chapter" data-level="5.8.2" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#group-by-function"><i class="fa fa-check"></i><b>5.8.2</b> Group By Function</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#exercises-5"><i class="fa fa-check"></i><b>5.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="gapminder.html"><a href="gapminder.html"><i class="fa fa-check"></i><b>6</b> Gapminder</a>
<ul>
<li class="chapter" data-level="6.1" data-path="gapminder.html"><a href="gapminder.html#initial-gapminder-plots"><i class="fa fa-check"></i><b>6.1</b> Initial gapminder plots</a></li>
<li class="chapter" data-level="6.2" data-path="gapminder.html"><a href="gapminder.html#facets"><i class="fa fa-check"></i><b>6.2</b> Facets</a></li>
<li class="chapter" data-level="6.3" data-path="gapminder.html"><a href="gapminder.html#time-series"><i class="fa fa-check"></i><b>6.3</b> Time series</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="gapminder.html"><a href="gapminder.html#individual-time-series"><i class="fa fa-check"></i><b>6.3.1</b> Individual time series</a></li>
<li class="chapter" data-level="6.3.2" data-path="gapminder.html"><a href="gapminder.html#multiple-time-series"><i class="fa fa-check"></i><b>6.3.2</b> Multiple time series</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="gapminder.html"><a href="gapminder.html#exercises-6"><i class="fa fa-check"></i><b>6.4</b> Exercises</a></li>
<li class="chapter" data-level="6.5" data-path="gapminder.html"><a href="gapminder.html#histograms-with-ggplot"><i class="fa fa-check"></i><b>6.5</b> Histograms with ggplot</a></li>
<li class="chapter" data-level="6.6" data-path="gapminder.html"><a href="gapminder.html#box-plots-with-ggplot"><i class="fa fa-check"></i><b>6.6</b> Box plots with ggplot</a></li>
<li class="chapter" data-level="6.7" data-path="gapminder.html"><a href="gapminder.html#comparison-of-distributions"><i class="fa fa-check"></i><b>6.7</b> Comparison of distributions</a></li>
<li class="chapter" data-level="6.8" data-path="gapminder.html"><a href="gapminder.html#exercises-7"><i class="fa fa-check"></i><b>6.8</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>III Statistics</b></span></li>
<li class="chapter" data-level="" data-path="introduction-to-probabilities.html"><a href="introduction-to-probabilities.html"><i class="fa fa-check"></i>Introduction to Probabilities</a></li>
<li class="chapter" data-level="7" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html"><i class="fa fa-check"></i><b>7</b> Discrete Probabilities</a>
<ul>
<li class="chapter" data-level="7.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#calculation-using-the-mathematical-definition"><i class="fa fa-check"></i><b>7.1</b> Calculation using the mathematical definition</a></li>
<li class="chapter" data-level="7.2" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#monte-carlo-simulation-for-discrete-variables"><i class="fa fa-check"></i><b>7.2</b> Monte Carlo Simulation for Discrete Variables</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#other-functions-to-create-vectors"><i class="fa fa-check"></i><b>7.2.1</b> Other functions to create vectors</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#exercises-8"><i class="fa fa-check"></i><b>7.3</b> Exercises</a></li>
<li class="chapter" data-level="7.4" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#combinations-and-permutations"><i class="fa fa-check"></i><b>7.4</b> Combinations and Permutations</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#permutations"><i class="fa fa-check"></i><b>7.4.1</b> Permutations</a></li>
<li class="chapter" data-level="7.4.2" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#combinations"><i class="fa fa-check"></i><b>7.4.2</b> Combinations</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#sufficient-experiments-with-monte-carlo-simulation"><i class="fa fa-check"></i><b>7.5</b> Sufficient Experiments with Monte Carlo Simulation</a></li>
<li class="chapter" data-level="7.6" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#case-birthdays-in-classrooms"><i class="fa fa-check"></i><b>7.6</b> Case: Birthdays in Classrooms</a></li>
<li class="chapter" data-level="7.7" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#exercises-9"><i class="fa fa-check"></i><b>7.7</b> Exercises</a></li>
<li class="chapter" data-level="7.8" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#integrative-exercise"><i class="fa fa-check"></i><b>7.8</b> Integrative Exercise</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#monty-hall-problem"><i class="fa fa-check"></i><b>7.8.1</b> Monty Hall Problem</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html"><i class="fa fa-check"></i><b>8</b> Continuous Probabilities</a>
<ul>
<li class="chapter" data-level="8.1" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#empirical-distribution"><i class="fa fa-check"></i><b>8.1</b> Empirical Distribution</a></li>
<li class="chapter" data-level="8.2" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#theoretical-distribution"><i class="fa fa-check"></i><b>8.2</b> Theoretical Distribution</a></li>
<li class="chapter" data-level="8.3" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#exercises-10"><i class="fa fa-check"></i><b>8.3</b> Exercises</a></li>
<li class="chapter" data-level="8.4" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#monte-carlo-simulation-for-continuous-variables"><i class="fa fa-check"></i><b>8.4</b> Monte Carlo Simulation for Continuous Variables</a></li>
<li class="chapter" data-level="8.5" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#exercises-11"><i class="fa fa-check"></i><b>8.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="statistical-inference.html"><a href="statistical-inference.html"><i class="fa fa-check"></i><b>9</b> Statistical Inference</a>
<ul>
<li class="chapter" data-level="9.1" data-path="statistical-inference.html"><a href="statistical-inference.html#expected-value"><i class="fa fa-check"></i><b>9.1</b> Expected Value</a></li>
<li class="chapter" data-level="9.2" data-path="statistical-inference.html"><a href="statistical-inference.html#central-limit-theorem"><i class="fa fa-check"></i><b>9.2</b> Central Limit Theorem</a></li>
<li class="chapter" data-level="9.3" data-path="statistical-inference.html"><a href="statistical-inference.html#exercises-12"><i class="fa fa-check"></i><b>9.3</b> Exercises</a></li>
<li class="chapter" data-level="9.4" data-path="statistical-inference.html"><a href="statistical-inference.html#parameter-estimation-method"><i class="fa fa-check"></i><b>9.4</b> Parameter Estimation Method</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="statistical-inference.html"><a href="statistical-inference.html#margin-of-error"><i class="fa fa-check"></i><b>9.4.1</b> Margin of Error</a></li>
<li class="chapter" data-level="9.4.2" data-path="statistical-inference.html"><a href="statistical-inference.html#confidence-intervals"><i class="fa fa-check"></i><b>9.4.2</b> Confidence Intervals</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="statistical-inference.html"><a href="statistical-inference.html#spread-estimation"><i class="fa fa-check"></i><b>9.5</b> Spread Estimation</a></li>
<li class="chapter" data-level="9.6" data-path="statistical-inference.html"><a href="statistical-inference.html#estimates-outside-election-polls"><i class="fa fa-check"></i><b>9.6</b> Estimates Outside Election Polls</a></li>
<li class="chapter" data-level="9.7" data-path="statistical-inference.html"><a href="statistical-inference.html#exercises-13"><i class="fa fa-check"></i><b>9.7</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>IV Data Wrangling</b></span></li>
<li class="chapter" data-level="" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="10" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html"><i class="fa fa-check"></i><b>10</b> Data import and consolidation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#importing-from-files"><i class="fa fa-check"></i><b>10.1</b> Importing from files</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#working-directory"><i class="fa fa-check"></i><b>10.1.1</b> Working Directory</a></li>
<li class="chapter" data-level="10.1.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#readr-and-readxl-packages"><i class="fa fa-check"></i><b>10.1.2</b> readr and readxl packages</a></li>
<li class="chapter" data-level="10.1.3" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#importing-files-from-the-internet"><i class="fa fa-check"></i><b>10.1.3</b> Importing files from the internet</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#tidy-data"><i class="fa fa-check"></i><b>10.2</b> Tidy data</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#transforming-to-tidy-data"><i class="fa fa-check"></i><b>10.2.1</b> Transforming to tidy data</a></li>
<li class="chapter" data-level="10.2.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#separate-function"><i class="fa fa-check"></i><b>10.2.2</b> separate function</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#exercises-14"><i class="fa fa-check"></i><b>10.3</b> Exercises</a></li>
<li class="chapter" data-level="10.4" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#joining-tables"><i class="fa fa-check"></i><b>10.4</b> Joining tables</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#join-functions"><i class="fa fa-check"></i><b>10.4.1</b> Join functions</a></li>
<li class="chapter" data-level="10.4.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#joining-without-a-common-identifier"><i class="fa fa-check"></i><b>10.4.2</b> Joining without a common identifier</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#web-scraping"><i class="fa fa-check"></i><b>10.5</b> Web Scraping</a></li>
<li class="chapter" data-level="10.6" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#exercises-15"><i class="fa fa-check"></i><b>10.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html"><i class="fa fa-check"></i><b>11</b> String processing and text mining</a>
<ul>
<li class="chapter" data-level="11.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#basic-functions"><i class="fa fa-check"></i><b>11.1</b> Basic functions</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#replacing-characters"><i class="fa fa-check"></i><b>11.1.1</b> Replacing characters</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#regular-expressions"><i class="fa fa-check"></i><b>11.2</b> Regular expressions</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#alternation"><i class="fa fa-check"></i><b>11.2.1</b> Alternation</a></li>
<li class="chapter" data-level="11.2.2" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#anchoring"><i class="fa fa-check"></i><b>11.2.2</b> Anchoring</a></li>
<li class="chapter" data-level="11.2.3" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#repetitions"><i class="fa fa-check"></i><b>11.2.3</b> Repetitions</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#from-strings-to-dates"><i class="fa fa-check"></i><b>11.3</b> From strings to dates</a></li>
<li class="chapter" data-level="11.4" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#exercises-16"><i class="fa fa-check"></i><b>11.4</b> Exercises</a></li>
<li class="chapter" data-level="11.5" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#text-mining-word-cloud"><i class="fa fa-check"></i><b>11.5</b> Text Mining: Word Cloud</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#importing-data"><i class="fa fa-check"></i><b>11.5.1</b> Importing data</a></li>
<li class="chapter" data-level="11.5.2" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#text-cleaning"><i class="fa fa-check"></i><b>11.5.2</b> Text cleaning</a></li>
<li class="chapter" data-level="11.5.3" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#creating-the-corpus"><i class="fa fa-check"></i><b>11.5.3</b> Creating the Corpus</a></li>
<li class="chapter" data-level="11.5.4" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#nd-data-cleaning"><i class="fa fa-check"></i><b>11.5.4</b> 2nd Data Cleaning</a></li>
<li class="chapter" data-level="11.5.5" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#word-frequency"><i class="fa fa-check"></i><b>11.5.5</b> Word frequency</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#text-mining-sentiment-analysis"><i class="fa fa-check"></i><b>11.6</b> Text Mining: Sentiment Analysis</a></li>
<li class="chapter" data-level="11.7" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#exercises-17"><i class="fa fa-check"></i><b>11.7</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>V Machine learning</b></span></li>
<li class="chapter" data-level="" data-path="introduction-2.html"><a href="introduction-2.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="12" data-path="supervised-learning.html"><a href="supervised-learning.html"><i class="fa fa-check"></i><b>12</b> Supervised Learning</a>
<ul>
<li class="chapter" data-level="12.1" data-path="supervised-learning.html"><a href="supervised-learning.html#classification-and-regression"><i class="fa fa-check"></i><b>12.1</b> Classification and Regression</a></li>
<li class="chapter" data-level="12.2" data-path="supervised-learning.html"><a href="supervised-learning.html#knn-k-nearest-neighbors"><i class="fa fa-check"></i><b>12.2</b> kNN: k-Nearest Neighbors</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="supervised-learning.html"><a href="supervised-learning.html#two-variables-as-input"><i class="fa fa-check"></i><b>12.2.1</b> Two variables as input</a></li>
<li class="chapter" data-level="12.2.2" data-path="supervised-learning.html"><a href="supervised-learning.html#multiple-variables-as-input"><i class="fa fa-check"></i><b>12.2.2</b> Multiple variables as input</a></li>
<li class="chapter" data-level="12.2.3" data-path="supervised-learning.html"><a href="supervised-learning.html#diverse-values-of-k"><i class="fa fa-check"></i><b>12.2.3</b> Diverse values of k</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="supervised-learning.html"><a href="supervised-learning.html#tidymodels-framework"><i class="fa fa-check"></i><b>12.3</b> tidymodels Framework</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="supervised-learning.html"><a href="supervised-learning.html#creation-of-training-and-test-data"><i class="fa fa-check"></i><b>12.3.1</b> Creation of training and test data</a></li>
<li class="chapter" data-level="12.3.2" data-path="supervised-learning.html"><a href="supervised-learning.html#training-our-prediction-algorithm"><i class="fa fa-check"></i><b>12.3.2</b> Training our prediction algorithm</a></li>
<li class="chapter" data-level="12.3.3" data-path="supervised-learning.html"><a href="supervised-learning.html#data-pre-processing-with-recipes"><i class="fa fa-check"></i><b>12.3.3</b> Data Pre-processing with Recipes</a></li>
<li class="chapter" data-level="12.3.4" data-path="supervised-learning.html"><a href="supervised-learning.html#creating-a-workflow"><i class="fa fa-check"></i><b>12.3.4</b> Creating a Workflow</a></li>
<li class="chapter" data-level="12.3.5" data-path="supervised-learning.html"><a href="supervised-learning.html#parameter-tuning-with-cross-validation"><i class="fa fa-check"></i><b>12.3.5</b> Parameter Tuning with Cross-Validation</a></li>
<li class="chapter" data-level="12.3.6" data-path="supervised-learning.html"><a href="supervised-learning.html#finalizing-the-model"><i class="fa fa-check"></i><b>12.3.6</b> Finalizing the Model</a></li>
<li class="chapter" data-level="12.3.7" data-path="supervised-learning.html"><a href="supervised-learning.html#testing-the-prediction-model"><i class="fa fa-check"></i><b>12.3.7</b> Testing the prediction model</a></li>
<li class="chapter" data-level="12.3.8" data-path="supervised-learning.html"><a href="supervised-learning.html#model-evaluation-with-yardstick"><i class="fa fa-check"></i><b>12.3.8</b> Model Evaluation with yardstick</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="supervised-learning.html"><a href="supervised-learning.html#confusion-matrix"><i class="fa fa-check"></i><b>12.4</b> Confusion Matrix</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="supervised-learning.html"><a href="supervised-learning.html#accuracy"><i class="fa fa-check"></i><b>12.4.1</b> Accuracy</a></li>
<li class="chapter" data-level="12.4.2" data-path="supervised-learning.html"><a href="supervised-learning.html#sensitivity"><i class="fa fa-check"></i><b>12.4.2</b> Sensitivity</a></li>
<li class="chapter" data-level="12.4.3" data-path="supervised-learning.html"><a href="supervised-learning.html#specificity"><i class="fa fa-check"></i><b>12.4.3</b> Specificity</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="supervised-learning.html"><a href="supervised-learning.html#exercises-18"><i class="fa fa-check"></i><b>12.5</b> Exercises</a></li>
<li class="chapter" data-level="12.6" data-path="supervised-learning.html"><a href="supervised-learning.html#simple-linear-regression"><i class="fa fa-check"></i><b>12.6</b> Simple Linear Regression</a></li>
<li class="chapter" data-level="12.7" data-path="supervised-learning.html"><a href="supervised-learning.html#multiple-linear-regression"><i class="fa fa-check"></i><b>12.7</b> Multiple Linear Regression</a></li>
<li class="chapter" data-level="12.8" data-path="supervised-learning.html"><a href="supervised-learning.html#standard-method-for-evaluating-accuracy"><i class="fa fa-check"></i><b>12.8</b> Standard Method for Evaluating Accuracy</a></li>
<li class="chapter" data-level="12.9" data-path="supervised-learning.html"><a href="supervised-learning.html#selection-of-the-most-optimal-model"><i class="fa fa-check"></i><b>12.9</b> Selection of the Most Optimal Model</a>
<ul>
<li class="chapter" data-level="12.9.1" data-path="supervised-learning.html"><a href="supervised-learning.html#k-nearest-neighbors-model"><i class="fa fa-check"></i><b>12.9.1</b> k-Nearest Neighbors Model</a></li>
<li class="chapter" data-level="12.9.2" data-path="supervised-learning.html"><a href="supervised-learning.html#generalized-linear-model---glm"><i class="fa fa-check"></i><b>12.9.2</b> Generalized Linear Model - GLM</a></li>
<li class="chapter" data-level="12.9.3" data-path="supervised-learning.html"><a href="supervised-learning.html#random-forest-model"><i class="fa fa-check"></i><b>12.9.3</b> Random Forest Model</a></li>
<li class="chapter" data-level="12.9.4" data-path="supervised-learning.html"><a href="supervised-learning.html#support-vector-machine-model---svm"><i class="fa fa-check"></i><b>12.9.4</b> Support Vector Machine Model - SVM</a></li>
<li class="chapter" data-level="12.9.5" data-path="supervised-learning.html"><a href="supervised-learning.html#naive-bayes-model"><i class="fa fa-check"></i><b>12.9.5</b> Naive Bayes Model</a></li>
<li class="chapter" data-level="12.9.6" data-path="supervised-learning.html"><a href="supervised-learning.html#model-comparison"><i class="fa fa-check"></i><b>12.9.6</b> Model Comparison</a></li>
<li class="chapter" data-level="12.9.7" data-path="supervised-learning.html"><a href="supervised-learning.html#predicting-using-the-best-model"><i class="fa fa-check"></i><b>12.9.7</b> Predicting using the best model</a></li>
</ul></li>
<li class="chapter" data-level="12.10" data-path="supervised-learning.html"><a href="supervised-learning.html#exercises-19"><i class="fa fa-check"></i><b>12.10</b> Exercises</a></li>
<li class="chapter" data-level="12.11" data-path="supervised-learning.html"><a href="supervised-learning.html#ethics-bias-in-algorithmic-decision-making"><i class="fa fa-check"></i><b>12.11</b> Ethics: Bias in Algorithmic Decision Making</a>
<ul>
<li class="chapter" data-level="12.11.1" data-path="supervised-learning.html"><a href="supervised-learning.html#the-risk-of-proxy-variables"><i class="fa fa-check"></i><b>12.11.1</b> The Risk of Proxy Variables</a></li>
<li class="chapter" data-level="12.11.2" data-path="supervised-learning.html"><a href="supervised-learning.html#feedback-loops"><i class="fa fa-check"></i><b>12.11.2</b> Feedback Loops</a></li>
<li class="chapter" data-level="12.11.3" data-path="supervised-learning.html"><a href="supervised-learning.html#what-can-we-do"><i class="fa fa-check"></i><b>12.11.3</b> What can we do?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html"><i class="fa fa-check"></i><b>13</b> Unsupervised Learning</a>
<ul>
<li class="chapter" data-level="13.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#k-means-clustering"><i class="fa fa-check"></i><b>13.1</b> K-Means Clustering</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-with-k-2"><i class="fa fa-check"></i><b>13.1.1</b> Clustering with k = 2</a></li>
<li class="chapter" data-level="13.1.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-with-k-3"><i class="fa fa-check"></i><b>13.1.2</b> Clustering with k &gt;= 3</a></li>
<li class="chapter" data-level="13.1.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#determination-of-optimal-clusters"><i class="fa fa-check"></i><b>13.1.3</b> Determination of Optimal Clusters</a></li>
<li class="chapter" data-level="13.1.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#k-means-for-more-than-2-variables"><i class="fa fa-check"></i><b>13.1.4</b> k-means for more than 2 variables</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#hierarchical-clustering"><i class="fa fa-check"></i><b>13.2</b> Hierarchical Clustering</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-with-two-variables"><i class="fa fa-check"></i><b>13.2.1</b> Clustering with two variables</a></li>
<li class="chapter" data-level="13.2.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#determination-of-optimal-clusters-1"><i class="fa fa-check"></i><b>13.2.2</b> Determination of Optimal Clusters</a></li>
<li class="chapter" data-level="13.2.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#obtain-the-grouping"><i class="fa fa-check"></i><b>13.2.3</b> Obtain the grouping</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#dimensionality-reduction"><i class="fa fa-check"></i><b>13.3</b> Dimensionality Reduction</a></li>
<li class="chapter" data-level="13.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#exercises-20"><i class="fa fa-check"></i><b>13.4</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>VI Real Cases</b></span></li>
<li class="chapter" data-level="" data-path="introduction-3.html"><a href="introduction-3.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="14" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html"><i class="fa fa-check"></i><b>14</b> Case Study: Real Estate Market Analysis</a>
<ul>
<li class="chapter" data-level="14.1" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#objectives"><i class="fa fa-check"></i><b>14.1</b> Objectives</a></li>
<li class="chapter" data-level="14.2" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#loading-libraries"><i class="fa fa-check"></i><b>14.2</b> Loading Libraries</a></li>
<li class="chapter" data-level="14.3" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#exploring-the-data"><i class="fa fa-check"></i><b>14.3</b> Exploring the Data</a></li>
<li class="chapter" data-level="14.4" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#data-cleaning"><i class="fa fa-check"></i><b>14.4</b> Data Cleaning</a></li>
<li class="chapter" data-level="14.5" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#exploratory-analysis"><i class="fa fa-check"></i><b>14.5</b> Exploratory Analysis</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#market-volume-over-time"><i class="fa fa-check"></i><b>14.5.1</b> Market Volume Over Time</a></li>
<li class="chapter" data-level="14.5.2" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#comparing-cities"><i class="fa fa-check"></i><b>14.5.2</b> Comparing Cities</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#creating-indicators"><i class="fa fa-check"></i><b>14.6</b> Creating Indicators</a></li>
<li class="chapter" data-level="14.7" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#conclusions"><i class="fa fa-check"></i><b>14.7</b> Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html"><i class="fa fa-check"></i><b>15</b> Google Analytics from R</a>
<ul>
<li class="chapter" data-level="15.1" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#problem"><i class="fa fa-check"></i><b>15.1</b> Problem</a></li>
<li class="chapter" data-level="15.2" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#access-to-data"><i class="fa fa-check"></i><b>15.2</b> Access to data</a></li>
<li class="chapter" data-level="15.3" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#visualization"><i class="fa fa-check"></i><b>15.3</b> Visualization</a></li>
<li class="chapter" data-level="15.4" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#conclusion"><i class="fa fa-check"></i><b>15.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="genai-intro.html"><a href="genai-intro.html"><i class="fa fa-check"></i><b>16</b> Data Science in the Age of AI</a>
<ul>
<li class="chapter" data-level="16.1" data-path="genai-intro.html"><a href="genai-intro.html#what-is-a-large-language-model"><i class="fa fa-check"></i><b>16.1</b> What is a Large Language Model?</a></li>
<li class="chapter" data-level="16.2" data-path="genai-intro.html"><a href="genai-intro.html#coding-with-ai-the-pair-programmer"><i class="fa fa-check"></i><b>16.2</b> Coding with AI: The “Pair Programmer”</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="genai-intro.html"><a href="genai-intro.html#explaining-complex-code"><i class="fa fa-check"></i><b>16.2.1</b> 1. Explaining Complex Code</a></li>
<li class="chapter" data-level="16.2.2" data-path="genai-intro.html"><a href="genai-intro.html#generating-boilerplate"><i class="fa fa-check"></i><b>16.2.2</b> 2. Generating Boilerplate</a></li>
<li class="chapter" data-level="16.2.3" data-path="genai-intro.html"><a href="genai-intro.html#regex-the-ultimate-use-case"><i class="fa fa-check"></i><b>16.2.3</b> 3. Regex: The Ultimate Use Case</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="genai-intro.html"><a href="genai-intro.html#ethics-risks-in-the-ai-era"><i class="fa fa-check"></i><b>16.3</b> Ethics &amp; Risks in the AI Era</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="genai-intro.html"><a href="genai-intro.html#hallucinations-fabrication"><i class="fa fa-check"></i><b>16.3.1</b> 1. Hallucinations &amp; Fabrication</a></li>
<li class="chapter" data-level="16.3.2" data-path="genai-intro.html"><a href="genai-intro.html#the-reproducibility-crisis"><i class="fa fa-check"></i><b>16.3.2</b> 2. The Reproducibility Crisis</a></li>
<li class="chapter" data-level="16.3.3" data-path="genai-intro.html"><a href="genai-intro.html#data-privacy-ip"><i class="fa fa-check"></i><b>16.3.3</b> 3. Data Privacy &amp; IP</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="genai-api.html"><a href="genai-api.html"><i class="fa fa-check"></i><b>17</b> LLMs as an Analysis Engine</a>
<ul>
<li class="chapter" data-level="17.1" data-path="genai-api.html"><a href="genai-api.html#the-evolution-of-nlp"><i class="fa fa-check"></i><b>17.1</b> The Evolution of NLP</a></li>
<li class="chapter" data-level="17.2" data-path="genai-api.html"><a href="genai-api.html#interacting-with-apis-from-r"><i class="fa fa-check"></i><b>17.2</b> Interacting with APIs from R</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="genai-api.html"><a href="genai-api.html#prerequisite-api-keys"><i class="fa fa-check"></i><b>17.2.1</b> Prerequisite: API Keys</a></li>
<li class="chapter" data-level="17.2.2" data-path="genai-api.html"><a href="genai-api.html#making-a-request"><i class="fa fa-check"></i><b>17.2.2</b> Making a Request</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="genai-api.html"><a href="genai-api.html#zero-shot-classification"><i class="fa fa-check"></i><b>17.3</b> Zero-Shot Classification</a></li>
<li class="chapter" data-level="17.4" data-path="genai-api.html"><a href="genai-api.html#text-cleaning-with-llms"><i class="fa fa-check"></i><b>17.4</b> Text Cleaning with LLMs</a></li>
<li class="chapter" data-level="17.5" data-path="genai-api.html"><a href="genai-api.html#summary"><i class="fa fa-check"></i><b>17.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="ethics-checklist.html"><a href="ethics-checklist.html"><i class="fa fa-check"></i><b>18</b> Appendix A: Responsible AI Checklist</a>
<ul>
<li class="chapter" data-level="18.1" data-path="ethics-checklist.html"><a href="ethics-checklist.html#data-quality-lineage"><i class="fa fa-check"></i><b>18.1</b> 1. Data Quality &amp; lineage</a></li>
<li class="chapter" data-level="18.2" data-path="ethics-checklist.html"><a href="ethics-checklist.html#fairness-bias"><i class="fa fa-check"></i><b>18.2</b> 2. Fairness &amp; Bias</a></li>
<li class="chapter" data-level="18.3" data-path="ethics-checklist.html"><a href="ethics-checklist.html#transparency-explainability"><i class="fa fa-check"></i><b>18.3</b> 3. Transparency &amp; Explainability</a></li>
<li class="chapter" data-level="18.4" data-path="ethics-checklist.html"><a href="ethics-checklist.html#genai-specifics"><i class="fa fa-check"></i><b>18.4</b> 4. GenAI Specifics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="gapminder" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Gapminder<a href="gapminder.html#gapminder" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><a href="https://www.gapminder.org/">The Gapminder Foundation</a><a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a> is a Swedish non-profit organization that promotes global development through the use of statistics that can help reduce common myths and sensationalist stories about global health and economics. An important selection of data is already loaded in the <code>dslabs</code> library in the <code>gapminder</code> data frame. Our case/problem now will be to answer these two questions:</p>
<blockquote>
<ol style="list-style-type: decimal">
<li>Is it still reasonable to divide the world between Western countries* and developing countries?</li>
<li>Is it true that every day we are worse off and rich countries get richer while poor countries get poorer?</li>
</ol>
</blockquote>
<p>(*): Samuel Huntington in 1993 published an article called <a href="https://web.archive.org/web/20100821191056/http://history.club.fatih.edu.tr/103%20Huntington%20Clash%20of%20Civilizations%20full%20text.htm">Clash of Civilizations</a><a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a> where he defined Western countries as those located in the regions of North America, Northern/Southern/Western Europe and Australia and New Zealand.</p>
<p>The process we are going to follow to solve the mentioned questions will be:</p>
<ol style="list-style-type: decimal">
<li>Data Exploration</li>
<li>Data Understanding</li>
<li>Data analysis until finding the relevant ones to solve questions</li>
<li>Visualization and summary</li>
</ol>
<p>First let’s explore the structure of the data frame with <code>str()</code>:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="gapminder.html#cb234-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb234-2"><a href="gapminder.html#cb234-2" tabindex="-1"></a>  <span class="fu">str</span>()</span>
<span id="cb234-3"><a href="gapminder.html#cb234-3" tabindex="-1"></a><span class="co">#&gt; &#39;data.frame&#39;:    10545 obs. of  9 variables:</span></span>
<span id="cb234-4"><a href="gapminder.html#cb234-4" tabindex="-1"></a><span class="co">#&gt;  $ country         : Factor w/ 185 levels &quot;Albania&quot;,&quot;Algeria&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span id="cb234-5"><a href="gapminder.html#cb234-5" tabindex="-1"></a><span class="co">#&gt;  $ year            : int  1960 1960 1960 1960 1960 1960 1960 1960 1960 1960 ...</span></span>
<span id="cb234-6"><a href="gapminder.html#cb234-6" tabindex="-1"></a><span class="co">#&gt;  $ infant_mortality: num  115.4 148.2 208 NA 59.9 ...</span></span>
<span id="cb234-7"><a href="gapminder.html#cb234-7" tabindex="-1"></a><span class="co">#&gt;  $ life_expectancy : num  62.9 47.5 36 63 65.4 ...</span></span>
<span id="cb234-8"><a href="gapminder.html#cb234-8" tabindex="-1"></a><span class="co">#&gt;  $ fertility       : num  6.19 7.65 7.32 4.43 3.11 4.55 4.82 3.45 2.7 5.57 ...</span></span>
<span id="cb234-9"><a href="gapminder.html#cb234-9" tabindex="-1"></a><span class="co">#&gt;  $ population      : num  1636054 11124892 5270844 54681 20619075 ...</span></span>
<span id="cb234-10"><a href="gapminder.html#cb234-10" tabindex="-1"></a><span class="co">#&gt;  $ gdp             : num  NA 1.38e+10 NA NA 1.08e+11 ...</span></span>
<span id="cb234-11"><a href="gapminder.html#cb234-11" tabindex="-1"></a><span class="co">#&gt;  $ continent       : Factor w/ 5 levels &quot;Africa&quot;,&quot;Americas&quot;,..: 4 1 1 2 2 3 2 5 4 3 ...</span></span>
<span id="cb234-12"><a href="gapminder.html#cb234-12" tabindex="-1"></a><span class="co">#&gt;  $ region          : Factor w/ 22 levels &quot;Australia and New Zealand&quot;,..: 19 11 10 2 15 21 2 1 22 21 ...</span></span></code></pre></div>
<p>We have a data frame with more than 10 thousand data points and 9 variables.</p>
<p>Now let’s take a look at the data with <code>head()</code>:</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="gapminder.html#cb235-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb235-2"><a href="gapminder.html#cb235-2" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb235-3"><a href="gapminder.html#cb235-3" tabindex="-1"></a><span class="co">#&gt;               country year infant_mortality life_expectancy fertility</span></span>
<span id="cb235-4"><a href="gapminder.html#cb235-4" tabindex="-1"></a><span class="co">#&gt; 1             Albania 1960           115.40           62.87      6.19</span></span>
<span id="cb235-5"><a href="gapminder.html#cb235-5" tabindex="-1"></a><span class="co">#&gt; 2             Algeria 1960           148.20           47.50      7.65</span></span>
<span id="cb235-6"><a href="gapminder.html#cb235-6" tabindex="-1"></a><span class="co">#&gt; 3              Angola 1960           208.00           35.98      7.32</span></span>
<span id="cb235-7"><a href="gapminder.html#cb235-7" tabindex="-1"></a><span class="co">#&gt; 4 Antigua and Barbuda 1960               NA           62.97      4.43</span></span>
<span id="cb235-8"><a href="gapminder.html#cb235-8" tabindex="-1"></a><span class="co">#&gt; 5           Argentina 1960            59.87           65.39      3.11</span></span>
<span id="cb235-9"><a href="gapminder.html#cb235-9" tabindex="-1"></a><span class="co">#&gt; 6             Armenia 1960               NA           66.86      4.55</span></span>
<span id="cb235-10"><a href="gapminder.html#cb235-10" tabindex="-1"></a><span class="co">#&gt;   population          gdp continent          region</span></span>
<span id="cb235-11"><a href="gapminder.html#cb235-11" tabindex="-1"></a><span class="co">#&gt; 1    1636054           NA    Europe Southern Europe</span></span>
<span id="cb235-12"><a href="gapminder.html#cb235-12" tabindex="-1"></a><span class="co">#&gt; 2   11124892  13828152297    Africa Northern Africa</span></span>
<span id="cb235-13"><a href="gapminder.html#cb235-13" tabindex="-1"></a><span class="co">#&gt; 3    5270844           NA    Africa   Middle Africa</span></span>
<span id="cb235-14"><a href="gapminder.html#cb235-14" tabindex="-1"></a><span class="co">#&gt; 4      54681           NA  Americas       Caribbean</span></span>
<span id="cb235-15"><a href="gapminder.html#cb235-15" tabindex="-1"></a><span class="co">#&gt; 5   20619075 108322326649  Americas   South America</span></span>
<span id="cb235-16"><a href="gapminder.html#cb235-16" tabindex="-1"></a><span class="co">#&gt; 6    1867396           NA      Asia    Western Asia</span></span></code></pre></div>
<p>Remember that for library data frames we can usually find the documentation and understand each attribute faster:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="gapminder.html#cb236-1" tabindex="-1"></a>?gapminder</span></code></pre></div>
<p>Going directly to the questions would be not leaving that curiosity free to see what else is in the data. Thus, we are going to start with other variables such as infant mortality, fertility or population.</p>
<p>We can filter all the data that are from Peru and select the column country, year, infant mortality and population:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="gapminder.html#cb237-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb237-2"><a href="gapminder.html#cb237-2" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Peru&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb237-3"><a href="gapminder.html#cb237-3" tabindex="-1"></a>  <span class="fu">select</span>(country, year, infant_mortality, population)</span>
<span id="cb237-4"><a href="gapminder.html#cb237-4" tabindex="-1"></a><span class="co">#&gt;    country year infant_mortality population</span></span>
<span id="cb237-5"><a href="gapminder.html#cb237-5" tabindex="-1"></a><span class="co">#&gt; 1     Peru 1960            135.9   10061519</span></span>
<span id="cb237-6"><a href="gapminder.html#cb237-6" tabindex="-1"></a><span class="co">#&gt; 2     Peru 1961            132.6   10350239</span></span>
<span id="cb237-7"><a href="gapminder.html#cb237-7" tabindex="-1"></a><span class="co">#&gt; 3     Peru 1962            129.1   10650672</span></span>
<span id="cb237-8"><a href="gapminder.html#cb237-8" tabindex="-1"></a><span class="co">#&gt; 4     Peru 1963            125.4   10961539</span></span>
<span id="cb237-9"><a href="gapminder.html#cb237-9" tabindex="-1"></a><span class="co">#&gt; 5     Peru 1964            121.8   11281015</span></span>
<span id="cb237-10"><a href="gapminder.html#cb237-10" tabindex="-1"></a><span class="co">#&gt; 6     Peru 1965            118.2   11607684</span></span>
<span id="cb237-11"><a href="gapminder.html#cb237-11" tabindex="-1"></a><span class="co">#&gt; 7     Peru 1966            114.8   11941327</span></span>
<span id="cb237-12"><a href="gapminder.html#cb237-12" tabindex="-1"></a><span class="co">#&gt; 8     Peru 1967            111.6   12282081</span></span>
<span id="cb237-13"><a href="gapminder.html#cb237-13" tabindex="-1"></a><span class="co">#&gt; 9     Peru 1968            108.7   12629333</span></span>
<span id="cb237-14"><a href="gapminder.html#cb237-14" tabindex="-1"></a><span class="co">#&gt; 10    Peru 1969            106.0   12982444</span></span>
<span id="cb237-15"><a href="gapminder.html#cb237-15" tabindex="-1"></a><span class="co">#&gt; 11    Peru 1970            103.4   13341071</span></span>
<span id="cb237-16"><a href="gapminder.html#cb237-16" tabindex="-1"></a><span class="co">#&gt; 12    Peru 1971            100.9   13704333</span></span>
<span id="cb237-17"><a href="gapminder.html#cb237-17" tabindex="-1"></a><span class="co">#&gt; 13    Peru 1972             98.3   14072476</span></span>
<span id="cb237-18"><a href="gapminder.html#cb237-18" tabindex="-1"></a><span class="co">#&gt; 14    Peru 1973             95.8   14447649</span></span>
<span id="cb237-19"><a href="gapminder.html#cb237-19" tabindex="-1"></a><span class="co">#&gt; 15    Peru 1974             93.3   14832839</span></span>
<span id="cb237-20"><a href="gapminder.html#cb237-20" tabindex="-1"></a><span class="co">#&gt; 16    Peru 1975             91.0   15229951</span></span>
<span id="cb237-21"><a href="gapminder.html#cb237-21" tabindex="-1"></a><span class="co">#&gt; 17    Peru 1976             88.9   15639898</span></span>
<span id="cb237-22"><a href="gapminder.html#cb237-22" tabindex="-1"></a><span class="co">#&gt; 18    Peru 1977             87.0   16061327</span></span>
<span id="cb237-23"><a href="gapminder.html#cb237-23" tabindex="-1"></a><span class="co">#&gt; 19    Peru 1978             85.5   16491087</span></span>
<span id="cb237-24"><a href="gapminder.html#cb237-24" tabindex="-1"></a><span class="co">#&gt; 20    Peru 1979             83.9   16924758</span></span>
<span id="cb237-25"><a href="gapminder.html#cb237-25" tabindex="-1"></a><span class="co">#&gt; 21    Peru 1980             82.4   17359118</span></span>
<span id="cb237-26"><a href="gapminder.html#cb237-26" tabindex="-1"></a><span class="co">#&gt; 22    Peru 1981             80.7   17792551</span></span>
<span id="cb237-27"><a href="gapminder.html#cb237-27" tabindex="-1"></a><span class="co">#&gt; 23    Peru 1982             78.7   18225727</span></span>
<span id="cb237-28"><a href="gapminder.html#cb237-28" tabindex="-1"></a><span class="co">#&gt; 24    Peru 1983             76.3   18660443</span></span>
<span id="cb237-29"><a href="gapminder.html#cb237-29" tabindex="-1"></a><span class="co">#&gt; 25    Peru 1984             73.7   19099575</span></span>
<span id="cb237-30"><a href="gapminder.html#cb237-30" tabindex="-1"></a><span class="co">#&gt; 26    Peru 1985             70.7   19544950</span></span>
<span id="cb237-31"><a href="gapminder.html#cb237-31" tabindex="-1"></a><span class="co">#&gt; 27    Peru 1986             67.6   19996250</span></span>
<span id="cb237-32"><a href="gapminder.html#cb237-32" tabindex="-1"></a><span class="co">#&gt; 28    Peru 1987             64.6   20451712</span></span>
<span id="cb237-33"><a href="gapminder.html#cb237-33" tabindex="-1"></a><span class="co">#&gt; 29    Peru 1988             61.7   20909897</span></span>
<span id="cb237-34"><a href="gapminder.html#cb237-34" tabindex="-1"></a><span class="co">#&gt; 30    Peru 1989             58.9   21368856</span></span>
<span id="cb237-35"><a href="gapminder.html#cb237-35" tabindex="-1"></a><span class="co">#&gt; 31    Peru 1990             56.3   21826658</span></span>
<span id="cb237-36"><a href="gapminder.html#cb237-36" tabindex="-1"></a><span class="co">#&gt; 32    Peru 1991             53.7   22283130</span></span>
<span id="cb237-37"><a href="gapminder.html#cb237-37" tabindex="-1"></a><span class="co">#&gt; 33    Peru 1992             51.0   22737056</span></span>
<span id="cb237-38"><a href="gapminder.html#cb237-38" tabindex="-1"></a><span class="co">#&gt; 34    Peru 1993             48.2   23184222</span></span>
<span id="cb237-39"><a href="gapminder.html#cb237-39" tabindex="-1"></a><span class="co">#&gt; 35    Peru 1994             45.4   23619358</span></span>
<span id="cb237-40"><a href="gapminder.html#cb237-40" tabindex="-1"></a><span class="co">#&gt; 36    Peru 1995             42.5   24038761</span></span>
<span id="cb237-41"><a href="gapminder.html#cb237-41" tabindex="-1"></a><span class="co">#&gt; 37    Peru 1996             39.7   24441076</span></span>
<span id="cb237-42"><a href="gapminder.html#cb237-42" tabindex="-1"></a><span class="co">#&gt; 38    Peru 1997             36.9   24827409</span></span>
<span id="cb237-43"><a href="gapminder.html#cb237-43" tabindex="-1"></a><span class="co">#&gt; 39    Peru 1998             34.3   25199744</span></span>
<span id="cb237-44"><a href="gapminder.html#cb237-44" tabindex="-1"></a><span class="co">#&gt; 40    Peru 1999             31.8   25561297</span></span>
<span id="cb237-45"><a href="gapminder.html#cb237-45" tabindex="-1"></a><span class="co">#&gt; 41    Peru 2000             29.6   25914875</span></span>
<span id="cb237-46"><a href="gapminder.html#cb237-46" tabindex="-1"></a><span class="co">#&gt; 42    Peru 2001             27.6   26261363</span></span>
<span id="cb237-47"><a href="gapminder.html#cb237-47" tabindex="-1"></a><span class="co">#&gt; 43    Peru 2002             25.7   26601463</span></span>
<span id="cb237-48"><a href="gapminder.html#cb237-48" tabindex="-1"></a><span class="co">#&gt; 44    Peru 2003             24.1   26937737</span></span>
<span id="cb237-49"><a href="gapminder.html#cb237-49" tabindex="-1"></a><span class="co">#&gt; 45    Peru 2004             22.6   27273188</span></span>
<span id="cb237-50"><a href="gapminder.html#cb237-50" tabindex="-1"></a><span class="co">#&gt; 46    Peru 2005             21.3   27610406</span></span>
<span id="cb237-51"><a href="gapminder.html#cb237-51" tabindex="-1"></a><span class="co">#&gt; 47    Peru 2006             20.1   27949958</span></span>
<span id="cb237-52"><a href="gapminder.html#cb237-52" tabindex="-1"></a><span class="co">#&gt; 48    Peru 2007             19.0   28292768</span></span>
<span id="cb237-53"><a href="gapminder.html#cb237-53" tabindex="-1"></a><span class="co">#&gt; 49    Peru 2008             18.0   28642048</span></span>
<span id="cb237-54"><a href="gapminder.html#cb237-54" tabindex="-1"></a><span class="co">#&gt; 50    Peru 2009             17.1   29001563</span></span>
<span id="cb237-55"><a href="gapminder.html#cb237-55" tabindex="-1"></a><span class="co">#&gt; 51    Peru 2010             16.3   29373644</span></span>
<span id="cb237-56"><a href="gapminder.html#cb237-56" tabindex="-1"></a><span class="co">#&gt; 52    Peru 2011             15.6   29759891</span></span>
<span id="cb237-57"><a href="gapminder.html#cb237-57" tabindex="-1"></a><span class="co">#&gt; 53    Peru 2012             14.9   30158768</span></span>
<span id="cb237-58"><a href="gapminder.html#cb237-58" tabindex="-1"></a><span class="co">#&gt; 54    Peru 2013             14.2   30565461</span></span>
<span id="cb237-59"><a href="gapminder.html#cb237-59" tabindex="-1"></a><span class="co">#&gt; 55    Peru 2014             13.6   30973148</span></span>
<span id="cb237-60"><a href="gapminder.html#cb237-60" tabindex="-1"></a><span class="co">#&gt; 56    Peru 2015             13.1   31376670</span></span>
<span id="cb237-61"><a href="gapminder.html#cb237-61" tabindex="-1"></a><span class="co">#&gt; 57    Peru 2016               NA         NA</span></span></code></pre></div>
<p>Let’s add a filter to obtain only the data from 2015:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="gapminder.html#cb238-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb238-2"><a href="gapminder.html#cb238-2" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Peru&quot;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2015</span>) <span class="sc">|&gt;</span> </span>
<span id="cb238-3"><a href="gapminder.html#cb238-3" tabindex="-1"></a>  <span class="fu">select</span>(country, year, infant_mortality, population)</span>
<span id="cb238-4"><a href="gapminder.html#cb238-4" tabindex="-1"></a><span class="co">#&gt;   country year infant_mortality population</span></span>
<span id="cb238-5"><a href="gapminder.html#cb238-5" tabindex="-1"></a><span class="co">#&gt; 1    Peru 2015             13.1   31376670</span></span></code></pre></div>
<p>We can make a comparison between Peru and Chile if we create a vector and instead of the <code>==</code> operator we use the <code>%in%</code> operator that allows evaluating that our data are <strong>in</strong> that vector.</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="gapminder.html#cb239-1" tabindex="-1"></a>vector_countries <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Peru&quot;</span>, <span class="st">&quot;Chile&quot;</span>)</span>
<span id="cb239-2"><a href="gapminder.html#cb239-2" tabindex="-1"></a></span>
<span id="cb239-3"><a href="gapminder.html#cb239-3" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb239-4"><a href="gapminder.html#cb239-4" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> vector_countries <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2015</span>) <span class="sc">|&gt;</span> </span>
<span id="cb239-5"><a href="gapminder.html#cb239-5" tabindex="-1"></a>  <span class="fu">select</span>(country, year, infant_mortality, population)</span>
<span id="cb239-6"><a href="gapminder.html#cb239-6" tabindex="-1"></a><span class="co">#&gt;   country year infant_mortality population</span></span>
<span id="cb239-7"><a href="gapminder.html#cb239-7" tabindex="-1"></a><span class="co">#&gt; 1   Chile 2015              7.0   17948141</span></span>
<span id="cb239-8"><a href="gapminder.html#cb239-8" tabindex="-1"></a><span class="co">#&gt; 2    Peru 2015             13.1   31376670</span></span></code></pre></div>
<p>Infant mortality is measured in number of children who die per 1,000 infants. This means that it already takes into account the population. In 2015 Peru had a higher infant mortality rate than Chile.</p>
<div id="initial-gapminder-plots" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Initial gapminder plots<a href="gapminder.html#initial-gapminder-plots" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>However, if we want to analyze global data, comparing country by country would take us much more time. Let’s use <code>ggplot</code> to see if there is a relationship in our data.</p>
<p>Let’s create a scatter plot with data from the <strong>year 1990</strong> of the fertility variable (<code>fertility</code>), which is the average number of children per woman, and the life expectancy variable (<code>life_expectancy</code>).</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="gapminder.html#cb240-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb240-2"><a href="gapminder.html#cb240-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">1990</span>) <span class="sc">|&gt;</span> </span>
<span id="cb240-3"><a href="gapminder.html#cb240-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb240-4"><a href="gapminder.html#cb240-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> fertility, <span class="at">y =</span> life_expectancy) <span class="sc">+</span></span>
<span id="cb240-5"><a href="gapminder.html#cb240-5" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-321-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>From this graph we can see that countries where families have 7.5 children have a lower life expectancy. On the other hand, in countries with high life expectancy the average number of children is less than 2 children per family.</p>
<p>As we have done previously, we can color the points according to some other variable. In this case, knowing which continent they belong to could give us a better idea of the data.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="gapminder.html#cb241-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb241-2"><a href="gapminder.html#cb241-2" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">1990</span>) <span class="sc">|&gt;</span> </span>
<span id="cb241-3"><a href="gapminder.html#cb241-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb241-4"><a href="gapminder.html#cb241-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> fertility, <span class="at">y =</span> life_expectancy, <span class="at">color =</span> continent) <span class="sc">+</span></span>
<span id="cb241-5"><a href="gapminder.html#cb241-5" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-322-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>In this graph, groups begin to be seen. Several European countries are in the upper left quadrant, while several African countries are in the lower right quadrant.</p>
</div>
<div id="facets" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Facets<a href="gapminder.html#facets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Although the previous graph already shows us a correlation of variables, we cannot see how it has changed from one year to another. For this we will use the facet layer (<code>facet_</code>).</p>
<p>In the layer <code>facet_grid(row_variable ~ column_variable)</code> we replace “row_variable” with the name of our variable or replace it with a <code>.</code> if we don’t want any of them. For example, from the previous example let’s compare how the distribution changed by comparing the year 1960 with the year 2013.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="gapminder.html#cb242-1" tabindex="-1"></a>vector_years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1960</span>, <span class="dv">2013</span>)</span>
<span id="cb242-2"><a href="gapminder.html#cb242-2" tabindex="-1"></a></span>
<span id="cb242-3"><a href="gapminder.html#cb242-3" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb242-4"><a href="gapminder.html#cb242-4" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> vector_years) <span class="sc">|&gt;</span> </span>
<span id="cb242-5"><a href="gapminder.html#cb242-5" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb242-6"><a href="gapminder.html#cb242-6" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> fertility, <span class="at">y =</span> life_expectancy, <span class="at">color =</span> continent) <span class="sc">+</span></span>
<span id="cb242-7"><a href="gapminder.html#cb242-7" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb242-8"><a href="gapminder.html#cb242-8" tabindex="-1"></a>  <span class="fu">facet_grid</span>(year <span class="sc">~</span> .)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-323-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>We can make it even clearer which continent changed the most if we add the continent variable as a column.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="gapminder.html#cb243-1" tabindex="-1"></a>vector_years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1960</span>, <span class="dv">2013</span>)</span>
<span id="cb243-2"><a href="gapminder.html#cb243-2" tabindex="-1"></a></span>
<span id="cb243-3"><a href="gapminder.html#cb243-3" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb243-4"><a href="gapminder.html#cb243-4" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> vector_years) <span class="sc">|&gt;</span> </span>
<span id="cb243-5"><a href="gapminder.html#cb243-5" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb243-6"><a href="gapminder.html#cb243-6" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> fertility, <span class="at">y =</span> life_expectancy, <span class="at">color =</span> continent) <span class="sc">+</span></span>
<span id="cb243-7"><a href="gapminder.html#cb243-7" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb243-8"><a href="gapminder.html#cb243-8" tabindex="-1"></a>  <span class="fu">facet_grid</span>(year <span class="sc">~</span> continent)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-324-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>Having several columns for each continent makes it harder to understand because the columns become smaller. It is recommended to have few columns. So we invert the order between year and continent.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="gapminder.html#cb244-1" tabindex="-1"></a>vector_years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1960</span>, <span class="dv">2013</span>)</span>
<span id="cb244-2"><a href="gapminder.html#cb244-2" tabindex="-1"></a></span>
<span id="cb244-3"><a href="gapminder.html#cb244-3" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb244-4"><a href="gapminder.html#cb244-4" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> vector_years) <span class="sc">|&gt;</span> </span>
<span id="cb244-5"><a href="gapminder.html#cb244-5" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb244-6"><a href="gapminder.html#cb244-6" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> fertility, <span class="at">y =</span> life_expectancy, <span class="at">color =</span> continent) <span class="sc">+</span></span>
<span id="cb244-7"><a href="gapminder.html#cb244-7" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb244-8"><a href="gapminder.html#cb244-8" tabindex="-1"></a>  <span class="fu">facet_grid</span>(continent <span class="sc">~</span> year)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-325-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>Here the change by regions is much more evident and how the majority of countries have reduced fertility per family while increasing life expectancy. We are living longer than in the 60s and in turn having fewer children per family. These phenomena have occurred globally.</p>
<p>We don’t always have to show all variables, in this case continents. We can continue applying filters so that it shows us a subset of continents that we want to compare. For example:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="gapminder.html#cb245-1" tabindex="-1"></a>vector_years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1960</span>, <span class="dv">2013</span>)</span>
<span id="cb245-2"><a href="gapminder.html#cb245-2" tabindex="-1"></a>vector_continents <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Europe&quot;</span>, <span class="st">&quot;Asia&quot;</span>)</span>
<span id="cb245-3"><a href="gapminder.html#cb245-3" tabindex="-1"></a></span>
<span id="cb245-4"><a href="gapminder.html#cb245-4" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb245-5"><a href="gapminder.html#cb245-5" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> vector_years <span class="sc">&amp;</span> continent <span class="sc">%in%</span> vector_continents) <span class="sc">|&gt;</span> </span>
<span id="cb245-6"><a href="gapminder.html#cb245-6" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb245-7"><a href="gapminder.html#cb245-7" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> fertility, <span class="at">y =</span> life_expectancy, <span class="at">color =</span> continent) <span class="sc">+</span></span>
<span id="cb245-8"><a href="gapminder.html#cb245-8" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb245-9"><a href="gapminder.html#cb245-9" tabindex="-1"></a>  <span class="fu">facet_grid</span>(continent <span class="sc">~</span> year)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-326-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>In this case it would be visually better if the continents were not in separate rows, but could still be appreciated in the graph. To do this, we will use the wrap facet (<code>facet_wrap(~ x)</code>), where <code>x</code> is the variable we want to wrap. In our case it would be the year, instead of appearing in separate rows we can join and transpose them.</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="gapminder.html#cb246-1" tabindex="-1"></a>vector_años <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1960</span>, <span class="dv">2013</span>)</span>
<span id="cb246-2"><a href="gapminder.html#cb246-2" tabindex="-1"></a>vector_continents <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Europe&quot;</span>, <span class="st">&quot;Asia&quot;</span>)</span>
<span id="cb246-3"><a href="gapminder.html#cb246-3" tabindex="-1"></a></span>
<span id="cb246-4"><a href="gapminder.html#cb246-4" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb246-5"><a href="gapminder.html#cb246-5" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> vector_years <span class="sc">&amp;</span> continent <span class="sc">%in%</span> vector_continents) <span class="sc">|&gt;</span> </span>
<span id="cb246-6"><a href="gapminder.html#cb246-6" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb246-7"><a href="gapminder.html#cb246-7" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> fertility, <span class="at">y =</span> life_expectancy, <span class="at">color =</span> continent) <span class="sc">+</span></span>
<span id="cb246-8"><a href="gapminder.html#cb246-8" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb246-9"><a href="gapminder.html#cb246-9" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> year)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-327-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>We can add more data by adding more data to the vectors. For example, let’s add a cut in the middle between 1960 and 2013.</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="gapminder.html#cb247-1" tabindex="-1"></a>vector_years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1960</span>, <span class="dv">1985</span>, <span class="dv">2013</span>)</span>
<span id="cb247-2"><a href="gapminder.html#cb247-2" tabindex="-1"></a>vector_continents <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Europe&quot;</span>, <span class="st">&quot;Asia&quot;</span>)</span>
<span id="cb247-3"><a href="gapminder.html#cb247-3" tabindex="-1"></a></span>
<span id="cb247-4"><a href="gapminder.html#cb247-4" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb247-5"><a href="gapminder.html#cb247-5" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> vector_years <span class="sc">&amp;</span> continent <span class="sc">%in%</span> vector_continents) <span class="sc">|&gt;</span> </span>
<span id="cb247-6"><a href="gapminder.html#cb247-6" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb247-7"><a href="gapminder.html#cb247-7" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> fertility, <span class="at">y =</span> life_expectancy, <span class="at">color =</span> continent) <span class="sc">+</span></span>
<span id="cb247-8"><a href="gapminder.html#cb247-8" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb247-9"><a href="gapminder.html#cb247-9" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> year)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-328-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="time-series" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Time series<a href="gapminder.html#time-series" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Time series are sequences of data measured at determined moments and ordered chronologically. R allows us to easily plot time series, we only need our data frames to include some time variable.</p>
<div id="individual-time-series" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Individual time series<a href="gapminder.html#individual-time-series" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In an individual time series we only analyze how a single variable has evolved, for example the evolution of the fertility rate in Peru. For this we can use a scatter plot with points or with lines.</p>
<p>As we will remember, we use <code>geom_point()</code> for points:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="gapminder.html#cb248-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb248-2"><a href="gapminder.html#cb248-2" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Peru&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb248-3"><a href="gapminder.html#cb248-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb248-4"><a href="gapminder.html#cb248-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> fertility) <span class="sc">+</span></span>
<span id="cb248-5"><a href="gapminder.html#cb248-5" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb248-6"><a href="gapminder.html#cb248-6" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 row containing missing values or values</span></span>
<span id="cb248-7"><a href="gapminder.html#cb248-7" tabindex="-1"></a><span class="co">#&gt; outside the scale range (`geom_point()`).</span></span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-329-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>We get a “warning” indicating that there are values that cannot be drawn because they are <code>NA</code> and are not available. This does not prevent showing the graph.</p>
<p>If we want a line graph, which is the most used in time series, we use <code>geom_line()</code>:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="gapminder.html#cb249-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb249-2"><a href="gapminder.html#cb249-2" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Peru&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb249-3"><a href="gapminder.html#cb249-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb249-4"><a href="gapminder.html#cb249-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> fertility) <span class="sc">+</span></span>
<span id="cb249-5"><a href="gapminder.html#cb249-5" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span>
<span id="cb249-6"><a href="gapminder.html#cb249-6" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 row containing missing values or values</span></span>
<span id="cb249-7"><a href="gapminder.html#cb249-7" tabindex="-1"></a><span class="co">#&gt; outside the scale range (`geom_line()`).</span></span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-330-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="multiple-time-series" class="section level3 hasAnchor" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> Multiple time series<a href="gapminder.html#multiple-time-series" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In multiple time series we seek comparison to analyze in a time series how the data evolved. For example, this would be the time series if we compare Peru, Bolivia and Chile:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="gapminder.html#cb250-1" tabindex="-1"></a>countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Peru&quot;</span>, <span class="st">&quot;Bolivia&quot;</span>, <span class="st">&quot;Chile&quot;</span>)</span>
<span id="cb250-2"><a href="gapminder.html#cb250-2" tabindex="-1"></a></span>
<span id="cb250-3"><a href="gapminder.html#cb250-3" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb250-4"><a href="gapminder.html#cb250-4" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> countries) <span class="sc">|&gt;</span> </span>
<span id="cb250-5"><a href="gapminder.html#cb250-5" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb250-6"><a href="gapminder.html#cb250-6" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> fertility, <span class="at">color =</span> country) <span class="sc">+</span></span>
<span id="cb250-7"><a href="gapminder.html#cb250-7" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span>
<span id="cb250-8"><a href="gapminder.html#cb250-8" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 3 rows containing missing values or values</span></span>
<span id="cb250-9"><a href="gapminder.html#cb250-9" tabindex="-1"></a><span class="co">#&gt; outside the scale range (`geom_line()`).</span></span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-331-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>We can also remove the legend and show the name of the countries as labels on the same graph. To do this we will first have to create a data frame using the function <code>data.frame()</code> that indicates the coordinates where we want each label to appear:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="gapminder.html#cb251-1" tabindex="-1"></a>countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Peru&quot;</span>, <span class="st">&quot;Bolivia&quot;</span>, <span class="st">&quot;Chile&quot;</span>)</span>
<span id="cb251-2"><a href="gapminder.html#cb251-2" tabindex="-1"></a></span>
<span id="cb251-3"><a href="gapminder.html#cb251-3" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">country_names =</span> countries, <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1975</span>, <span class="dv">1965</span>, <span class="dv">1962</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">4</span>))</span>
<span id="cb251-4"><a href="gapminder.html#cb251-4" tabindex="-1"></a>  </span>
<span id="cb251-5"><a href="gapminder.html#cb251-5" tabindex="-1"></a>labels</span>
<span id="cb251-6"><a href="gapminder.html#cb251-6" tabindex="-1"></a><span class="co">#&gt;   country_names    x y</span></span>
<span id="cb251-7"><a href="gapminder.html#cb251-7" tabindex="-1"></a><span class="co">#&gt; 1          Peru 1975 6</span></span>
<span id="cb251-8"><a href="gapminder.html#cb251-8" tabindex="-1"></a><span class="co">#&gt; 2       Bolivia 1965 7</span></span>
<span id="cb251-9"><a href="gapminder.html#cb251-9" tabindex="-1"></a><span class="co">#&gt; 3         Chile 1962 4</span></span></code></pre></div>
<p>We will use this to indicate that we want, for example, Bolivia to be written at the intersection of the year 1972 and with a fertility rate of 6.8.</p>
<p>To use these labels in <code>ggplot</code> we will edit the arguments in the <code>geom_text</code> layer. We will use the <code>data</code> attributes to indicate that we want to obtain the data from an external source, and we will include the <code>aes</code> layer inside <code>geom_text</code> to correlate the data frame we have created with the graph. We must keep in mind that the column name in both data frames must be the same, in this case <code>country</code>:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="gapminder.html#cb252-1" tabindex="-1"></a>countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Peru&quot;</span>, <span class="st">&quot;Bolivia&quot;</span>, <span class="st">&quot;Chile&quot;</span>)</span>
<span id="cb252-2"><a href="gapminder.html#cb252-2" tabindex="-1"></a></span>
<span id="cb252-3"><a href="gapminder.html#cb252-3" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">country =</span> countries, <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1976</span>, <span class="dv">1972</span>, <span class="dv">1965</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="fl">5.2</span>, <span class="fl">6.8</span>, <span class="fl">5.5</span>))</span>
<span id="cb252-4"><a href="gapminder.html#cb252-4" tabindex="-1"></a></span>
<span id="cb252-5"><a href="gapminder.html#cb252-5" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> <span class="fu">filter</span>(country <span class="sc">%in%</span> countries) <span class="sc">|&gt;</span></span>
<span id="cb252-6"><a href="gapminder.html#cb252-6" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb252-7"><a href="gapminder.html#cb252-7" tabindex="-1"></a>  <span class="fu">aes</span>(year, fertility, <span class="at">col =</span> country) <span class="sc">+</span></span>
<span id="cb252-8"><a href="gapminder.html#cb252-8" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb252-9"><a href="gapminder.html#cb252-9" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> labels, <span class="fu">aes</span>(x, y, <span class="at">label =</span> country)) <span class="sc">+</span></span>
<span id="cb252-10"><a href="gapminder.html#cb252-10" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb252-11"><a href="gapminder.html#cb252-11" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 3 rows containing missing values or values</span></span>
<span id="cb252-12"><a href="gapminder.html#cb252-12" tabindex="-1"></a><span class="co">#&gt; outside the scale range (`geom_line()`).</span></span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-333-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="exercises-6" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Exercises<a href="gapminder.html#exercises-6" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For these exercises we will continue using the <code>gapminder</code> data frame.</p>
<ol start="58" style="list-style-type: decimal">
<li>Create a scatter plot of fertility versus life expectancy for the American continent in 2000. Color the points according to the region they belong to.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="gapminder.html#cb253-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span></span>
<span id="cb253-2"><a href="gapminder.html#cb253-2" tabindex="-1"></a>  <span class="fu">filter</span>( continent <span class="sc">==</span> <span class="st">&quot;Americas&quot;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">|&gt;</span></span>
<span id="cb253-3"><a href="gapminder.html#cb253-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb253-4"><a href="gapminder.html#cb253-4" tabindex="-1"></a>  <span class="fu">aes</span>(fertility, life_expectancy, <span class="at">color =</span> region) <span class="sc">+</span></span>
<span id="cb253-5"><a href="gapminder.html#cb253-5" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
</details>
<blockquote>
<p>To create a vector of sequences we can use <code>X:Y</code>. This creates a vector that goes from number X to number Y</p>
</blockquote>
<ol start="59" style="list-style-type: decimal">
<li>The Vietnam War caused deaths in both the US (United States) and Vietnam. Create a chart that allows visualizing how life expectancy changed in each country. Hint: Filter these two countries, as well as the population from year 1955 to 1990 and this time series in a line chart.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="gapminder.html#cb254-1" tabindex="-1"></a>countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Vietnam&quot;</span>, <span class="st">&quot;United States&quot;</span>)</span>
<span id="cb254-2"><a href="gapminder.html#cb254-2" tabindex="-1"></a>year_sequence <span class="ot">&lt;-</span> <span class="dv">1955</span><span class="sc">:</span><span class="dv">1990</span></span>
<span id="cb254-3"><a href="gapminder.html#cb254-3" tabindex="-1"></a></span>
<span id="cb254-4"><a href="gapminder.html#cb254-4" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span></span>
<span id="cb254-5"><a href="gapminder.html#cb254-5" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> countries <span class="sc">&amp;</span> year <span class="sc">%in%</span> year_sequence) <span class="sc">|&gt;</span> </span>
<span id="cb254-6"><a href="gapminder.html#cb254-6" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb254-7"><a href="gapminder.html#cb254-7" tabindex="-1"></a>  <span class="fu">aes</span>(year, life_expectancy, <span class="at">color =</span> country) <span class="sc">+</span></span>
<span id="cb254-8"><a href="gapminder.html#cb254-8" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
</details>
<ol start="60" style="list-style-type: decimal">
<li>After the Vietnam War, Pol Pot and Khmer Rouge took control of Cambodia from 1975 to 1979 in one of the bloodiest dictatorships in history. Add Cambodia to the previous chart to visualize the impact of this government on life expectancy in that country.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="gapminder.html#cb255-1" tabindex="-1"></a>countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Vietnam&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;Cambodia&quot;</span>)</span>
<span id="cb255-2"><a href="gapminder.html#cb255-2" tabindex="-1"></a>year_sequence <span class="ot">&lt;-</span> <span class="dv">1955</span><span class="sc">:</span><span class="dv">1990</span></span>
<span id="cb255-3"><a href="gapminder.html#cb255-3" tabindex="-1"></a></span>
<span id="cb255-4"><a href="gapminder.html#cb255-4" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span></span>
<span id="cb255-5"><a href="gapminder.html#cb255-5" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> countries <span class="sc">&amp;</span> year <span class="sc">%in%</span> year_sequence) <span class="sc">|&gt;</span> </span>
<span id="cb255-6"><a href="gapminder.html#cb255-6" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb255-7"><a href="gapminder.html#cb255-7" tabindex="-1"></a>  <span class="fu">aes</span>(year, life_expectancy, <span class="at">color =</span> country) <span class="sc">+</span></span>
<span id="cb255-8"><a href="gapminder.html#cb255-8" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
</details>
</div>
<div id="histograms-with-ggplot" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> Histograms with ggplot<a href="gapminder.html#histograms-with-ggplot" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We could continue exploring the data until we understand it much better. Eventually we would get to the GDP (<code>gdp</code>) data and in turn we would understand that comparing only GDP alone makes no sense since there are countries with much more population than others. Data transformation is not something new, but we will see that it is something recurrent in our analyzes.</p>
<p>We are going to use a transformation that allows us to obtain how much is the GDP per capita per day in each country in each year</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="gapminder.html#cb256-1" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb256-2"><a href="gapminder.html#cb256-2" tabindex="-1"></a>  <span class="fu">mutate</span>(gdp_per_capita_per_day <span class="ot">&lt;-</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>)</span></code></pre></div>
<p>We could visualize this variable first by creating a histogram of it. A histogram in ggplot is nothing more than one of the <code>geoms</code> we have available, in this case it would be <code>geom_histogram(binwidth = x)</code>, where <strong>x</strong> is the width of the bar. For example, let’s calculate the distribution of our created variable in the year 2010:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="gapminder.html#cb257-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb257-2"><a href="gapminder.html#cb257-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb257-3"><a href="gapminder.html#cb257-3" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2010</span>) <span class="sc">|&gt;</span> </span>
<span id="cb257-4"><a href="gapminder.html#cb257-4" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb257-5"><a href="gapminder.html#cb257-5" tabindex="-1"></a>  <span class="fu">aes</span>(gdp_per_capita_per_day) <span class="sc">+</span></span>
<span id="cb257-6"><a href="gapminder.html#cb257-6" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>)</span>
<span id="cb257-7"><a href="gapminder.html#cb257-7" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 9 rows containing non-finite outside the</span></span>
<span id="cb257-8"><a href="gapminder.html#cb257-8" tabindex="-1"></a><span class="co">#&gt; scale range (`stat_bin()`).</span></span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-341-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>We can filter out the <strong>NA</strong> so that we no longer get the low “warnings” with the function we saw previously <code>is.na()</code>. In this case since we don’t want the <strong>NA</strong> we will negate the function by placing the symbol <code>!</code> at the beginning.</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="gapminder.html#cb258-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb258-2"><a href="gapminder.html#cb258-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb258-3"><a href="gapminder.html#cb258-3" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb258-4"><a href="gapminder.html#cb258-4" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb258-5"><a href="gapminder.html#cb258-5" tabindex="-1"></a>  <span class="fu">aes</span>(gdp_per_capita_per_day) <span class="sc">+</span></span>
<span id="cb258-6"><a href="gapminder.html#cb258-6" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-342-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>At this point it should be quick to detect that there is a concentration of data from countries with low GDP per capita and we could be tempted to apply a scale transformation on the <em>x-axis</em>. Let’s try with logarithm in base 2:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="gapminder.html#cb259-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb259-2"><a href="gapminder.html#cb259-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb259-3"><a href="gapminder.html#cb259-3" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb259-4"><a href="gapminder.html#cb259-4" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb259-5"><a href="gapminder.html#cb259-5" tabindex="-1"></a>  <span class="fu">aes</span>(gdp_per_capita_per_day) <span class="sc">+</span></span>
<span id="cb259-6"><a href="gapminder.html#cb259-6" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.5</span>) <span class="sc">+</span> <span class="co">#Change the width to 0.5 due to logarithmic scale</span></span>
<span id="cb259-7"><a href="gapminder.html#cb259-7" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">&quot;log2&quot;</span>)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-343-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>Let’s be careful interpreting this data. We cannot say that it is a symmetric distribution, even when with this scale we are tempted to do so. Remember the scale and use it appropriately.</p>
</div>
<div id="box-plots-with-ggplot" class="section level2 hasAnchor" number="6.6">
<h2><span class="header-section-number">6.6</span> Box plots with ggplot<a href="gapminder.html#box-plots-with-ggplot" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the same way, box plots are one more <code>geom</code> within the available ones, for this we will use the <code>geom_boxplot()</code> layer.</p>
<p>For example, let’s create a box plot to analyze GDP per capita per day by continent:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="gapminder.html#cb260-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb260-2"><a href="gapminder.html#cb260-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb260-3"><a href="gapminder.html#cb260-3" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb260-4"><a href="gapminder.html#cb260-4" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb260-5"><a href="gapminder.html#cb260-5" tabindex="-1"></a>  <span class="fu">aes</span>(continent, gdp_per_capita_per_day) <span class="sc">+</span></span>
<span id="cb260-6"><a href="gapminder.html#cb260-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-344-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>Now let’s zoom in. Within each continent we have regions, for example in the Americas we have South America, Central America, North America, and so on with each continent. Let’s change the <code>continent</code> variable to <code>region</code>.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="gapminder.html#cb261-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb261-2"><a href="gapminder.html#cb261-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb261-3"><a href="gapminder.html#cb261-3" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb261-4"><a href="gapminder.html#cb261-4" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb261-5"><a href="gapminder.html#cb261-5" tabindex="-1"></a>  <span class="fu">aes</span>(region, gdp_per_capita_per_day) <span class="sc">+</span></span>
<span id="cb261-6"><a href="gapminder.html#cb261-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-345-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>As we can verify: this visualization allows us to infer very little. Before discarding a graph let’s think if we can change the configuration to improve the visualization.</p>
<p>The first thing we can improve is the names of the regions. They are in horizontal form, but we could rotate it 45 degrees using the <code>theme()</code> layer.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="gapminder.html#cb262-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb262-2"><a href="gapminder.html#cb262-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb262-3"><a href="gapminder.html#cb262-3" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb262-4"><a href="gapminder.html#cb262-4" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb262-5"><a href="gapminder.html#cb262-5" tabindex="-1"></a>  <span class="fu">aes</span>(region, gdp_per_capita_per_day) <span class="sc">+</span></span>
<span id="cb262-6"><a href="gapminder.html#cb262-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb262-7"><a href="gapminder.html#cb262-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>) )</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-346-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>The names are understood, but if we want to find the top 3 (either by median or average) we would have to look for them one by one. Let’s reorder it, but first let’s be aware of some previous considerations:</p>
<p>The <code>region</code> column is a <code>Factor</code> type variable, it is not a character string. Even when visually we did not find a difference, factors are used to categorize data. For example, bronze, silver, platinum customers, etc.</p>
<p>Factors are useful because internally they are replaced by numbers and numbers, at a computational level, are faster to sort. The default sorting is alphabetical, as we can appreciate if we use the <code>levels</code> function.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="gapminder.html#cb263-1" tabindex="-1"></a><span class="fu">levels</span>(gapminder<span class="sc">$</span>region)</span>
<span id="cb263-2"><a href="gapminder.html#cb263-2" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;Australia and New Zealand&quot; &quot;Caribbean&quot;                </span></span>
<span id="cb263-3"><a href="gapminder.html#cb263-3" tabindex="-1"></a><span class="co">#&gt;  [3] &quot;Central America&quot;           &quot;Central Asia&quot;             </span></span>
<span id="cb263-4"><a href="gapminder.html#cb263-4" tabindex="-1"></a><span class="co">#&gt;  [5] &quot;Eastern Africa&quot;            &quot;Eastern Asia&quot;             </span></span>
<span id="cb263-5"><a href="gapminder.html#cb263-5" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;Eastern Europe&quot;            &quot;Melanesia&quot;                </span></span>
<span id="cb263-6"><a href="gapminder.html#cb263-6" tabindex="-1"></a><span class="co">#&gt;  [9] &quot;Micronesia&quot;                &quot;Middle Africa&quot;            </span></span>
<span id="cb263-7"><a href="gapminder.html#cb263-7" tabindex="-1"></a><span class="co">#&gt; [11] &quot;Northern Africa&quot;           &quot;Northern America&quot;         </span></span>
<span id="cb263-8"><a href="gapminder.html#cb263-8" tabindex="-1"></a><span class="co">#&gt; [13] &quot;Northern Europe&quot;           &quot;Polynesia&quot;                </span></span>
<span id="cb263-9"><a href="gapminder.html#cb263-9" tabindex="-1"></a><span class="co">#&gt; [15] &quot;South America&quot;             &quot;South-Eastern Asia&quot;       </span></span>
<span id="cb263-10"><a href="gapminder.html#cb263-10" tabindex="-1"></a><span class="co">#&gt; [17] &quot;Southern Africa&quot;           &quot;Southern Asia&quot;            </span></span>
<span id="cb263-11"><a href="gapminder.html#cb263-11" tabindex="-1"></a><span class="co">#&gt; [19] &quot;Southern Europe&quot;           &quot;Western Africa&quot;           </span></span>
<span id="cb263-12"><a href="gapminder.html#cb263-12" tabindex="-1"></a><span class="co">#&gt; [21] &quot;Western Asia&quot;              &quot;Western Europe&quot;</span></span></code></pre></div>
<p>We will use the <code>reorder()</code> function to change the order of the factors and since we are altering the dataframe we would have to use it inside the <code>mutate()</code> function. The <code>reorder()</code> function asks us as the first attribute the factor to reorder, then the vector that we will take into account and finally a grouping function. For example, order based on the median of each region (visually remember that it is the thick line inside each box):</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="gapminder.html#cb264-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb264-2"><a href="gapminder.html#cb264-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb264-3"><a href="gapminder.html#cb264-3" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb264-4"><a href="gapminder.html#cb264-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">reorder</span>(region, gdp_per_capita_per_day, <span class="at">FUN =</span> median)) <span class="sc">|&gt;</span> </span>
<span id="cb264-5"><a href="gapminder.html#cb264-5" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb264-6"><a href="gapminder.html#cb264-6" tabindex="-1"></a>  <span class="fu">aes</span>(region, gdp_per_capita_per_day) <span class="sc">+</span></span>
<span id="cb264-7"><a href="gapminder.html#cb264-7" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb264-8"><a href="gapminder.html#cb264-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-348-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>Note that a <code>mutate</code> has been placed after filtering the data. This is to guarantee that we are removing the <strong>NA</strong>. Otherwise, we risk that all values are <strong>NA</strong> and the reordering is not performed and remains default.</p>
<p>We see at the far left some regions in Africa, and at the far right Europe and USA. Remember that we can add color according to some variable. In this case let’s add color based on the continent:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="gapminder.html#cb265-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb265-2"><a href="gapminder.html#cb265-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb265-3"><a href="gapminder.html#cb265-3" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb265-4"><a href="gapminder.html#cb265-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">reorder</span>(region, gdp_per_capita_per_day, <span class="at">FUN =</span> median)) <span class="sc">|&gt;</span> </span>
<span id="cb265-5"><a href="gapminder.html#cb265-5" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb265-6"><a href="gapminder.html#cb265-6" tabindex="-1"></a>  <span class="fu">aes</span>(region, gdp_per_capita_per_day, <span class="at">color =</span> continent) <span class="sc">+</span></span>
<span id="cb265-7"><a href="gapminder.html#cb265-7" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb265-8"><a href="gapminder.html#cb265-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-349-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>Although we can already differentiate it, in a box plot it is usually the fill (<code>fill</code> in English) of the box that is painted. So, let’s change the <code>color</code> attribute to the <code>fill</code> attribute. And let’s remove the legend on the <em>x-axis</em>. It is not necessary in this case where the regions are self-explanatory.</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="gapminder.html#cb266-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb266-2"><a href="gapminder.html#cb266-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb266-3"><a href="gapminder.html#cb266-3" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb266-4"><a href="gapminder.html#cb266-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">reorder</span>(region, gdp_per_capita_per_day, <span class="at">FUN =</span> median)) <span class="sc">|&gt;</span> </span>
<span id="cb266-5"><a href="gapminder.html#cb266-5" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb266-6"><a href="gapminder.html#cb266-6" tabindex="-1"></a>  <span class="fu">aes</span>(region, gdp_per_capita_per_day, <span class="at">fill =</span> continent) <span class="sc">+</span></span>
<span id="cb266-7"><a href="gapminder.html#cb266-7" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb266-8"><a href="gapminder.html#cb266-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb266-9"><a href="gapminder.html#cb266-9" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-350-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>This graph helps us see the top 5, but since there are several regions concentrated in small values of GDP per capita we visually lose those regions. We need a scale transformation.</p>
<p>If you are thinking of adding a logarithmic scale layer for the <em>y-axis</em> you are on the right track. Let’s try:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="gapminder.html#cb267-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb267-2"><a href="gapminder.html#cb267-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb267-3"><a href="gapminder.html#cb267-3" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb267-4"><a href="gapminder.html#cb267-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">reorder</span>(region, gdp_per_capita_per_day, <span class="at">FUN =</span> median)) <span class="sc">|&gt;</span> </span>
<span id="cb267-5"><a href="gapminder.html#cb267-5" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb267-6"><a href="gapminder.html#cb267-6" tabindex="-1"></a>  <span class="fu">aes</span>(region, gdp_per_capita_per_day, <span class="at">fill =</span> continent) <span class="sc">+</span></span>
<span id="cb267-7"><a href="gapminder.html#cb267-7" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb267-8"><a href="gapminder.html#cb267-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb267-9"><a href="gapminder.html#cb267-9" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb267-10"><a href="gapminder.html#cb267-10" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">&quot;log2&quot;</span>)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-351-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>Sometimes it is necessary not only to show the boxes, but also where each of the data points is located. For this we can add the <code>geom_point()</code> layer that we had previously used to show the points of each data.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="gapminder.html#cb268-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb268-2"><a href="gapminder.html#cb268-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb268-3"><a href="gapminder.html#cb268-3" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb268-4"><a href="gapminder.html#cb268-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">reorder</span>(region, gdp_per_capita_per_day, <span class="at">FUN =</span> median)) <span class="sc">|&gt;</span> </span>
<span id="cb268-5"><a href="gapminder.html#cb268-5" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb268-6"><a href="gapminder.html#cb268-6" tabindex="-1"></a>  <span class="fu">aes</span>(region, gdp_per_capita_per_day, <span class="at">fill =</span> continent) <span class="sc">+</span></span>
<span id="cb268-7"><a href="gapminder.html#cb268-7" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb268-8"><a href="gapminder.html#cb268-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb268-9"><a href="gapminder.html#cb268-9" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb268-10"><a href="gapminder.html#cb268-10" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="sc">+</span></span>
<span id="cb268-11"><a href="gapminder.html#cb268-11" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-352-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="comparison-of-distributions" class="section level2 hasAnchor" number="6.7">
<h2><span class="header-section-number">6.7</span> Comparison of distributions<a href="gapminder.html#comparison-of-distributions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To be able to solve the first question of the case we would have to compare the distributions of the “Western” countries versus the developing countries.</p>
<p>For this, since we do not have a column that indicates which are from the West, we are going to create a <code>western_countries</code> with the list of regions that fall into this category:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="gapminder.html#cb269-1" tabindex="-1"></a>western_countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Western Europe&quot;</span>, <span class="st">&quot;Northern Europe&quot;</span>, <span class="st">&quot;Southern Europe&quot;</span>, <span class="st">&quot;Northern America&quot;</span>, <span class="st">&quot;Australia and New Zealand&quot;</span>)</span></code></pre></div>
<blockquote>
<p>We will also use the <code>ifelse(test, yes, no)</code> function to create a new column such that if the region is in the West it stores a value, and if it is not in the West it stores another value. It is recommended to read the documentation in <code>?ifelse</code>.</p>
</blockquote>
<p>Let’s add the column for the group each country belongs to:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="gapminder.html#cb270-1" tabindex="-1"></a>western_countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Western Europe&quot;</span>, <span class="st">&quot;Northern Europe&quot;</span>, <span class="st">&quot;Southern Europe&quot;</span>, <span class="st">&quot;Northern America&quot;</span>, <span class="st">&quot;Australia and New Zealand&quot;</span>)</span>
<span id="cb270-2"><a href="gapminder.html#cb270-2" tabindex="-1"></a></span>
<span id="cb270-3"><a href="gapminder.html#cb270-3" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb270-4"><a href="gapminder.html#cb270-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb270-5"><a href="gapminder.html#cb270-5" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb270-6"><a href="gapminder.html#cb270-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">ifelse</span>(region <span class="sc">%in%</span> western_countries, <span class="st">&quot;Western&quot;</span>, <span class="st">&quot;Developing&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb270-7"><a href="gapminder.html#cb270-7" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb270-8"><a href="gapminder.html#cb270-8" tabindex="-1"></a><span class="co">#&gt;               country year infant_mortality life_expectancy fertility</span></span>
<span id="cb270-9"><a href="gapminder.html#cb270-9" tabindex="-1"></a><span class="co">#&gt; 1             Albania 2010             14.8            77.2      1.74</span></span>
<span id="cb270-10"><a href="gapminder.html#cb270-10" tabindex="-1"></a><span class="co">#&gt; 2             Algeria 2010             23.5            76.0      2.82</span></span>
<span id="cb270-11"><a href="gapminder.html#cb270-11" tabindex="-1"></a><span class="co">#&gt; 3              Angola 2010            109.6            57.6      6.22</span></span>
<span id="cb270-12"><a href="gapminder.html#cb270-12" tabindex="-1"></a><span class="co">#&gt; 4 Antigua and Barbuda 2010              7.7            75.8      2.13</span></span>
<span id="cb270-13"><a href="gapminder.html#cb270-13" tabindex="-1"></a><span class="co">#&gt; 5           Argentina 2010             13.0            75.8      2.22</span></span>
<span id="cb270-14"><a href="gapminder.html#cb270-14" tabindex="-1"></a><span class="co">#&gt; 6             Armenia 2010             16.1            73.0      1.55</span></span>
<span id="cb270-15"><a href="gapminder.html#cb270-15" tabindex="-1"></a><span class="co">#&gt;   population          gdp continent          region gdp_per_capita_per_day</span></span>
<span id="cb270-16"><a href="gapminder.html#cb270-16" tabindex="-1"></a><span class="co">#&gt; 1    2901883   6137563946    Europe Southern Europe               5.794597</span></span>
<span id="cb270-17"><a href="gapminder.html#cb270-17" tabindex="-1"></a><span class="co">#&gt; 2   36036159  79164339611    Africa Northern Africa               6.018638</span></span>
<span id="cb270-18"><a href="gapminder.html#cb270-18" tabindex="-1"></a><span class="co">#&gt; 3   21219954  26125663270    Africa   Middle Africa               3.373106</span></span>
<span id="cb270-19"><a href="gapminder.html#cb270-19" tabindex="-1"></a><span class="co">#&gt; 4      87233    836686777  Americas       Caribbean              26.277814</span></span>
<span id="cb270-20"><a href="gapminder.html#cb270-20" tabindex="-1"></a><span class="co">#&gt; 5   41222875 434405530244  Americas   South America              28.871158</span></span>
<span id="cb270-21"><a href="gapminder.html#cb270-21" tabindex="-1"></a><span class="co">#&gt; 6    2963496   4102285513      Asia    Western Asia               3.792527</span></span>
<span id="cb270-22"><a href="gapminder.html#cb270-22" tabindex="-1"></a><span class="co">#&gt;        group</span></span>
<span id="cb270-23"><a href="gapminder.html#cb270-23" tabindex="-1"></a><span class="co">#&gt; 1    Western</span></span>
<span id="cb270-24"><a href="gapminder.html#cb270-24" tabindex="-1"></a><span class="co">#&gt; 2 Developing</span></span>
<span id="cb270-25"><a href="gapminder.html#cb270-25" tabindex="-1"></a><span class="co">#&gt; 3 Developing</span></span>
<span id="cb270-26"><a href="gapminder.html#cb270-26" tabindex="-1"></a><span class="co">#&gt; 4 Developing</span></span>
<span id="cb270-27"><a href="gapminder.html#cb270-27" tabindex="-1"></a><span class="co">#&gt; 5 Developing</span></span>
<span id="cb270-28"><a href="gapminder.html#cb270-28" tabindex="-1"></a><span class="co">#&gt; 6 Developing</span></span></code></pre></div>
<p>Now that we have how to differentiate the countries we can see their distribution until we find how to answer our question. We start by creating a histogram with logarithmic scale in the <em>x-axis</em> and separate it using <code>facet_grid</code> based on the group it belongs to:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="gapminder.html#cb271-1" tabindex="-1"></a>western_countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Western Europe&quot;</span>, <span class="st">&quot;Northern Europe&quot;</span>, <span class="st">&quot;Southern Europe&quot;</span>, <span class="st">&quot;Northern America&quot;</span>, <span class="st">&quot;Australia and New Zealand&quot;</span>)</span>
<span id="cb271-2"><a href="gapminder.html#cb271-2" tabindex="-1"></a></span>
<span id="cb271-3"><a href="gapminder.html#cb271-3" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb271-4"><a href="gapminder.html#cb271-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb271-5"><a href="gapminder.html#cb271-5" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb271-6"><a href="gapminder.html#cb271-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">ifelse</span>(region <span class="sc">%in%</span> western_countries, <span class="st">&quot;Western&quot;</span>, <span class="st">&quot;Developing&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb271-7"><a href="gapminder.html#cb271-7" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb271-8"><a href="gapminder.html#cb271-8" tabindex="-1"></a>  <span class="fu">aes</span>(gdp_per_capita_per_day) <span class="sc">+</span></span>
<span id="cb271-9"><a href="gapminder.html#cb271-9" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb271-10"><a href="gapminder.html#cb271-10" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="sc">+</span></span>
<span id="cb271-11"><a href="gapminder.html#cb271-11" tabindex="-1"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> group)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-355-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>We see that the daily GDP per capita has a distribution with higher values compared to developing countries. However, the picture in one year is not everything. We are ready to see if the separation was the same 40 years back from the date in the example (2010). We are also going to add the <code>geom_histogram()</code> layer the color attribute to see the border of the bars which by default are grey.</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="gapminder.html#cb272-1" tabindex="-1"></a>western_countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Western Europe&quot;</span>, <span class="st">&quot;Northern Europe&quot;</span>, <span class="st">&quot;Southern Europe&quot;</span>, <span class="st">&quot;Northern America&quot;</span>, <span class="st">&quot;Australia and New Zealand&quot;</span>)</span>
<span id="cb272-2"><a href="gapminder.html#cb272-2" tabindex="-1"></a></span>
<span id="cb272-3"><a href="gapminder.html#cb272-3" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb272-4"><a href="gapminder.html#cb272-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb272-5"><a href="gapminder.html#cb272-5" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1970</span>, <span class="dv">2010</span>) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb272-6"><a href="gapminder.html#cb272-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">ifelse</span>(region <span class="sc">%in%</span> western_countries, <span class="st">&quot;Western&quot;</span>, <span class="st">&quot;Developing&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb272-7"><a href="gapminder.html#cb272-7" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb272-8"><a href="gapminder.html#cb272-8" tabindex="-1"></a>  <span class="fu">aes</span>(gdp_per_capita_per_day) <span class="sc">+</span></span>
<span id="cb272-9"><a href="gapminder.html#cb272-9" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb272-10"><a href="gapminder.html#cb272-10" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="sc">+</span></span>
<span id="cb272-11"><a href="gapminder.html#cb272-11" tabindex="-1"></a>  <span class="fu">facet_grid</span>(year <span class="sc">~</span> group)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-356-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>Both groups, both “Western” and “Developing” have improved in that 40-year span, but developing countries have advanced more than Western countries.</p>
<p>So far we have assumed something: that all countries that reported in 2010 also reported data in 1970. To make the comparison finer we have to look for the distribution of countries that have data reported both in 1970 and in 2010.</p>
<p>To do this, we are going to create a vector that lists the countries with data in 1970 and another of those that have data in 2010 and then look for the intersection. Remember that to extract a column we use the <code>pull()</code> function.</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="gapminder.html#cb273-1" tabindex="-1"></a>western_countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Western Europe&quot;</span>, <span class="st">&quot;Northern Europe&quot;</span>, <span class="st">&quot;Southern Europe&quot;</span>, <span class="st">&quot;Northern America&quot;</span>, <span class="st">&quot;Australia and New Zealand&quot;</span>)</span>
<span id="cb273-2"><a href="gapminder.html#cb273-2" tabindex="-1"></a></span>
<span id="cb273-3"><a href="gapminder.html#cb273-3" tabindex="-1"></a>list_1 <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb273-4"><a href="gapminder.html#cb273-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb273-5"><a href="gapminder.html#cb273-5" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1970</span>) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb273-6"><a href="gapminder.html#cb273-6" tabindex="-1"></a>  <span class="fu">pull</span>(country)</span>
<span id="cb273-7"><a href="gapminder.html#cb273-7" tabindex="-1"></a></span>
<span id="cb273-8"><a href="gapminder.html#cb273-8" tabindex="-1"></a>list_2 <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb273-9"><a href="gapminder.html#cb273-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb273-10"><a href="gapminder.html#cb273-10" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2010</span>) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb273-11"><a href="gapminder.html#cb273-11" tabindex="-1"></a>  <span class="fu">pull</span>(country)</span></code></pre></div>
<p>To find the intersection of these two vectors we will use the function <code>intersect(vector_1, vector_2)</code>, which will give us the vector we are looking for.</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="gapminder.html#cb274-1" tabindex="-1"></a>intersection_vector <span class="ot">&lt;-</span> <span class="fu">intersect</span>(list_1, list_2)</span></code></pre></div>
<p>So, we recreate our histogram including only the countries on this list.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="gapminder.html#cb275-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb275-2"><a href="gapminder.html#cb275-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb275-3"><a href="gapminder.html#cb275-3" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1970</span>, <span class="dv">2010</span>) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb275-4"><a href="gapminder.html#cb275-4" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> intersection_vector) <span class="sc">|&gt;</span> </span>
<span id="cb275-5"><a href="gapminder.html#cb275-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">ifelse</span>(region <span class="sc">%in%</span> western_countries, <span class="st">&quot;Western&quot;</span>, <span class="st">&quot;Developing&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb275-6"><a href="gapminder.html#cb275-6" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb275-7"><a href="gapminder.html#cb275-7" tabindex="-1"></a>  <span class="fu">aes</span>(gdp_per_capita_per_day) <span class="sc">+</span></span>
<span id="cb275-8"><a href="gapminder.html#cb275-8" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb275-9"><a href="gapminder.html#cb275-9" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">&quot;log2&quot;</span>) <span class="sc">+</span></span>
<span id="cb275-10"><a href="gapminder.html#cb275-10" tabindex="-1"></a>  <span class="fu">facet_grid</span>(year <span class="sc">~</span> group)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-359-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>We see now more clearly with comparable data how there are more countries within the developing region that increased per capita GDP, much more than developing countries. But this first inference is still visual, we need to compare how the median, range, etc. changed. For this we will use a box plot very similar to the previous one, but this time we will edit <code>geom_boxplot()</code> so that it shows us in a single graph how each region has changed from 1970 to 2010.</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="gapminder.html#cb276-1" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb276-2"><a href="gapminder.html#cb276-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_per_capita_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) <span class="sc">|&gt;</span> </span>
<span id="cb276-3"><a href="gapminder.html#cb276-3" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1970</span>, <span class="dv">2010</span>) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp_per_capita_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb276-4"><a href="gapminder.html#cb276-4" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> intersection_vector) <span class="sc">|&gt;</span> </span>
<span id="cb276-5"><a href="gapminder.html#cb276-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">reorder</span>(region, gdp_per_capita_per_day, <span class="at">FUN =</span> median)) <span class="sc">|&gt;</span> </span>
<span id="cb276-6"><a href="gapminder.html#cb276-6" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb276-7"><a href="gapminder.html#cb276-7" tabindex="-1"></a>  <span class="fu">aes</span>(region, gdp_per_capita_per_day) <span class="sc">+</span></span>
<span id="cb276-8"><a href="gapminder.html#cb276-8" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(region, gdp_per_capita_per_day, <span class="at">fill=</span><span class="fu">factor</span>(year))) <span class="sc">+</span></span>
<span id="cb276-9"><a href="gapminder.html#cb276-9" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb276-10"><a href="gapminder.html#cb276-10" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb276-11"><a href="gapminder.html#cb276-11" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">&quot;log2&quot;</span>)</span></code></pre></div>
<p><img src="Data-Science-con-R_files/figure-html/unnamed-chunk-360-1.png" alt="" width="80%" style="display: block; margin: auto;" /></p>
<p>We see how there are regions within Asia that have grown substantially. As we know from general culture, some countries in Asia are already powers, but today with these graphs we can understand well how much each region has changed until becoming a power.</p>
<p>Therefore, we can now answer both questions of the case:</p>
<ol style="list-style-type: decimal">
<li>It is not reasonable to continue using the categorization of “Western” and “developing” since there are more and more regions that are poorly represented by those categories, such as East Asia.</li>
<li>It is not true that rich countries get richer while poor countries get poorer. We have seen that developing countries have even higher growth than the growth that Western countries have.</li>
</ol>
</div>
<div id="exercises-7" class="section level2 hasAnchor" number="6.8">
<h2><span class="header-section-number">6.8</span> Exercises<a href="gapminder.html#exercises-7" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For this series of exercises we will use the <code>stars</code> data frame which tells us attributes of a series of stars such as their temperature, type and magnitude.
The <code>magnitude</code> column is the absolute magnitude, where a more negative value of a star compared to another means it is more luminous.</p>
<p>Make sure to load the data frame with <code>data(stars)</code> before starting.</p>
<ol start="61" style="list-style-type: decimal">
<li>The temperature is in degrees Kelvin. Add the temp_celsius column using the following formula: C = K - 273.15. Report a scatter plot of temperature versus magnitude coloring according to star type. Also, change the scale of the <em>x-axis</em> to logarithmic base 10.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="gapminder.html#cb277-1" tabindex="-1"></a>stars <span class="sc">|&gt;</span> </span>
<span id="cb277-2"><a href="gapminder.html#cb277-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">temp_celsius =</span> temp <span class="sc">-</span> <span class="fl">273.15</span>) <span class="sc">|&gt;</span> </span>
<span id="cb277-3"><a href="gapminder.html#cb277-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb277-4"><a href="gapminder.html#cb277-4" tabindex="-1"></a>  <span class="fu">aes</span>(temp_celsius, magnitude, <span class="at">color =</span> type) <span class="sc">+</span></span>
<span id="cb277-5"><a href="gapminder.html#cb277-5" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb277-6"><a href="gapminder.html#cb277-6" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
</details>
<ol start="62" style="list-style-type: decimal">
<li>Since positive values indicate less brightness, invert the values of the previous graph using the <code>scale_y_reverse()</code> layer.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="gapminder.html#cb278-1" tabindex="-1"></a>stars <span class="sc">|&gt;</span> </span>
<span id="cb278-2"><a href="gapminder.html#cb278-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">temp_celsius =</span> temp <span class="sc">-</span> <span class="fl">273.15</span>) <span class="sc">|&gt;</span> </span>
<span id="cb278-3"><a href="gapminder.html#cb278-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb278-4"><a href="gapminder.html#cb278-4" tabindex="-1"></a>  <span class="fu">aes</span>(temp_celsius, magnitude, <span class="at">color =</span> type) <span class="sc">+</span></span>
<span id="cb278-5"><a href="gapminder.html#cb278-5" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb278-6"><a href="gapminder.html#cb278-6" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb278-7"><a href="gapminder.html#cb278-7" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>()</span></code></pre></div>
</details>
<ol start="63" style="list-style-type: decimal">
<li>The Sun is classified as a G-type star. Are G-type stars the most luminous? Create a box plot to compare medians of magnitude and determine which type of stars are the most luminous.</li>
</ol>
<p>No, G-type stars are not the most luminous. For this we can elaborate this graph:</p>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="gapminder.html#cb279-1" tabindex="-1"></a>stars <span class="sc">|&gt;</span> </span>
<span id="cb279-2"><a href="gapminder.html#cb279-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb279-3"><a href="gapminder.html#cb279-3" tabindex="-1"></a>  <span class="fu">aes</span>(type, magnitude) <span class="sc">+</span></span>
<span id="cb279-4"><a href="gapminder.html#cb279-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb279-5"><a href="gapminder.html#cb279-5" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>()</span></code></pre></div>
</details>

</div>
</div>



<div class="footnotes">
<hr />
<ol start="7">
<li id="fn7"><p><a href="https://www.gapminder.org/" class="uri">https://www.gapminder.org/</a><a href="gapminder.html#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p>Full text of Huntington’s article (in English)<a href="gapminder.html#fnref8" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ggplot-and-dplyr.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-to-probabilities.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": true,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": null
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": null,
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
