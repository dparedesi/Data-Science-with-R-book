<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Functions | Data Science with R</title>
  <meta name="description" content="A comprehensive guide to data science using R, covering fundamentals, visualization, statistics, machine learning with tidymodels, and generative AI integration. Third Edition by Daniel Paredes." />
  <meta name="generator" content="bookdown 0.46 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Functions | Data Science with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A comprehensive guide to data science using R, covering fundamentals, visualization, statistics, machine learning with tidymodels, and generative AI integration. Third Edition by Daniel Paredes." />
  <meta name="github-repo" content="dparedesi/Data-Science-with-R-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Functions | Data Science with R" />
  
  <meta name="twitter:description" content="A comprehensive guide to data science using R, covering fundamentals, visualization, statistics, machine learning with tidymodels, and generative AI integration. Third Edition by Daniel Paredes." />
  

<meta name="author" content="Author: Mg. Daniel Paredes Inilupu" />


<meta name="date" content="2025-12-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="objects.html"/>
<link rel="next" href="data-frames.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics: Sin Vista -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VJJ963010J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VJJ963010J');
</script>

<!-- Global site tag (gtag.js) - Google Analytics: Vista -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165839710-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165839710-1');
</script>

<!-- Global site tag (gtag.js) - Google Analytics: Agentedec4mbio -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-17876479-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-17876479-1');
</script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#support-this-work"><i class="fa fa-check"></i>Support This Work</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#stay-connected"><i class="fa fa-check"></i>Stay Connected</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html"><i class="fa fa-check"></i>Acknowledgments</a>
<ul>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html#family"><i class="fa fa-check"></i>Family</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html#mentors-and-inspirations"><i class="fa fa-check"></i>Mentors and Inspirations</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html#contributors"><i class="fa fa-check"></i>Contributors</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#why-r"><i class="fa fa-check"></i>Why R?</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#installing-r"><i class="fa fa-check"></i>Installing R</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#installing-rstudio"><i class="fa fa-check"></i>Installing RStudio</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#rstudio-sections"><i class="fa fa-check"></i>RStudio Sections</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#essential-keyboard-shortcuts"><i class="fa fa-check"></i>Essential Keyboard Shortcuts</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#testing-your-installation"><i class="fa fa-check"></i>Testing Your Installation</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#writing-scripts"><i class="fa fa-check"></i>Writing Scripts</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#whats-next"><i class="fa fa-check"></i>What’s Next?</a></li>
</ul></li>
<li class="part"><span><b>I Fundamentals and Key Tools</b></span></li>
<li class="chapter" data-level="1" data-path="objects.html"><a href="objects.html"><i class="fa fa-check"></i><b>1</b> Objects</a>
<ul>
<li class="chapter" data-level="1.1" data-path="objects.html"><a href="objects.html#what-are-objects-in-r"><i class="fa fa-check"></i><b>1.1</b> What are objects in R?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="objects.html"><a href="objects.html#r-as-an-object-oriented-language"><i class="fa fa-check"></i><b>1.1.1</b> R as an object-oriented language</a></li>
<li class="chapter" data-level="1.1.2" data-path="objects.html"><a href="objects.html#the-power-of-abstraction"><i class="fa fa-check"></i><b>1.1.2</b> The power of abstraction</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="objects.html"><a href="objects.html#variables-the-first-objects-on-your-journey"><i class="fa fa-check"></i><b>1.2</b> Variables: The first objects on your journey</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="objects.html"><a href="objects.html#creating-variables-in-r"><i class="fa fa-check"></i><b>1.2.1</b> Creating variables in R</a></li>
<li class="chapter" data-level="1.2.2" data-path="objects.html"><a href="objects.html#operations-with-variables"><i class="fa fa-check"></i><b>1.2.2</b> Operations with variables</a></li>
<li class="chapter" data-level="1.2.3" data-path="objects.html"><a href="objects.html#best-practices-for-naming-variables"><i class="fa fa-check"></i><b>1.2.3</b> Best practices for naming variables</a></li>
<li class="chapter" data-level="1.2.4" data-path="objects.html"><a href="objects.html#data-types"><i class="fa fa-check"></i><b>1.2.4</b> Data types</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="objects.html"><a href="objects.html#object-types-for-complex-data"><i class="fa fa-check"></i><b>1.3</b> Object types for complex data</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="objects.html"><a href="objects.html#vectors-organizing-information-of-the-same-type"><i class="fa fa-check"></i><b>1.3.1</b> Vectors: organizing information of the same type</a></li>
<li class="chapter" data-level="1.3.2" data-path="objects.html"><a href="objects.html#lists-grouping-objects-of-different-types"><i class="fa fa-check"></i><b>1.3.2</b> Lists: grouping objects of different types</a></li>
<li class="chapter" data-level="1.3.3" data-path="objects.html"><a href="objects.html#matrices-organizing-data-in-rows-and-columns"><i class="fa fa-check"></i><b>1.3.3</b> Matrices: organizing data in rows and columns</a></li>
<li class="chapter" data-level="1.3.4" data-path="objects.html"><a href="objects.html#arrays-multidimensional-matrices"><i class="fa fa-check"></i><b>1.3.4</b> Arrays: multidimensional matrices</a></li>
<li class="chapter" data-level="1.3.5" data-path="objects.html"><a href="objects.html#factors-representing-categorical-data"><i class="fa fa-check"></i><b>1.3.5</b> Factors: representing categorical data</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="objects.html"><a href="objects.html#the-universe-of-objects-in-r"><i class="fa fa-check"></i><b>1.4</b> The Universe of Objects in R</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="objects.html"><a href="objects.html#philosophy-of-objects-in-r"><i class="fa fa-check"></i><b>1.4.1</b> Philosophy of objects in R</a></li>
<li class="chapter" data-level="1.4.2" data-path="objects.html"><a href="objects.html#comparison-with-other-languages"><i class="fa fa-check"></i><b>1.4.2</b> Comparison with other languages</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="objects.html"><a href="objects.html#exercises"><i class="fa fa-check"></i><b>1.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>2</b> Functions</a>
<ul>
<li class="chapter" data-level="2.1" data-path="functions.html"><a href="functions.html#introduction-to-the-world-of-functions"><i class="fa fa-check"></i><b>2.1</b> Introduction to the world of functions</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="functions.html"><a href="functions.html#what-are-functions"><i class="fa fa-check"></i><b>2.1.1</b> What are functions?</a></li>
<li class="chapter" data-level="2.1.2" data-path="functions.html"><a href="functions.html#why-use-functions"><i class="fa fa-check"></i><b>2.1.2</b> Why use functions?</a></li>
<li class="chapter" data-level="2.1.3" data-path="functions.html"><a href="functions.html#first-functions-exploring-basic-r-functions"><i class="fa fa-check"></i><b>2.1.3</b> First functions: exploring basic R functions</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="functions.html"><a href="functions.html#anatomy-of-a-function"><i class="fa fa-check"></i><b>2.2</b> Anatomy of a function</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="functions.html"><a href="functions.html#arguments-the-ingredients-of-the-function"><i class="fa fa-check"></i><b>2.2.1</b> Arguments: the ingredients of the function</a></li>
<li class="chapter" data-level="2.2.2" data-path="functions.html"><a href="functions.html#body-the-instructions-of-the-function"><i class="fa fa-check"></i><b>2.2.2</b> Body: the instructions of the function</a></li>
<li class="chapter" data-level="2.2.3" data-path="functions.html"><a href="functions.html#return-value-the-result-of-the-function"><i class="fa fa-check"></i><b>2.2.3</b> Return value: the result of the function</a></li>
<li class="chapter" data-level="2.2.4" data-path="functions.html"><a href="functions.html#examples-creating-simple-functions-step-by-step"><i class="fa fa-check"></i><b>2.2.4</b> Examples: creating simple functions step by step</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="functions.html"><a href="functions.html#mastering-the-use-of-functions"><i class="fa fa-check"></i><b>2.3</b> Mastering the use of functions</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="functions.html"><a href="functions.html#functions-with-a-variable-number-of-arguments-...-adapting-to-different-situations"><i class="fa fa-check"></i><b>2.3.1</b> Functions with a variable number of arguments (<code>...</code>): Adapting to different situations</a></li>
<li class="chapter" data-level="2.3.2" data-path="functions.html"><a href="functions.html#variable-scope-local-and-global-variables"><i class="fa fa-check"></i><b>2.3.2</b> Variable scope: local and global variables</a></li>
<li class="chapter" data-level="2.3.3" data-path="functions.html"><a href="functions.html#examples-functions-to-calculate-taxes-discounts-etc."><i class="fa fa-check"></i><b>2.3.3</b> Examples: functions to calculate taxes, discounts, etc.</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="functions.html"><a href="functions.html#higher-order-functions"><i class="fa fa-check"></i><b>2.4</b> Higher-order functions</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="functions.html"><a href="functions.html#lapply-and-sapply-applying-a-function-to-each-element"><i class="fa fa-check"></i><b>2.4.1</b> <code>lapply()</code> and <code>sapply()</code>: applying a function to each element</a></li>
<li class="chapter" data-level="2.4.2" data-path="functions.html"><a href="functions.html#apply-applying-a-function-to-rows-or-columns"><i class="fa fa-check"></i><b>2.4.2</b> <code>apply()</code>: applying a function to rows or columns</a></li>
<li class="chapter" data-level="2.4.3" data-path="functions.html"><a href="functions.html#mapply-applying-a-function-to-multiple-arguments"><i class="fa fa-check"></i><b>2.4.3</b> <code>mapply()</code>: applying a function to multiple arguments</a></li>
<li class="chapter" data-level="2.4.4" data-path="functions.html"><a href="functions.html#examples-data-analysis-with-higher-order-functions"><i class="fa fa-check"></i><b>2.4.4</b> Examples: data analysis with higher-order functions</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="functions.html"><a href="functions.html#closures-functions-with-memory"><i class="fa fa-check"></i><b>2.5</b> Closures: functions with memory</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="functions.html"><a href="functions.html#concept-functions-that-remember"><i class="fa fa-check"></i><b>2.5.1</b> Concept: functions that “remember”</a></li>
<li class="chapter" data-level="2.5.2" data-path="functions.html"><a href="functions.html#applications-creating-counters-functions-with-internal-state"><i class="fa fa-check"></i><b>2.5.2</b> Applications: creating counters, functions with internal state</a></li>
<li class="chapter" data-level="2.5.3" data-path="functions.html"><a href="functions.html#examples-simulating-a-game-creating-an-operation-history"><i class="fa fa-check"></i><b>2.5.3</b> Examples: simulating a game, creating an operation history</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="functions.html"><a href="functions.html#debugging-and-error-handling-solving-the-mysteries-of-your-code"><i class="fa fa-check"></i><b>2.6</b> Debugging and error handling: solving the mysteries of your code</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="functions.html"><a href="functions.html#identifying-errors-common-error-messages-in-r"><i class="fa fa-check"></i><b>2.6.1</b> Identifying errors: common error messages in R</a></li>
<li class="chapter" data-level="2.6.2" data-path="functions.html"><a href="functions.html#debugging-tools-debug-traceback"><i class="fa fa-check"></i><b>2.6.2</b> Debugging tools: <code>debug()</code>, <code>traceback()</code></a></li>
<li class="chapter" data-level="2.6.3" data-path="functions.html"><a href="functions.html#error-handling-trycatch"><i class="fa fa-check"></i><b>2.6.3</b> Error handling: <code>tryCatch()</code></a></li>
<li class="chapter" data-level="2.6.4" data-path="functions.html"><a href="functions.html#examples-debugging-functions-with-errors-handling-exceptions"><i class="fa fa-check"></i><b>2.6.4</b> Examples: debugging functions with errors, handling exceptions</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="functions.html"><a href="functions.html#exercises-1"><i class="fa fa-check"></i><b>2.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>3</b> Data Frames</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-frames.html"><a href="data-frames.html#introduction-to-data-frames"><i class="fa fa-check"></i><b>3.1</b> Introduction to Data Frames</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-frames.html"><a href="data-frames.html#what-are-data-frames"><i class="fa fa-check"></i><b>3.1.1</b> What are data frames?</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-frames.html"><a href="data-frames.html#why-data-frames"><i class="fa fa-check"></i><b>3.1.2</b> Why data frames?</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-frames.html"><a href="data-frames.html#data-frames-in-action-exploring-information-about-the-united-states"><i class="fa fa-check"></i><b>3.1.3</b> Data Frames in action: exploring information about the United States</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-frames.html"><a href="data-frames.html#creating-data-frames-building-your-database-for-the-move"><i class="fa fa-check"></i><b>3.2</b> Creating Data Frames: Building your database for the move</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-frames.html"><a href="data-frames.html#importing-data-from-files-csv-excel"><i class="fa fa-check"></i><b>3.2.1</b> Importing data from files: CSV, Excel</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-frames.html"><a href="data-frames.html#creating-data-frames-manually"><i class="fa fa-check"></i><b>3.2.2</b> Creating data frames manually</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-frames.html"><a href="data-frames.html#examples"><i class="fa fa-check"></i><b>3.2.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-frames.html"><a href="data-frames.html#exploring-data-frames-discovering-the-secrets-of-your-data"><i class="fa fa-check"></i><b>3.3</b> Exploring Data Frames: Discovering the secrets of your data</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-frames.html"><a href="data-frames.html#accessing-rows-columns-and-cells"><i class="fa fa-check"></i><b>3.3.1</b> Accessing rows, columns, and cells</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-frames.html"><a href="data-frames.html#functions-for-exploring-data-frames"><i class="fa fa-check"></i><b>3.3.2</b> Functions for exploring data frames</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-frames.html"><a href="data-frames.html#examples-exploring-data-frames-with-move-information"><i class="fa fa-check"></i><b>3.3.3</b> Examples: exploring data frames with move information</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-frames.html"><a href="data-frames.html#manipulating-data-frames-transforming-your-data"><i class="fa fa-check"></i><b>3.4</b> Manipulating Data Frames: Transforming your data</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data-frames.html"><a href="data-frames.html#introduction-to-the-pipeline-operator"><i class="fa fa-check"></i><b>3.4.1</b> Introduction to the pipeline operator (<code>|&gt;</code>)</a></li>
<li class="chapter" data-level="3.4.2" data-path="data-frames.html"><a href="data-frames.html#transforming-a-table-with-mutate"><i class="fa fa-check"></i><b>3.4.2</b> Transforming a table with <code>mutate()</code></a></li>
<li class="chapter" data-level="3.4.3" data-path="data-frames.html"><a href="data-frames.html#filtering-data-selecting-cities-that-interest-you"><i class="fa fa-check"></i><b>3.4.3</b> Filtering data: selecting cities that interest you</a></li>
<li class="chapter" data-level="3.4.4" data-path="data-frames.html"><a href="data-frames.html#sorting-data-finding-the-safest-cities"><i class="fa fa-check"></i><b>3.4.4</b> Sorting data: finding the safest cities</a></li>
<li class="chapter" data-level="3.4.5" data-path="data-frames.html"><a href="data-frames.html#aggregating-and-summarizing-data-obtaining-general-overview"><i class="fa fa-check"></i><b>3.4.5</b> Aggregating and summarizing data: obtaining general overview</a></li>
<li class="chapter" data-level="3.4.6" data-path="data-frames.html"><a href="data-frames.html#joining-data-frames-combining-information"><i class="fa fa-check"></i><b>3.4.6</b> Joining data frames: combining information</a></li>
<li class="chapter" data-level="3.4.7" data-path="data-frames.html"><a href="data-frames.html#examples-1"><i class="fa fa-check"></i><b>3.4.7</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="data-frames.html"><a href="data-frames.html#exercises-2"><i class="fa fa-check"></i><b>3.5</b> Exercises</a></li>
<li class="chapter" data-level="3.6" data-path="data-frames.html"><a href="data-frames.html#data-frames-in-plots"><i class="fa fa-check"></i><b>3.6</b> Data frames in plots</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="data-frames.html"><a href="data-frames.html#scatter-plots"><i class="fa fa-check"></i><b>3.6.1</b> Scatter plots</a></li>
<li class="chapter" data-level="3.6.2" data-path="data-frames.html"><a href="data-frames.html#histograms"><i class="fa fa-check"></i><b>3.6.2</b> Histograms</a></li>
<li class="chapter" data-level="3.6.3" data-path="data-frames.html"><a href="data-frames.html#box-plot"><i class="fa fa-check"></i><b>3.6.3</b> Box plot</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="data-frames.html"><a href="data-frames.html#data-interpretation"><i class="fa fa-check"></i><b>3.7</b> Data interpretation</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="data-frames.html"><a href="data-frames.html#quartiles"><i class="fa fa-check"></i><b>3.7.1</b> Quartiles</a></li>
<li class="chapter" data-level="3.7.2" data-path="data-frames.html"><a href="data-frames.html#interpretation-of-box-plot"><i class="fa fa-check"></i><b>3.7.2</b> Interpretation of box plot</a></li>
<li class="chapter" data-level="3.7.3" data-path="data-frames.html"><a href="data-frames.html#examples-2"><i class="fa fa-check"></i><b>3.7.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="data-frames.html"><a href="data-frames.html#exercises-3"><i class="fa fa-check"></i><b>3.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="advanced-techniques.html"><a href="advanced-techniques.html"><i class="fa fa-check"></i><b>4</b> Advanced Techniques</a>
<ul>
<li class="chapter" data-level="4.1" data-path="advanced-techniques.html"><a href="advanced-techniques.html#metaprogramming-writing-code-that-writes-code"><i class="fa fa-check"></i><b>4.1</b> Metaprogramming: writing code that writes code</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="advanced-techniques.html"><a href="advanced-techniques.html#manipulating-expressions-the-art-of-sculpting-code"><i class="fa fa-check"></i><b>4.1.1</b> Manipulating expressions: The art of sculpting code</a></li>
<li class="chapter" data-level="4.1.2" data-path="advanced-techniques.html"><a href="advanced-techniques.html#examples-3"><i class="fa fa-check"></i><b>4.1.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="advanced-techniques.html"><a href="advanced-techniques.html#functional-programming-a-new-paradigm"><i class="fa fa-check"></i><b>4.2</b> Functional programming: a new paradigm</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="advanced-techniques.html"><a href="advanced-techniques.html#basic-principles-of-functional-programming"><i class="fa fa-check"></i><b>4.2.1</b> Basic principles of functional programming</a></li>
<li class="chapter" data-level="4.2.2" data-path="advanced-techniques.html"><a href="advanced-techniques.html#higher-order-functions-in-r"><i class="fa fa-check"></i><b>4.2.2</b> Higher-order functions in R</a></li>
<li class="chapter" data-level="4.2.3" data-path="advanced-techniques.html"><a href="advanced-techniques.html#examples-4"><i class="fa fa-check"></i><b>4.2.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="advanced-techniques.html"><a href="advanced-techniques.html#r6-the-future-of-oop-in-r"><i class="fa fa-check"></i><b>4.3</b> R6: The future of OOP in R</a></li>
<li class="chapter" data-level="4.4" data-path="advanced-techniques.html"><a href="advanced-techniques.html#exercises-4"><i class="fa fa-check"></i><b>4.4</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Data Visualization and Summarization</b></span></li>
<li class="chapter" data-level="5" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html"><i class="fa fa-check"></i><b>5</b> Ggplot and dplyr</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#creating-the-ggplot-object"><i class="fa fa-check"></i><b>5.1</b> Creating the ggplot object</a></li>
<li class="chapter" data-level="5.2" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#aesthetic-mapping-layer"><i class="fa fa-check"></i><b>5.2</b> Aesthetic mapping layer</a></li>
<li class="chapter" data-level="5.3" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#geoms-layer"><i class="fa fa-check"></i><b>5.3</b> Geoms layer</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#tweaking-aes-and-geoms"><i class="fa fa-check"></i><b>5.3.1</b> Tweaking aes and geoms</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#scale-layer"><i class="fa fa-check"></i><b>5.4</b> Scale layer</a></li>
<li class="chapter" data-level="5.5" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#label-title-and-legend-layer"><i class="fa fa-check"></i><b>5.5</b> Label, title and legend layer</a></li>
<li class="chapter" data-level="5.6" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#reference-lines"><i class="fa fa-check"></i><b>5.6</b> Reference lines</a></li>
<li class="chapter" data-level="5.7" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#changing-the-plot-style"><i class="fa fa-check"></i><b>5.7</b> Changing the plot style</a></li>
<li class="chapter" data-level="5.8" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#saving-plots"><i class="fa fa-check"></i><b>5.8</b> Saving plots</a></li>
<li class="chapter" data-level="5.9" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#summarizing-data-with-dplyr"><i class="fa fa-check"></i><b>5.9</b> Summarizing data with dplyr</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#summarize-function"><i class="fa fa-check"></i><b>5.9.1</b> Summarize function</a></li>
<li class="chapter" data-level="5.9.2" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#group-by-function"><i class="fa fa-check"></i><b>5.9.2</b> Group By Function</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#exercises-5"><i class="fa fa-check"></i><b>5.10</b> Exercises</a></li>
<li class="chapter" data-level="5.11" data-path="ggplot-and-dplyr.html"><a href="ggplot-and-dplyr.html#key-takeaways"><i class="fa fa-check"></i><b>5.11</b> Key Takeaways</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="gapminder.html"><a href="gapminder.html"><i class="fa fa-check"></i><b>6</b> Gapminder</a>
<ul>
<li class="chapter" data-level="6.1" data-path="gapminder.html"><a href="gapminder.html#initial-gapminder-plots"><i class="fa fa-check"></i><b>6.1</b> Initial gapminder plots</a></li>
<li class="chapter" data-level="6.2" data-path="gapminder.html"><a href="gapminder.html#facets"><i class="fa fa-check"></i><b>6.2</b> Facets</a></li>
<li class="chapter" data-level="6.3" data-path="gapminder.html"><a href="gapminder.html#time-series"><i class="fa fa-check"></i><b>6.3</b> Time series</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="gapminder.html"><a href="gapminder.html#individual-time-series"><i class="fa fa-check"></i><b>6.3.1</b> Individual time series</a></li>
<li class="chapter" data-level="6.3.2" data-path="gapminder.html"><a href="gapminder.html#multiple-time-series"><i class="fa fa-check"></i><b>6.3.2</b> Multiple time series</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="gapminder.html"><a href="gapminder.html#exercises-6"><i class="fa fa-check"></i><b>6.4</b> Exercises</a></li>
<li class="chapter" data-level="6.5" data-path="gapminder.html"><a href="gapminder.html#histograms-with-ggplot"><i class="fa fa-check"></i><b>6.5</b> Histograms with ggplot</a></li>
<li class="chapter" data-level="6.6" data-path="gapminder.html"><a href="gapminder.html#box-plots-with-ggplot"><i class="fa fa-check"></i><b>6.6</b> Box plots with ggplot</a></li>
<li class="chapter" data-level="6.7" data-path="gapminder.html"><a href="gapminder.html#comparison-of-distributions"><i class="fa fa-check"></i><b>6.7</b> Comparison of distributions</a></li>
<li class="chapter" data-level="6.8" data-path="gapminder.html"><a href="gapminder.html#exercises-7"><i class="fa fa-check"></i><b>6.8</b> Exercises</a></li>
<li class="chapter" data-level="6.9" data-path="gapminder.html"><a href="gapminder.html#key-takeaways-1"><i class="fa fa-check"></i><b>6.9</b> Key Takeaways</a></li>
</ul></li>
<li class="part"><span><b>III Statistics</b></span></li>
<li class="chapter" data-level="" data-path="introduction-to-probabilities.html"><a href="introduction-to-probabilities.html"><i class="fa fa-check"></i>Introduction to Probabilities</a></li>
<li class="chapter" data-level="7" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html"><i class="fa fa-check"></i><b>7</b> Discrete Probabilities</a>
<ul>
<li class="chapter" data-level="7.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#calculation-using-the-mathematical-definition"><i class="fa fa-check"></i><b>7.1</b> Calculation using the mathematical definition</a></li>
<li class="chapter" data-level="7.2" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#monte-carlo-simulation-for-discrete-variables"><i class="fa fa-check"></i><b>7.2</b> Monte Carlo Simulation for Discrete Variables</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#other-functions-to-create-vectors"><i class="fa fa-check"></i><b>7.2.1</b> Other functions to create vectors</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#exercises-8"><i class="fa fa-check"></i><b>7.3</b> Exercises</a></li>
<li class="chapter" data-level="7.4" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#combinations-and-permutations"><i class="fa fa-check"></i><b>7.4</b> Combinations and Permutations</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#permutations"><i class="fa fa-check"></i><b>7.4.1</b> Permutations</a></li>
<li class="chapter" data-level="7.4.2" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#combinations"><i class="fa fa-check"></i><b>7.4.2</b> Combinations</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#sufficient-experiments-with-monte-carlo-simulation"><i class="fa fa-check"></i><b>7.5</b> Sufficient Experiments with Monte Carlo Simulation</a></li>
<li class="chapter" data-level="7.6" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#case-birthdays-in-classrooms"><i class="fa fa-check"></i><b>7.6</b> Case: Birthdays in Classrooms</a></li>
<li class="chapter" data-level="7.7" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#exercises-9"><i class="fa fa-check"></i><b>7.7</b> Exercises</a></li>
<li class="chapter" data-level="7.8" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#integrative-exercise"><i class="fa fa-check"></i><b>7.8</b> Integrative Exercise</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="discrete-probabilities.html"><a href="discrete-probabilities.html#monty-hall-problem"><i class="fa fa-check"></i><b>7.8.1</b> Monty Hall Problem</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html"><i class="fa fa-check"></i><b>8</b> Continuous Probabilities</a>
<ul>
<li class="chapter" data-level="8.1" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#learning-objectives"><i class="fa fa-check"></i><b>8.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#empirical-distribution"><i class="fa fa-check"></i><b>8.2</b> Empirical Distribution</a></li>
<li class="chapter" data-level="8.3" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#theoretical-distribution"><i class="fa fa-check"></i><b>8.3</b> Theoretical Distribution</a></li>
<li class="chapter" data-level="8.4" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#key-takeaways-2"><i class="fa fa-check"></i><b>8.4</b> Key Takeaways</a></li>
<li class="chapter" data-level="8.5" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#exercises-10"><i class="fa fa-check"></i><b>8.5</b> Exercises</a></li>
<li class="chapter" data-level="8.6" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#monte-carlo-simulation-for-continuous-variables"><i class="fa fa-check"></i><b>8.6</b> Monte Carlo Simulation for Continuous Variables</a></li>
<li class="chapter" data-level="8.7" data-path="continuous-probabilities.html"><a href="continuous-probabilities.html#exercises-11"><i class="fa fa-check"></i><b>8.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="statistical-inference.html"><a href="statistical-inference.html"><i class="fa fa-check"></i><b>9</b> Statistical Inference</a>
<ul>
<li class="chapter" data-level="9.1" data-path="statistical-inference.html"><a href="statistical-inference.html#learning-objectives-1"><i class="fa fa-check"></i><b>9.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="9.2" data-path="statistical-inference.html"><a href="statistical-inference.html#expected-value"><i class="fa fa-check"></i><b>9.2</b> Expected Value</a></li>
<li class="chapter" data-level="9.3" data-path="statistical-inference.html"><a href="statistical-inference.html#central-limit-theorem"><i class="fa fa-check"></i><b>9.3</b> Central Limit Theorem</a></li>
<li class="chapter" data-level="9.4" data-path="statistical-inference.html"><a href="statistical-inference.html#key-takeaways-3"><i class="fa fa-check"></i><b>9.4</b> Key Takeaways</a></li>
<li class="chapter" data-level="9.5" data-path="statistical-inference.html"><a href="statistical-inference.html#exercises-12"><i class="fa fa-check"></i><b>9.5</b> Exercises</a></li>
<li class="chapter" data-level="9.6" data-path="statistical-inference.html"><a href="statistical-inference.html#parameter-estimation-method"><i class="fa fa-check"></i><b>9.6</b> Parameter Estimation Method</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="statistical-inference.html"><a href="statistical-inference.html#margin-of-error"><i class="fa fa-check"></i><b>9.6.1</b> Margin of Error</a></li>
<li class="chapter" data-level="9.6.2" data-path="statistical-inference.html"><a href="statistical-inference.html#confidence-intervals"><i class="fa fa-check"></i><b>9.6.2</b> Confidence Intervals</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="statistical-inference.html"><a href="statistical-inference.html#spread-estimation"><i class="fa fa-check"></i><b>9.7</b> Spread Estimation</a></li>
<li class="chapter" data-level="9.8" data-path="statistical-inference.html"><a href="statistical-inference.html#estimates-outside-election-polls"><i class="fa fa-check"></i><b>9.8</b> Estimates Outside Election Polls</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="statistical-inference.html"><a href="statistical-inference.html#example-estimating-average-height"><i class="fa fa-check"></i><b>9.8.1</b> Example: Estimating Average Height</a></li>
</ul></li>
<li class="chapter" data-level="9.9" data-path="statistical-inference.html"><a href="statistical-inference.html#exercises-13"><i class="fa fa-check"></i><b>9.9</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>IV Data Wrangling</b></span></li>
<li class="chapter" data-level="" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="10" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html"><i class="fa fa-check"></i><b>10</b> Data import and consolidation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#importing-from-files"><i class="fa fa-check"></i><b>10.1</b> Importing from files</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#working-directory"><i class="fa fa-check"></i><b>10.1.1</b> Working Directory</a></li>
<li class="chapter" data-level="10.1.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#readr-and-readxl-packages"><i class="fa fa-check"></i><b>10.1.2</b> readr and readxl packages</a></li>
<li class="chapter" data-level="10.1.3" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#importing-files-from-the-internet"><i class="fa fa-check"></i><b>10.1.3</b> Importing files from the internet</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#tidy-data"><i class="fa fa-check"></i><b>10.2</b> Tidy data</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#transforming-to-tidy-data"><i class="fa fa-check"></i><b>10.2.1</b> Transforming to tidy data</a></li>
<li class="chapter" data-level="10.2.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#separate-function"><i class="fa fa-check"></i><b>10.2.2</b> separate function</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#exercises-14"><i class="fa fa-check"></i><b>10.3</b> Exercises</a></li>
<li class="chapter" data-level="10.4" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#joining-tables"><i class="fa fa-check"></i><b>10.4</b> Joining tables</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#join-functions"><i class="fa fa-check"></i><b>10.4.1</b> Join functions</a></li>
<li class="chapter" data-level="10.4.2" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#joining-without-a-common-identifier"><i class="fa fa-check"></i><b>10.4.2</b> Joining without a common identifier</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#web-scraping"><i class="fa fa-check"></i><b>10.5</b> Web Scraping</a></li>
<li class="chapter" data-level="10.6" data-path="data-import-and-consolidation.html"><a href="data-import-and-consolidation.html#exercises-15"><i class="fa fa-check"></i><b>10.6</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>V Machine learning</b></span></li>
<li class="chapter" data-level="" data-path="introduction-2.html"><a href="introduction-2.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="10.7" data-path="introduction-2.html"><a href="introduction-2.html#learning-objectives-2"><i class="fa fa-check"></i><b>10.7</b> Learning Objectives</a></li>
<li class="chapter" data-level="10.8" data-path="introduction-2.html"><a href="introduction-2.html#chapter-structure"><i class="fa fa-check"></i><b>10.8</b> Chapter Structure</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="supervised-learning.html"><a href="supervised-learning.html"><i class="fa fa-check"></i><b>11</b> Supervised Learning</a>
<ul>
<li class="chapter" data-level="11.1" data-path="supervised-learning.html"><a href="supervised-learning.html#classification-and-regression"><i class="fa fa-check"></i><b>11.1</b> Classification and Regression</a></li>
<li class="chapter" data-level="11.2" data-path="supervised-learning.html"><a href="supervised-learning.html#knn-k-nearest-neighbors"><i class="fa fa-check"></i><b>11.2</b> kNN: k-Nearest Neighbors</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="supervised-learning.html"><a href="supervised-learning.html#two-variables-as-input"><i class="fa fa-check"></i><b>11.2.1</b> Two variables as input</a></li>
<li class="chapter" data-level="11.2.2" data-path="supervised-learning.html"><a href="supervised-learning.html#multiple-variables-as-input"><i class="fa fa-check"></i><b>11.2.2</b> Multiple variables as input</a></li>
<li class="chapter" data-level="11.2.3" data-path="supervised-learning.html"><a href="supervised-learning.html#diverse-values-of-k"><i class="fa fa-check"></i><b>11.2.3</b> Diverse values of k</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="supervised-learning.html"><a href="supervised-learning.html#tidymodels-framework"><i class="fa fa-check"></i><b>11.3</b> tidymodels Framework</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="supervised-learning.html"><a href="supervised-learning.html#creation-of-training-and-test-data"><i class="fa fa-check"></i><b>11.3.1</b> Creation of training and test data</a></li>
<li class="chapter" data-level="11.3.2" data-path="supervised-learning.html"><a href="supervised-learning.html#training-our-prediction-algorithm"><i class="fa fa-check"></i><b>11.3.2</b> Training our prediction algorithm</a></li>
<li class="chapter" data-level="11.3.3" data-path="supervised-learning.html"><a href="supervised-learning.html#data-pre-processing-with-recipes"><i class="fa fa-check"></i><b>11.3.3</b> Data Pre-processing with Recipes</a></li>
<li class="chapter" data-level="11.3.4" data-path="supervised-learning.html"><a href="supervised-learning.html#creating-a-workflow"><i class="fa fa-check"></i><b>11.3.4</b> Creating a Workflow</a></li>
<li class="chapter" data-level="11.3.5" data-path="supervised-learning.html"><a href="supervised-learning.html#parameter-tuning-with-cross-validation"><i class="fa fa-check"></i><b>11.3.5</b> Parameter Tuning with Cross-Validation</a></li>
<li class="chapter" data-level="11.3.6" data-path="supervised-learning.html"><a href="supervised-learning.html#finalizing-the-model"><i class="fa fa-check"></i><b>11.3.6</b> Finalizing the Model</a></li>
<li class="chapter" data-level="11.3.7" data-path="supervised-learning.html"><a href="supervised-learning.html#testing-the-prediction-model"><i class="fa fa-check"></i><b>11.3.7</b> Testing the prediction model</a></li>
<li class="chapter" data-level="11.3.8" data-path="supervised-learning.html"><a href="supervised-learning.html#model-evaluation-with-yardstick"><i class="fa fa-check"></i><b>11.3.8</b> Model Evaluation with yardstick</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="supervised-learning.html"><a href="supervised-learning.html#confusion-matrix"><i class="fa fa-check"></i><b>11.4</b> Confusion Matrix</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="supervised-learning.html"><a href="supervised-learning.html#accuracy"><i class="fa fa-check"></i><b>11.4.1</b> Accuracy</a></li>
<li class="chapter" data-level="11.4.2" data-path="supervised-learning.html"><a href="supervised-learning.html#sensitivity"><i class="fa fa-check"></i><b>11.4.2</b> Sensitivity</a></li>
<li class="chapter" data-level="11.4.3" data-path="supervised-learning.html"><a href="supervised-learning.html#specificity"><i class="fa fa-check"></i><b>11.4.3</b> Specificity</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="supervised-learning.html"><a href="supervised-learning.html#exercises-16"><i class="fa fa-check"></i><b>11.5</b> Exercises</a></li>
<li class="chapter" data-level="11.6" data-path="supervised-learning.html"><a href="supervised-learning.html#simple-linear-regression"><i class="fa fa-check"></i><b>11.6</b> Simple Linear Regression</a></li>
<li class="chapter" data-level="11.7" data-path="supervised-learning.html"><a href="supervised-learning.html#multiple-linear-regression"><i class="fa fa-check"></i><b>11.7</b> Multiple Linear Regression</a></li>
<li class="chapter" data-level="11.8" data-path="supervised-learning.html"><a href="supervised-learning.html#standard-method-for-evaluating-accuracy"><i class="fa fa-check"></i><b>11.8</b> Standard Method for Evaluating Accuracy</a></li>
<li class="chapter" data-level="11.9" data-path="supervised-learning.html"><a href="supervised-learning.html#selection-of-the-most-optimal-model"><i class="fa fa-check"></i><b>11.9</b> Selection of the Most Optimal Model</a>
<ul>
<li class="chapter" data-level="11.9.1" data-path="supervised-learning.html"><a href="supervised-learning.html#k-nearest-neighbors-model"><i class="fa fa-check"></i><b>11.9.1</b> k-Nearest Neighbors Model</a></li>
<li class="chapter" data-level="11.9.2" data-path="supervised-learning.html"><a href="supervised-learning.html#generalized-linear-model---glm"><i class="fa fa-check"></i><b>11.9.2</b> Generalized Linear Model - GLM</a></li>
<li class="chapter" data-level="11.9.3" data-path="supervised-learning.html"><a href="supervised-learning.html#random-forest-model"><i class="fa fa-check"></i><b>11.9.3</b> Random Forest Model</a></li>
<li class="chapter" data-level="11.9.4" data-path="supervised-learning.html"><a href="supervised-learning.html#support-vector-machine-model---svm"><i class="fa fa-check"></i><b>11.9.4</b> Support Vector Machine Model - SVM</a></li>
<li class="chapter" data-level="11.9.5" data-path="supervised-learning.html"><a href="supervised-learning.html#naive-bayes-model"><i class="fa fa-check"></i><b>11.9.5</b> Naive Bayes Model</a></li>
<li class="chapter" data-level="11.9.6" data-path="supervised-learning.html"><a href="supervised-learning.html#model-comparison"><i class="fa fa-check"></i><b>11.9.6</b> Model Comparison</a></li>
<li class="chapter" data-level="11.9.7" data-path="supervised-learning.html"><a href="supervised-learning.html#predicting-using-the-best-model"><i class="fa fa-check"></i><b>11.9.7</b> Predicting using the best model</a></li>
</ul></li>
<li class="chapter" data-level="11.10" data-path="supervised-learning.html"><a href="supervised-learning.html#exercises-17"><i class="fa fa-check"></i><b>11.10</b> Exercises</a></li>
<li class="chapter" data-level="11.11" data-path="supervised-learning.html"><a href="supervised-learning.html#ethics-bias-in-algorithmic-decision-making"><i class="fa fa-check"></i><b>11.11</b> Ethics: Bias in Algorithmic Decision Making</a>
<ul>
<li class="chapter" data-level="11.11.1" data-path="supervised-learning.html"><a href="supervised-learning.html#the-risk-of-proxy-variables"><i class="fa fa-check"></i><b>11.11.1</b> The Risk of Proxy Variables</a></li>
<li class="chapter" data-level="11.11.2" data-path="supervised-learning.html"><a href="supervised-learning.html#feedback-loops"><i class="fa fa-check"></i><b>11.11.2</b> Feedback Loops</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html"><i class="fa fa-check"></i><b>12</b> Unsupervised Learning</a>
<ul>
<li class="chapter" data-level="12.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#learning-objectives-3"><i class="fa fa-check"></i><b>12.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="12.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#applications-of-unsupervised-learning"><i class="fa fa-check"></i><b>12.2</b> Applications of Unsupervised Learning</a></li>
<li class="chapter" data-level="12.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#k-means-clustering"><i class="fa fa-check"></i><b>12.3</b> K-Means Clustering</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-with-k-2"><i class="fa fa-check"></i><b>12.3.1</b> Clustering with k = 2</a></li>
<li class="chapter" data-level="12.3.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-with-k-3"><i class="fa fa-check"></i><b>12.3.2</b> Clustering with k &gt;= 3</a></li>
<li class="chapter" data-level="12.3.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#determination-of-optimal-clusters"><i class="fa fa-check"></i><b>12.3.3</b> Determination of Optimal Clusters</a></li>
<li class="chapter" data-level="12.3.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#k-means-for-more-than-2-variables"><i class="fa fa-check"></i><b>12.3.4</b> k-means for more than 2 variables</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#hierarchical-clustering"><i class="fa fa-check"></i><b>12.4</b> Hierarchical Clustering</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-with-two-variables"><i class="fa fa-check"></i><b>12.4.1</b> Clustering with two variables</a></li>
<li class="chapter" data-level="12.4.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#determination-of-optimal-clusters-1"><i class="fa fa-check"></i><b>12.4.2</b> Determination of Optimal Clusters</a></li>
<li class="chapter" data-level="12.4.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#obtain-the-grouping"><i class="fa fa-check"></i><b>12.4.3</b> Obtain the grouping</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#dimensionality-reduction"><i class="fa fa-check"></i><b>12.5</b> Dimensionality Reduction</a></li>
<li class="chapter" data-level="12.6" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#exercises-18"><i class="fa fa-check"></i><b>12.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html"><i class="fa fa-check"></i><b>13</b> String processing and text mining</a>
<ul>
<li class="chapter" data-level="13.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#basic-functions"><i class="fa fa-check"></i><b>13.1</b> Basic functions</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#replacing-characters"><i class="fa fa-check"></i><b>13.1.1</b> Replacing characters</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#regular-expressions"><i class="fa fa-check"></i><b>13.2</b> Regular expressions</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#alternation"><i class="fa fa-check"></i><b>13.2.1</b> Alternation</a></li>
<li class="chapter" data-level="13.2.2" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#anchoring"><i class="fa fa-check"></i><b>13.2.2</b> Anchoring</a></li>
<li class="chapter" data-level="13.2.3" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#repetitions"><i class="fa fa-check"></i><b>13.2.3</b> Repetitions</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#from-strings-to-dates"><i class="fa fa-check"></i><b>13.3</b> From strings to dates</a></li>
<li class="chapter" data-level="13.4" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#exercises-19"><i class="fa fa-check"></i><b>13.4</b> Exercises</a></li>
<li class="chapter" data-level="13.5" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#text-mining-using-tidy-data"><i class="fa fa-check"></i><b>13.5</b> Text Mining using Tidy Data</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#importing-data-and-tokenization"><i class="fa fa-check"></i><b>13.5.1</b> Importing data and Tokenization</a></li>
<li class="chapter" data-level="13.5.2" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#text-cleaning-and-tokenization"><i class="fa fa-check"></i><b>13.5.2</b> Text cleaning and Tokenization</a></li>
<li class="chapter" data-level="13.5.3" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#word-cloud"><i class="fa fa-check"></i><b>13.5.3</b> Word Cloud</a></li>
<li class="chapter" data-level="13.5.4" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#word-frequency-plot"><i class="fa fa-check"></i><b>13.5.4</b> Word Frequency Plot</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#sentiment-analysis"><i class="fa fa-check"></i><b>13.6</b> Sentiment Analysis</a></li>
<li class="chapter" data-level="13.7" data-path="string-processing-and-text-mining.html"><a href="string-processing-and-text-mining.html#exercises-20"><i class="fa fa-check"></i><b>13.7</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>VI Generative AI</b></span></li>
<li class="chapter" data-level="14" data-path="genai-intro.html"><a href="genai-intro.html"><i class="fa fa-check"></i><b>14</b> Data Science in the Age of AI</a>
<ul>
<li class="chapter" data-level="14.1" data-path="genai-intro.html"><a href="genai-intro.html#what-is-a-large-language-model"><i class="fa fa-check"></i><b>14.1</b> What is a Large Language Model?</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="genai-intro.html"><a href="genai-intro.html#its-all-about-probability"><i class="fa fa-check"></i><b>14.1.1</b> It’s all about Probability</a></li>
<li class="chapter" data-level="14.1.2" data-path="genai-intro.html"><a href="genai-intro.html#tokens-vs.-words"><i class="fa fa-check"></i><b>14.1.2</b> Tokens vs. Words</a></li>
<li class="chapter" data-level="14.1.3" data-path="genai-intro.html"><a href="genai-intro.html#temperature-controlling-creativity"><i class="fa fa-check"></i><b>14.1.3</b> Temperature: Controlling Creativity</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="genai-intro.html"><a href="genai-intro.html#setting-up-your-ai-environment"><i class="fa fa-check"></i><b>14.2</b> Setting Up Your AI Environment</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="genai-intro.html"><a href="genai-intro.html#the-solution-local-llms"><i class="fa fa-check"></i><b>14.2.1</b> The Solution: Local LLMs</a></li>
<li class="chapter" data-level="14.2.2" data-path="genai-intro.html"><a href="genai-intro.html#the-.renviron-file"><i class="fa fa-check"></i><b>14.2.2</b> The <code>.Renviron</code> File</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="genai-intro.html"><a href="genai-intro.html#ai-as-the-pair-programmer"><i class="fa fa-check"></i><b>14.3</b> AI as the “Pair Programmer”</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="genai-intro.html"><a href="genai-intro.html#the-great-refactorer"><i class="fa fa-check"></i><b>14.3.1</b> The Great Refactorer</a></li>
<li class="chapter" data-level="14.3.2" data-path="genai-intro.html"><a href="genai-intro.html#the-translator"><i class="fa fa-check"></i><b>14.3.2</b> The Translator</a></li>
<li class="chapter" data-level="14.3.3" data-path="genai-intro.html"><a href="genai-intro.html#pro-tip-prompt-engineering-101"><i class="fa fa-check"></i><b>14.3.3</b> Pro Tip: Prompt Engineering 101</a></li>
<li class="chapter" data-level="14.3.4" data-path="genai-intro.html"><a href="genai-intro.html#the-regex-master"><i class="fa fa-check"></i><b>14.3.4</b> The Regex Master</a></li>
<li class="chapter" data-level="14.3.5" data-path="genai-intro.html"><a href="genai-intro.html#the-error-decoder"><i class="fa fa-check"></i><b>14.3.5</b> The Error Decoder</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="genai-intro.html"><a href="genai-intro.html#the-risks-hallucinations"><i class="fa fa-check"></i><b>14.4</b> The Risks: Hallucinations</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="genai-intro.html"><a href="genai-intro.html#the-package-hallucination"><i class="fa fa-check"></i><b>14.4.1</b> The “Package” Hallucination</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="genai-intro.html"><a href="genai-intro.html#building-a-robust-request"><i class="fa fa-check"></i><b>14.5</b> Building a Robust Request</a></li>
<li class="chapter" data-level="14.6" data-path="genai-intro.html"><a href="genai-intro.html#the-holy-grail-structured-data-extraction"><i class="fa fa-check"></i><b>14.6</b> The Holy Grail: Structured Data extraction</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="genai-intro.html"><a href="genai-intro.html#forcing-json-output"><i class="fa fa-check"></i><b>14.6.1</b> Forcing JSON Output</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="genai-intro.html"><a href="genai-intro.html#batch-processing-the-purrr-workflow"><i class="fa fa-check"></i><b>14.7</b> Batch Processing: The <code>purrr</code> Workflow</a></li>
<li class="chapter" data-level="14.8" data-path="genai-intro.html"><a href="genai-intro.html#summary"><i class="fa fa-check"></i><b>14.8</b> Summary</a></li>
<li class="chapter" data-level="14.9" data-path="genai-intro.html"><a href="genai-intro.html#beyond-generation-embeddings"><i class="fa fa-check"></i><b>14.9</b> Beyond Generation: Embeddings</a>
<ul>
<li class="chapter" data-level="14.9.1" data-path="genai-intro.html"><a href="genai-intro.html#r-implementation"><i class="fa fa-check"></i><b>14.9.1</b> R Implementation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="genai-embeddings.html"><a href="genai-embeddings.html"><i class="fa fa-check"></i><b>15</b> Text Analysis with Embeddings</a>
<ul>
<li class="chapter" data-level="15.1" data-path="genai-embeddings.html"><a href="genai-embeddings.html#beyond-bag-of-words"><i class="fa fa-check"></i><b>15.1</b> Beyond Bag-of-Words</a></li>
<li class="chapter" data-level="15.2" data-path="genai-embeddings.html"><a href="genai-embeddings.html#what-is-an-embedding"><i class="fa fa-check"></i><b>15.2</b> What is an Embedding?</a></li>
<li class="chapter" data-level="15.3" data-path="genai-embeddings.html"><a href="genai-embeddings.html#getting-embeddings-in-r"><i class="fa fa-check"></i><b>15.3</b> Getting Embeddings in R</a></li>
<li class="chapter" data-level="15.4" data-path="genai-embeddings.html"><a href="genai-embeddings.html#visualizing-meaning-dimensionality-reduction"><i class="fa fa-check"></i><b>15.4</b> Visualizing Meaning (Dimensionality Reduction)</a></li>
<li class="chapter" data-level="15.5" data-path="genai-embeddings.html"><a href="genai-embeddings.html#building-a-semantic-search-engine"><i class="fa fa-check"></i><b>15.5</b> Building a Semantic Search Engine</a></li>
<li class="chapter" data-level="15.6" data-path="genai-embeddings.html"><a href="genai-embeddings.html#summary-the-ai-workflow"><i class="fa fa-check"></i><b>15.6</b> Summary: The AI Workflow</a></li>
</ul></li>
<li class="part"><span><b>VII Real Cases</b></span></li>
<li class="chapter" data-level="" data-path="introduction-3.html"><a href="introduction-3.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="16" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html"><i class="fa fa-check"></i><b>16</b> Case Study: Real Estate Market Analysis</a>
<ul>
<li class="chapter" data-level="16.1" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#objectives"><i class="fa fa-check"></i><b>16.1</b> Objectives</a></li>
<li class="chapter" data-level="16.2" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#loading-libraries"><i class="fa fa-check"></i><b>16.2</b> Loading Libraries</a></li>
<li class="chapter" data-level="16.3" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#exploring-the-data"><i class="fa fa-check"></i><b>16.3</b> Exploring the Data</a></li>
<li class="chapter" data-level="16.4" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#data-cleaning"><i class="fa fa-check"></i><b>16.4</b> Data Cleaning</a></li>
<li class="chapter" data-level="16.5" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#exploratory-analysis"><i class="fa fa-check"></i><b>16.5</b> Exploratory Analysis</a>
<ul>
<li class="chapter" data-level="16.5.1" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#market-volume-over-time"><i class="fa fa-check"></i><b>16.5.1</b> Market Volume Over Time</a></li>
<li class="chapter" data-level="16.5.2" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#comparing-cities"><i class="fa fa-check"></i><b>16.5.2</b> Comparing Cities</a></li>
</ul></li>
<li class="chapter" data-level="16.6" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#creating-indicators"><i class="fa fa-check"></i><b>16.6</b> Creating Indicators</a></li>
<li class="chapter" data-level="16.7" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#try-it-yourself"><i class="fa fa-check"></i><b>16.7</b> Try It Yourself</a></li>
<li class="chapter" data-level="16.8" data-path="case-study-real-estate-market-analysis.html"><a href="case-study-real-estate-market-analysis.html#conclusions"><i class="fa fa-check"></i><b>16.8</b> Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html"><i class="fa fa-check"></i><b>17</b> Google Analytics from R</a>
<ul>
<li class="chapter" data-level="17.1" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#problem"><i class="fa fa-check"></i><b>17.1</b> Problem</a></li>
<li class="chapter" data-level="17.2" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#access-to-data"><i class="fa fa-check"></i><b>17.2</b> Access to data</a></li>
<li class="chapter" data-level="17.3" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#visualization"><i class="fa fa-check"></i><b>17.3</b> Visualization</a></li>
<li class="chapter" data-level="17.4" data-path="google-analytics-from-r.html"><a href="google-analytics-from-r.html#conclusion"><i class="fa fa-check"></i><b>17.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="ethics-checklist.html"><a href="ethics-checklist.html"><i class="fa fa-check"></i><b>18</b> Appendix A: Responsible AI Checklist</a>
<ul>
<li class="chapter" data-level="18.1" data-path="ethics-checklist.html"><a href="ethics-checklist.html#data-quality-lineage"><i class="fa fa-check"></i><b>18.1</b> Data Quality &amp; Lineage</a></li>
<li class="chapter" data-level="18.2" data-path="ethics-checklist.html"><a href="ethics-checklist.html#fairness-bias"><i class="fa fa-check"></i><b>18.2</b> Fairness &amp; Bias</a></li>
<li class="chapter" data-level="18.3" data-path="ethics-checklist.html"><a href="ethics-checklist.html#transparency-explainability"><i class="fa fa-check"></i><b>18.3</b> Transparency &amp; Explainability</a></li>
<li class="chapter" data-level="18.4" data-path="ethics-checklist.html"><a href="ethics-checklist.html#reproducibility-integrity"><i class="fa fa-check"></i><b>18.4</b> Reproducibility &amp; Integrity</a></li>
<li class="chapter" data-level="18.5" data-path="ethics-checklist.html"><a href="ethics-checklist.html#genai-specifics"><i class="fa fa-check"></i><b>18.5</b> GenAI Specifics</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="r6-intro.html"><a href="r6-intro.html"><i class="fa fa-check"></i><b>19</b> Appendix B: Object Oriented Programming with R6</a>
<ul>
<li class="chapter" data-level="19.1" data-path="r6-intro.html"><a href="r6-intro.html#the-r6-package-classes-methods-encapsulation-and-inheritance"><i class="fa fa-check"></i><b>19.1</b> The R6 package: Classes, methods, encapsulation, and inheritance</a></li>
<li class="chapter" data-level="19.2" data-path="r6-intro.html"><a href="r6-intro.html#exercises-21"><i class="fa fa-check"></i><b>19.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="functions" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Functions<a href="functions.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introduction-to-the-world-of-functions" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Introduction to the world of functions<a href="functions.html#introduction-to-the-world-of-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the previous chapter, we explored the different types of objects we can use to store and organize information in R. We learned to create variables, vectors, lists, matrices, and arrays, and saw how to access their elements and perform operations with them.</p>
<p>Now, in this chapter, we will go a step further and delve into the world of <strong>functions</strong>. Functions are one of the fundamental pillars of programming in R, allowing us to perform more complex tasks and automate our work.</p>
<div id="what-are-functions" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> What are functions?<a href="functions.html#what-are-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Imagine a coffee machine. You provide the ingredients (water, coffee, sugar), and the machine performs a series of steps to produce a cup of coffee. Similarly, a function in R is a set of instructions that receives input data (the <strong>arguments</strong>) and performs a series of operations to produce a result (the <strong>return value</strong>).</p>
<p>Functions allow us to encapsulate a set of instructions into a single block of code, facilitating reuse and code organization. Instead of writing the same instructions over and over again, we can create a function that performs them for us.</p>
</div>
<div id="why-use-functions" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Why use functions?<a href="functions.html#why-use-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Functions offer several advantages, starting with <strong>Reusability</strong>, which allows us to use the same logic in different parts of our code or across projects. They also improve <strong>Organization</strong> by breaking code into logical blocks, and enhance <strong>Readability</strong> by keeping scripts concise. Finally, functions provide <strong>Abstraction</strong>, hiding complex implementation details so we can focus on the problem logic.</p>
</div>
<div id="first-functions-exploring-basic-r-functions" class="section level3 hasAnchor" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> First functions: exploring basic R functions<a href="functions.html#first-functions-exploring-basic-r-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R includes a large number of predefined functions. For instance, <code>sum()</code> calculates the total of a vector’s elements, while <code>mean()</code> computes their arithmetic average.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="functions.html#cb38-1" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb38-2"><a href="functions.html#cb38-2" tabindex="-1"></a><span class="fu">sum</span>(numbers)  <span class="co"># Output: 15</span></span>
<span id="cb38-3"><a href="functions.html#cb38-3" tabindex="-1"></a><span class="co">#&gt; [1] 15</span></span>
<span id="cb38-4"><a href="functions.html#cb38-4" tabindex="-1"></a></span>
<span id="cb38-5"><a href="functions.html#cb38-5" tabindex="-1"></a>temperatures <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">28</span>, <span class="dv">26</span>, <span class="dv">29</span>, <span class="dv">27</span>)</span>
<span id="cb38-6"><a href="functions.html#cb38-6" tabindex="-1"></a><span class="fu">mean</span>(temperatures)  <span class="co"># Output: 27</span></span>
<span id="cb38-7"><a href="functions.html#cb38-7" tabindex="-1"></a><span class="co">#&gt; [1] 27</span></span></code></pre></div>
<p>Other common functions include <code>round()</code>, which limits the number of decimal places, and <code>length()</code>, which tells us how many elements a vector contains.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="functions.html#cb39-1" tabindex="-1"></a>pi  <span class="co"># Output: 3.141593</span></span>
<span id="cb39-2"><a href="functions.html#cb39-2" tabindex="-1"></a><span class="co">#&gt; [1] 3.141593</span></span>
<span id="cb39-3"><a href="functions.html#cb39-3" tabindex="-1"></a><span class="fu">round</span>(pi, <span class="dv">2</span>)  <span class="co"># Output: 3.14</span></span>
<span id="cb39-4"><a href="functions.html#cb39-4" tabindex="-1"></a><span class="co">#&gt; [1] 3.14</span></span>
<span id="cb39-5"><a href="functions.html#cb39-5" tabindex="-1"></a></span>
<span id="cb39-6"><a href="functions.html#cb39-6" tabindex="-1"></a>cities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;New York&quot;</span>, <span class="st">&quot;Los Angeles&quot;</span>, <span class="st">&quot;Chicago&quot;</span>)</span>
<span id="cb39-7"><a href="functions.html#cb39-7" tabindex="-1"></a><span class="fu">length</span>(cities)  <span class="co"># Output: 3</span></span>
<span id="cb39-8"><a href="functions.html#cb39-8" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<p>These are just a few of the many predefined functions that R offers. As we progress through the book, we will explore more functions and learn how to use them to perform more complex data analysis.</p>
</div>
</div>
<div id="anatomy-of-a-function" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Anatomy of a function<a href="functions.html#anatomy-of-a-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the previous section, we saw what functions are and why they are so useful in programming. Now, we are going to delve into the structure of a function, so you can create your own functions and automate tasks in your data analysis.</p>
<div id="arguments-the-ingredients-of-the-function" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Arguments: the ingredients of the function<a href="functions.html#arguments-the-ingredients-of-the-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To make a cup of coffee, you need ingredients: water, coffee, and maybe sugar or milk. Similarly, functions in R need <strong>arguments</strong> to do their job. Arguments are the input data that the function uses to perform its operations.</p>
<p>For example, the <code>sum()</code> function needs a vector of numbers as an argument to calculate the sum of its elements.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="functions.html#cb40-1" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb40-2"><a href="functions.html#cb40-2" tabindex="-1"></a><span class="fu">sum</span>(numbers)  <span class="co"># Output: 15</span></span>
<span id="cb40-3"><a href="functions.html#cb40-3" tabindex="-1"></a><span class="co">#&gt; [1] 15</span></span></code></pre></div>
<p>A function’s arguments are specified in parentheses after the function name. If a function requires multiple arguments, they are separated by commas.</p>
<p>For example, imagine we want to create a function to calculate the total cost of a plane trip. This function might need the <code>ticket_price</code>, the <code>num_people</code> traveling, and an optional <code>discount</code> (such as a reduction for students or senior citizens).</p>
<p>The function could be called <code>calculate_vacation_cost</code> and would be used as follows:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="functions.html#cb41-1" tabindex="-1"></a><span class="fu">calculate_vacation_cost</span>(<span class="at">ticket_price =</span> <span class="dv">300</span>, <span class="at">num_people =</span> <span class="dv">2</span>, <span class="at">discount =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<p>In this case, we are passing three arguments to the function: <code>ticket_price</code> with value 300, <code>num_people</code> with value 2, and <code>discount</code> with value 0.1 (representing a 10% discount).</p>
</div>
<div id="body-the-instructions-of-the-function" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Body: the instructions of the function<a href="functions.html#body-the-instructions-of-the-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <strong>body</strong> of a function is the set of instructions that are executed when the function is called. These instructions can be any valid R code: variable assignments, mathematical operations, conditionals, loops, calls to other functions, etc.</p>
<p>The body of a function is defined within curly braces <code>{}</code>.</p>
<p>For example, the body of the function <code>calculate_trip_cost</code> could be:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="functions.html#cb42-1" tabindex="-1"></a>calculate_vacation_cost <span class="ot">&lt;-</span> <span class="cf">function</span>(ticket_price, num_people, <span class="at">discount =</span> <span class="dv">0</span>) {</span>
<span id="cb42-2"><a href="functions.html#cb42-2" tabindex="-1"></a>  total_cost <span class="ot">&lt;-</span> ticket_price <span class="sc">*</span> num_people <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> discount)</span>
<span id="cb42-3"><a href="functions.html#cb42-3" tabindex="-1"></a>  <span class="fu">return</span>(total_cost)</span>
<span id="cb42-4"><a href="functions.html#cb42-4" tabindex="-1"></a>}</span></code></pre></div>
<p>In this body, first the total cost of the trip is calculated by multiplying the ticket price by the number of people and by (1 minus the discount). Then, <code>return()</code> is used to return the <code>total_cost</code>.</p>
<p>Note that in the function definition, the argument <code>discount</code> has a default value of 0. This means that if we do not specify a value for <code>discount</code> when calling the function, the value 0 will be used.</p>
<p>For example, if we do not specify a value for <code>discount</code>, the function uses the default value 0, and the total cost is 600:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="functions.html#cb43-1" tabindex="-1"></a><span class="co"># Call the function without specifying the discount</span></span>
<span id="cb43-2"><a href="functions.html#cb43-2" tabindex="-1"></a><span class="fu">calculate_vacation_cost</span>(<span class="at">ticket_price =</span> <span class="dv">300</span>, <span class="at">num_people =</span> <span class="dv">2</span>)</span>
<span id="cb43-3"><a href="functions.html#cb43-3" tabindex="-1"></a><span class="co">#&gt; [1] 600</span></span></code></pre></div>
<p>If we want to apply a discount, we can specify it when calling the function:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="functions.html#cb44-1" tabindex="-1"></a><span class="fu">calculate_vacation_cost</span>(<span class="at">ticket_price =</span> <span class="dv">300</span>, <span class="at">num_people =</span> <span class="dv">2</span>, <span class="at">discount =</span> <span class="fl">0.1</span>)</span>
<span id="cb44-2"><a href="functions.html#cb44-2" tabindex="-1"></a><span class="co">#&gt; [1] 540</span></span></code></pre></div>
<p>In this case, the total cost is 540, since a 10% discount is applied.</p>
</div>
<div id="return-value-the-result-of-the-function" class="section level3 hasAnchor" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Return value: the result of the function<a href="functions.html#return-value-the-result-of-the-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <strong>return value</strong> is the result the function produces after executing its instructions. It can be a simple value (a number, text, a logical value) or a more complex object (a vector, a list, a data frame).</p>
<p>In R, the return value is specified with the <code>return()</code> function. If <code>return()</code> is not used, the function will return the result of the last expression evaluated in the body.</p>
<p>In the <code>calculate_vacation_cost</code> example, the return value is the <code>total_cost</code> of the trip, which is a number.</p>
</div>
<div id="examples-creating-simple-functions-step-by-step" class="section level3 hasAnchor" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Examples: creating simple functions step by step<a href="functions.html#examples-creating-simple-functions-step-by-step" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s see an example of how to create a simple function that converts degrees Celsius to Fahrenheit:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="functions.html#cb45-1" tabindex="-1"></a>celsius_to_fahrenheit <span class="ot">&lt;-</span> <span class="cf">function</span>(celsius) {</span>
<span id="cb45-2"><a href="functions.html#cb45-2" tabindex="-1"></a>  fahrenheit <span class="ot">&lt;-</span> (celsius <span class="sc">*</span> <span class="dv">9</span> <span class="sc">/</span> <span class="dv">5</span>) <span class="sc">+</span> <span class="dv">32</span></span>
<span id="cb45-3"><a href="functions.html#cb45-3" tabindex="-1"></a>  <span class="fu">return</span>(fahrenheit)</span>
<span id="cb45-4"><a href="functions.html#cb45-4" tabindex="-1"></a>}</span></code></pre></div>
<p>In this example, <code>celsius_to_fahrenheit</code> is the name of the function, and <code>celsius</code> is its argument representing the input temperature. Inside the body, the function calculates the equivalent Fahrenheit value using the formula <code>(celsius * 9 / 5) + 32</code> and stores it in the variable <code>fahrenheit</code>, which is then sent back as the result using <code>return()</code>.</p>
<p>Now we can use our function to convert temperatures:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="functions.html#cb46-1" tabindex="-1"></a><span class="fu">celsius_to_fahrenheit</span>(<span class="dv">0</span>)   <span class="co"># Output: 32</span></span>
<span id="cb46-2"><a href="functions.html#cb46-2" tabindex="-1"></a><span class="co">#&gt; [1] 32</span></span>
<span id="cb46-3"><a href="functions.html#cb46-3" tabindex="-1"></a><span class="fu">celsius_to_fahrenheit</span>(<span class="dv">100</span>)  <span class="co"># Output: 212</span></span>
<span id="cb46-4"><a href="functions.html#cb46-4" tabindex="-1"></a><span class="co">#&gt; [1] 212</span></span></code></pre></div>
<p>Congratulations! You just created your first function in R. As we progress through the chapter, you will learn to create more complex functions and use them to solve real-world problems.</p>
</div>
</div>
<div id="mastering-the-use-of-functions" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Mastering the use of functions<a href="functions.html#mastering-the-use-of-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We have already seen how to create simple functions with basic arguments, including the possibility of assigning default values. Now, we will explore even more advanced techniques to master the use of functions and write more flexible and efficient code.</p>
<div id="functions-with-a-variable-number-of-arguments-...-adapting-to-different-situations" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Functions with a variable number of arguments (<code>...</code>): Adapting to different situations<a href="functions.html#functions-with-a-variable-number-of-arguments-...-adapting-to-different-situations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes, we don’t know beforehand how many arguments a function will receive. For these cases, R offers us the possibility of defining functions with a variable number of arguments using the three dots (<code>...</code>).</p>
<p>For example, the <code>sum()</code> function can receive any number of arguments:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="functions.html#cb47-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>) </span>
<span id="cb47-2"><a href="functions.html#cb47-2" tabindex="-1"></a><span class="co">#&gt; [1] 6</span></span>
<span id="cb47-3"><a href="functions.html#cb47-3" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)  <span class="co"># Output: 15</span></span>
<span id="cb47-4"><a href="functions.html#cb47-4" tabindex="-1"></a><span class="co">#&gt; [1] 15</span></span></code></pre></div>
<p>We can use the three dots (<code>...</code>) to create our own functions that accept a variable number of arguments. For example, a function that calculates the average of several numbers:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="functions.html#cb48-1" tabindex="-1"></a>calculate_average <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb48-2"><a href="functions.html#cb48-2" tabindex="-1"></a>  numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(...)</span>
<span id="cb48-3"><a href="functions.html#cb48-3" tabindex="-1"></a>  average <span class="ot">&lt;-</span> <span class="fu">mean</span>(numbers)</span>
<span id="cb48-4"><a href="functions.html#cb48-4" tabindex="-1"></a>  <span class="fu">return</span>(average)</span>
<span id="cb48-5"><a href="functions.html#cb48-5" tabindex="-1"></a>}</span>
<span id="cb48-6"><a href="functions.html#cb48-6" tabindex="-1"></a></span>
<span id="cb48-7"><a href="functions.html#cb48-7" tabindex="-1"></a><span class="fu">calculate_average</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb48-8"><a href="functions.html#cb48-8" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb48-9"><a href="functions.html#cb48-9" tabindex="-1"></a><span class="fu">calculate_average</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb48-10"><a href="functions.html#cb48-10" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<p>In this example, the three dots (<code>...</code>) capture all the arguments passed to the function and store them in the <code>numbers</code> vector. Then, the function calculates the average of the numbers in the vector and returns it as a result.</p>
<p>It is important to note that when using <code>...</code>, we lose the ability to name the arguments individually. However, we gain flexibility by being able to pass a variable number of arguments to the function.</p>
</div>
<div id="variable-scope-local-and-global-variables" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Variable scope: local and global variables<a href="functions.html#variable-scope-local-and-global-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <strong>scope</strong> of a variable refers to the part of the code where the variable is accessible. In R, variables defined inside a function have a <strong>local</strong> scope, meaning they are only accessible within the function. Variables defined outside any function have a <strong>global</strong> scope, meaning they are accessible from anywhere in the code.</p>
<p>For example, in the function <code>calculate_average</code>, the variable <code>numbers</code> has a local scope:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="functions.html#cb49-1" tabindex="-1"></a>calculate_average <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb49-2"><a href="functions.html#cb49-2" tabindex="-1"></a>  numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(...)</span>
<span id="cb49-3"><a href="functions.html#cb49-3" tabindex="-1"></a>  average <span class="ot">&lt;-</span> <span class="fu">mean</span>(numbers)</span>
<span id="cb49-4"><a href="functions.html#cb49-4" tabindex="-1"></a>  <span class="fu">return</span>(average)</span>
<span id="cb49-5"><a href="functions.html#cb49-5" tabindex="-1"></a>}</span></code></pre></div>
<p>If we try to access the variable numbers outside the function, we will get an error:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="functions.html#cb50-1" tabindex="-1"></a>numbers  <span class="co"># Error: object &#39;numbers&#39; not found</span></span></code></pre></div>
<p>This is because <code>numbers</code> only exists inside the <code>calculate_average</code> function. When the function finishes executing, the local variables defined inside it cease to exist.</p>
<p>On the other hand, if we define a variable outside any function, it will be a global variable:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="functions.html#cb51-1" tabindex="-1"></a>conversion_rate <span class="ot">&lt;-</span> <span class="fl">0.621371</span>  <span class="co"># Conversion rate from kilometers to miles</span></span></code></pre></div>
<p>We can access the <code>conversion_rate</code> variable from anywhere in the code, even inside a function:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="functions.html#cb52-1" tabindex="-1"></a>kilometers_to_miles <span class="ot">&lt;-</span> <span class="cf">function</span>(kilometers) {</span>
<span id="cb52-2"><a href="functions.html#cb52-2" tabindex="-1"></a>  miles <span class="ot">&lt;-</span> kilometers <span class="sc">*</span> conversion_rate</span>
<span id="cb52-3"><a href="functions.html#cb52-3" tabindex="-1"></a>  <span class="fu">return</span>(miles)</span>
<span id="cb52-4"><a href="functions.html#cb52-4" tabindex="-1"></a>}</span>
<span id="cb52-5"><a href="functions.html#cb52-5" tabindex="-1"></a></span>
<span id="cb52-6"><a href="functions.html#cb52-6" tabindex="-1"></a><span class="fu">kilometers_to_miles</span>(<span class="dv">100</span>)</span>
<span id="cb52-7"><a href="functions.html#cb52-7" tabindex="-1"></a><span class="co">#&gt; [1] 62.1371</span></span></code></pre></div>
<p>It is important to keep variable scope in mind when writing functions to avoid errors and confusion. If a variable is not defined in the current scope (local), R will look in the global scope. If the variable is not found in any scope, an error will occur.</p>
<p>For example, imagine we want to calculate the total cost of a trip, including the cost of the plane ticket, accommodation, and other expenses. We can create a function that receives these expenses as arguments and calculates the total cost:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="functions.html#cb53-1" tabindex="-1"></a>calculate_trip_cost <span class="ot">&lt;-</span> <span class="cf">function</span>(ticket, accommodation, other_expenses) {</span>
<span id="cb53-2"><a href="functions.html#cb53-2" tabindex="-1"></a>  total_cost <span class="ot">&lt;-</span> ticket <span class="sc">+</span> accommodation <span class="sc">+</span> other_expenses</span>
<span id="cb53-3"><a href="functions.html#cb53-3" tabindex="-1"></a>  <span class="fu">return</span>(total_cost)</span>
<span id="cb53-4"><a href="functions.html#cb53-4" tabindex="-1"></a>}</span></code></pre></div>
<p>If we call this function with expense values, we get the total cost:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="functions.html#cb54-1" tabindex="-1"></a><span class="fu">calculate_trip_cost</span>(<span class="at">ticket =</span> <span class="dv">300</span>, <span class="at">accommodation =</span> <span class="dv">500</span>, <span class="at">other_expenses =</span> <span class="dv">100</span>) </span>
<span id="cb54-2"><a href="functions.html#cb54-2" tabindex="-1"></a><span class="co">#&gt; [1] 900</span></span></code></pre></div>
<p>Now, imagine we want to apply a tax to the total cost. We could define a global variable <code>tax_rate</code>:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="functions.html#cb55-1" tabindex="-1"></a>tax_rate <span class="ot">&lt;-</span> <span class="fl">0.16</span></span></code></pre></div>
<blockquote>
<p><strong>Warning:</strong> Relying on global variables inside a function (like <code>tax_rate</code> in the example below) is generally considered bad practice. It makes the function dependent on the external environment, which can lead to unexpected errors if the global variable changes or doesn’t exist. It is better to pass all necessary values as arguments to the function.</p>
</blockquote>
<p>And then modify the function to include the tax:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="functions.html#cb56-1" tabindex="-1"></a>calculate_trip_cost <span class="ot">&lt;-</span> <span class="cf">function</span>(ticket, accommodation, other_expenses) {</span>
<span id="cb56-2"><a href="functions.html#cb56-2" tabindex="-1"></a>  total_cost <span class="ot">&lt;-</span> ticket <span class="sc">+</span> accommodation <span class="sc">+</span> other_expenses</span>
<span id="cb56-3"><a href="functions.html#cb56-3" tabindex="-1"></a>  total_cost <span class="ot">&lt;-</span> total_cost <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> tax_rate)</span>
<span id="cb56-4"><a href="functions.html#cb56-4" tabindex="-1"></a>  <span class="fu">return</span>(total_cost)</span>
<span id="cb56-5"><a href="functions.html#cb56-5" tabindex="-1"></a>}</span></code></pre></div>
<p>When calling the function again, the total cost will include the tax:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="functions.html#cb57-1" tabindex="-1"></a><span class="fu">calculate_trip_cost</span>(<span class="at">ticket =</span> <span class="dv">300</span>, <span class="at">accommodation =</span> <span class="dv">500</span>, <span class="at">other_expenses =</span> <span class="dv">100</span>)</span>
<span id="cb57-2"><a href="functions.html#cb57-2" tabindex="-1"></a><span class="co">#&gt; [1] 1044</span></span></code></pre></div>
<p>In this case, the <code>calculate_trip_cost</code> function can access the global variable <code>tax_rate</code> because it is not defined locally within the function.</p>
<p>If we try to use a variable that is not defined in any scope, we will get an error:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="functions.html#cb58-1" tabindex="-1"></a>calculate_trip_cost <span class="ot">&lt;-</span> <span class="cf">function</span>(ticket, accommodation, other_expenses) {</span>
<span id="cb58-2"><a href="functions.html#cb58-2" tabindex="-1"></a>  total_cost <span class="ot">&lt;-</span> ticket <span class="sc">+</span> accommodation <span class="sc">+</span> other_expenses <span class="sc">+</span> tip</span>
<span id="cb58-3"><a href="functions.html#cb58-3" tabindex="-1"></a>  <span class="fu">return</span>(total_cost)</span>
<span id="cb58-4"><a href="functions.html#cb58-4" tabindex="-1"></a>}</span>
<span id="cb58-5"><a href="functions.html#cb58-5" tabindex="-1"></a></span>
<span id="cb58-6"><a href="functions.html#cb58-6" tabindex="-1"></a><span class="fu">calculate_trip_cost</span>(<span class="at">ticket =</span> <span class="dv">300</span>, <span class="at">accommodation =</span> <span class="dv">500</span>, <span class="at">other_expenses =</span> <span class="dv">100</span>)  <span class="co"># Error: object &#39;tip&#39; not found</span></span></code></pre></div>
<p>In this case, the variable <code>tip</code> is not defined either locally or globally, so the function cannot access it.</p>
<p>It is important to understand the concept of variable scope to write functions that work correctly and avoid errors.</p>
</div>
<div id="examples-functions-to-calculate-taxes-discounts-etc." class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Examples: functions to calculate taxes, discounts, etc.<a href="functions.html#examples-functions-to-calculate-taxes-discounts-etc." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Functions are very useful for automating repetitive tasks, such as calculating taxes, discounts, or converting units. Let’s look at some examples with different levels of difficulty:</p>
<p><strong>Calculating shipping cost for a package</strong></p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="functions.html#cb59-1" tabindex="-1"></a>calculate_shipping_cost <span class="ot">&lt;-</span> <span class="cf">function</span>(weight, destination) {</span>
<span id="cb59-2"><a href="functions.html#cb59-2" tabindex="-1"></a>  <span class="cf">if</span> (destination <span class="sc">==</span> <span class="st">&quot;local&quot;</span>) {</span>
<span id="cb59-3"><a href="functions.html#cb59-3" tabindex="-1"></a>    cost <span class="ot">&lt;-</span> <span class="dv">5</span> <span class="sc">+</span> <span class="fl">0.1</span> <span class="sc">*</span> weight</span>
<span id="cb59-4"><a href="functions.html#cb59-4" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (destination <span class="sc">==</span> <span class="st">&quot;national&quot;</span>) {</span>
<span id="cb59-5"><a href="functions.html#cb59-5" tabindex="-1"></a>    cost <span class="ot">&lt;-</span> <span class="dv">10</span> <span class="sc">+</span> <span class="fl">0.2</span> <span class="sc">*</span> weight</span>
<span id="cb59-6"><a href="functions.html#cb59-6" tabindex="-1"></a>  } <span class="cf">else</span> {  <span class="co"># destination == &quot;international&quot;</span></span>
<span id="cb59-7"><a href="functions.html#cb59-7" tabindex="-1"></a>    cost <span class="ot">&lt;-</span> <span class="dv">20</span> <span class="sc">+</span> <span class="fl">0.5</span> <span class="sc">*</span> weight</span>
<span id="cb59-8"><a href="functions.html#cb59-8" tabindex="-1"></a>  }</span>
<span id="cb59-9"><a href="functions.html#cb59-9" tabindex="-1"></a>  <span class="fu">return</span>(cost)</span>
<span id="cb59-10"><a href="functions.html#cb59-10" tabindex="-1"></a>}</span>
<span id="cb59-11"><a href="functions.html#cb59-11" tabindex="-1"></a></span>
<span id="cb59-12"><a href="functions.html#cb59-12" tabindex="-1"></a><span class="co"># Usage example</span></span>
<span id="cb59-13"><a href="functions.html#cb59-13" tabindex="-1"></a>package_weight <span class="ot">&lt;-</span> <span class="fl">2.5</span>  <span class="co"># Weight in kilograms</span></span>
<span id="cb59-14"><a href="functions.html#cb59-14" tabindex="-1"></a>destination <span class="ot">&lt;-</span> <span class="st">&quot;national&quot;</span></span>
<span id="cb59-15"><a href="functions.html#cb59-15" tabindex="-1"></a>shipping_cost <span class="ot">&lt;-</span> <span class="fu">calculate_shipping_cost</span>(package_weight, destination)</span>
<span id="cb59-16"><a href="functions.html#cb59-16" tabindex="-1"></a></span>
<span id="cb59-17"><a href="functions.html#cb59-17" tabindex="-1"></a>shipping_cost</span>
<span id="cb59-18"><a href="functions.html#cb59-18" tabindex="-1"></a><span class="co">#&gt; [1] 10.5</span></span></code></pre></div>
<p>In this example, the <code>calculate_shipping_cost()</code> function calculates the shipping cost of a package based on its weight and destination. The function uses a conditional structure (<code>if</code>-<code>else if</code>-<code>else</code>) to apply different shipping rates depending on the destination.</p>
<p><strong>Calculating income tax with brackets</strong></p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="functions.html#cb60-1" tabindex="-1"></a>calculate_income_tax <span class="ot">&lt;-</span> <span class="cf">function</span>(income) {</span>
<span id="cb60-2"><a href="functions.html#cb60-2" tabindex="-1"></a>  <span class="cf">if</span> (income <span class="sc">&lt;=</span> <span class="dv">10000</span>) {</span>
<span id="cb60-3"><a href="functions.html#cb60-3" tabindex="-1"></a>    rate <span class="ot">&lt;-</span> <span class="fl">0.10</span></span>
<span id="cb60-4"><a href="functions.html#cb60-4" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (income <span class="sc">&lt;=</span> <span class="dv">20000</span>) {</span>
<span id="cb60-5"><a href="functions.html#cb60-5" tabindex="-1"></a>    rate <span class="ot">&lt;-</span> <span class="fl">0.15</span></span>
<span id="cb60-6"><a href="functions.html#cb60-6" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb60-7"><a href="functions.html#cb60-7" tabindex="-1"></a>    rate <span class="ot">&lt;-</span> <span class="fl">0.20</span></span>
<span id="cb60-8"><a href="functions.html#cb60-8" tabindex="-1"></a>  }</span>
<span id="cb60-9"><a href="functions.html#cb60-9" tabindex="-1"></a>  tax <span class="ot">&lt;-</span> income <span class="sc">*</span> rate</span>
<span id="cb60-10"><a href="functions.html#cb60-10" tabindex="-1"></a>  <span class="fu">return</span>(tax)</span>
<span id="cb60-11"><a href="functions.html#cb60-11" tabindex="-1"></a>}</span>
<span id="cb60-12"><a href="functions.html#cb60-12" tabindex="-1"></a></span>
<span id="cb60-13"><a href="functions.html#cb60-13" tabindex="-1"></a><span class="co"># Usage example</span></span>
<span id="cb60-14"><a href="functions.html#cb60-14" tabindex="-1"></a>income <span class="ot">&lt;-</span> <span class="dv">15000</span></span>
<span id="cb60-15"><a href="functions.html#cb60-15" tabindex="-1"></a>tax <span class="ot">&lt;-</span> <span class="fu">calculate_income_tax</span>(income)</span>
<span id="cb60-16"><a href="functions.html#cb60-16" tabindex="-1"></a></span>
<span id="cb60-17"><a href="functions.html#cb60-17" tabindex="-1"></a>tax</span>
<span id="cb60-18"><a href="functions.html#cb60-18" tabindex="-1"></a><span class="co">#&gt; [1] 2250</span></span></code></pre></div>
<p>In this example, the <code>calculate_income_tax()</code> function calculates a person’s income tax based on their income. The function uses a conditional structure (<code>if</code>-<code>else if</code>-<code>else</code>) to apply different tax rates according to the income bracket.</p>
<p><strong>Calculating trip cost with multiple options</strong></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="functions.html#cb61-1" tabindex="-1"></a>calculate_trip_cost <span class="ot">&lt;-</span> <span class="cf">function</span>(origin_city, destination_city, </span>
<span id="cb61-2"><a href="functions.html#cb61-2" tabindex="-1"></a>                                 <span class="at">transport_type =</span> <span class="st">&quot;plane&quot;</span>, </span>
<span id="cb61-3"><a href="functions.html#cb61-3" tabindex="-1"></a>                                 <span class="at">num_people =</span> <span class="dv">1</span>, </span>
<span id="cb61-4"><a href="functions.html#cb61-4" tabindex="-1"></a>                                 <span class="at">hotel =</span> <span class="cn">NULL</span>, </span>
<span id="cb61-5"><a href="functions.html#cb61-5" tabindex="-1"></a>                                 <span class="at">daily_expenses =</span> <span class="dv">100</span>, </span>
<span id="cb61-6"><a href="functions.html#cb61-6" tabindex="-1"></a>                                 <span class="at">trip_duration =</span> <span class="dv">7</span>) {</span>
<span id="cb61-7"><a href="functions.html#cb61-7" tabindex="-1"></a>  </span>
<span id="cb61-8"><a href="functions.html#cb61-8" tabindex="-1"></a>  <span class="co"># Calculate transport cost</span></span>
<span id="cb61-9"><a href="functions.html#cb61-9" tabindex="-1"></a>  <span class="cf">if</span> (transport_type <span class="sc">==</span> <span class="st">&quot;plane&quot;</span>) {</span>
<span id="cb61-10"><a href="functions.html#cb61-10" tabindex="-1"></a>    transport_cost <span class="ot">&lt;-</span> <span class="dv">300</span> <span class="sc">*</span> num_people  <span class="co"># Base price per person</span></span>
<span id="cb61-11"><a href="functions.html#cb61-11" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (transport_type <span class="sc">==</span> <span class="st">&quot;train&quot;</span>) {</span>
<span id="cb61-12"><a href="functions.html#cb61-12" tabindex="-1"></a>    transport_cost <span class="ot">&lt;-</span> <span class="dv">150</span> <span class="sc">*</span> num_people  <span class="co"># Base price per person</span></span>
<span id="cb61-13"><a href="functions.html#cb61-13" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb61-14"><a href="functions.html#cb61-14" tabindex="-1"></a>    transport_cost <span class="ot">&lt;-</span> <span class="dv">0</span>  <span class="co"># Assuming transport is by own car</span></span>
<span id="cb61-15"><a href="functions.html#cb61-15" tabindex="-1"></a>  }</span>
<span id="cb61-16"><a href="functions.html#cb61-16" tabindex="-1"></a>  </span>
<span id="cb61-17"><a href="functions.html#cb61-17" tabindex="-1"></a>  <span class="co"># Calculate accommodation cost</span></span>
<span id="cb61-18"><a href="functions.html#cb61-18" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(hotel)) {</span>
<span id="cb61-19"><a href="functions.html#cb61-19" tabindex="-1"></a>    accommodation_cost <span class="ot">&lt;-</span> hotel<span class="sc">$</span>price <span class="sc">*</span> trip_duration</span>
<span id="cb61-20"><a href="functions.html#cb61-20" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb61-21"><a href="functions.html#cb61-21" tabindex="-1"></a>    accommodation_cost <span class="ot">&lt;-</span> <span class="dv">0</span>  <span class="co"># Assuming staying not at a hotel</span></span>
<span id="cb61-22"><a href="functions.html#cb61-22" tabindex="-1"></a>  }</span>
<span id="cb61-23"><a href="functions.html#cb61-23" tabindex="-1"></a>  </span>
<span id="cb61-24"><a href="functions.html#cb61-24" tabindex="-1"></a>  <span class="co"># Calculate other expenses</span></span>
<span id="cb61-25"><a href="functions.html#cb61-25" tabindex="-1"></a>  other_expenses <span class="ot">&lt;-</span> daily_expenses <span class="sc">*</span> num_people <span class="sc">*</span> trip_duration</span>
<span id="cb61-26"><a href="functions.html#cb61-26" tabindex="-1"></a>  </span>
<span id="cb61-27"><a href="functions.html#cb61-27" tabindex="-1"></a>  <span class="co"># Calculate total cost</span></span>
<span id="cb61-28"><a href="functions.html#cb61-28" tabindex="-1"></a>  total_cost <span class="ot">&lt;-</span> transport_cost <span class="sc">+</span> accommodation_cost <span class="sc">+</span> other_expenses</span>
<span id="cb61-29"><a href="functions.html#cb61-29" tabindex="-1"></a>  </span>
<span id="cb61-30"><a href="functions.html#cb61-30" tabindex="-1"></a>  <span class="fu">return</span>(total_cost)</span>
<span id="cb61-31"><a href="functions.html#cb61-31" tabindex="-1"></a>}</span>
<span id="cb61-32"><a href="functions.html#cb61-32" tabindex="-1"></a></span>
<span id="cb61-33"><a href="functions.html#cb61-33" tabindex="-1"></a><span class="co"># Usage example</span></span>
<span id="cb61-34"><a href="functions.html#cb61-34" tabindex="-1"></a>trip_cost_1 <span class="ot">&lt;-</span> <span class="fu">calculate_trip_cost</span>(<span class="at">origin_city =</span> <span class="st">&quot;Lima&quot;</span>, </span>
<span id="cb61-35"><a href="functions.html#cb61-35" tabindex="-1"></a>                                     <span class="at">destination_city =</span> <span class="st">&quot;New York&quot;</span>, </span>
<span id="cb61-36"><a href="functions.html#cb61-36" tabindex="-1"></a>                                     <span class="at">transport_type =</span> <span class="st">&quot;plane&quot;</span>, </span>
<span id="cb61-37"><a href="functions.html#cb61-37" tabindex="-1"></a>                                     <span class="at">num_people =</span> <span class="dv">2</span>)</span>
<span id="cb61-38"><a href="functions.html#cb61-38" tabindex="-1"></a></span>
<span id="cb61-39"><a href="functions.html#cb61-39" tabindex="-1"></a>trip_cost_2 <span class="ot">&lt;-</span> <span class="fu">calculate_trip_cost</span>(<span class="at">origin_city =</span> <span class="st">&quot;Lima&quot;</span>, </span>
<span id="cb61-40"><a href="functions.html#cb61-40" tabindex="-1"></a>                                     <span class="at">destination_city =</span> <span class="st">&quot;Los Angeles&quot;</span>, </span>
<span id="cb61-41"><a href="functions.html#cb61-41" tabindex="-1"></a>                                     <span class="at">transport_type =</span> <span class="st">&quot;train&quot;</span>, </span>
<span id="cb61-42"><a href="functions.html#cb61-42" tabindex="-1"></a>                                     <span class="at">num_people =</span> <span class="dv">3</span>, </span>
<span id="cb61-43"><a href="functions.html#cb61-43" tabindex="-1"></a>                                     <span class="at">hotel =</span> <span class="fu">list</span>(<span class="at">price =</span> <span class="dv">150</span>), </span>
<span id="cb61-44"><a href="functions.html#cb61-44" tabindex="-1"></a>                                     <span class="at">daily_expenses =</span> <span class="dv">120</span>, </span>
<span id="cb61-45"><a href="functions.html#cb61-45" tabindex="-1"></a>                                     <span class="at">trip_duration =</span> <span class="dv">10</span>)</span>
<span id="cb61-46"><a href="functions.html#cb61-46" tabindex="-1"></a></span>
<span id="cb61-47"><a href="functions.html#cb61-47" tabindex="-1"></a>trip_cost_1 </span>
<span id="cb61-48"><a href="functions.html#cb61-48" tabindex="-1"></a><span class="co">#&gt; [1] 2000</span></span>
<span id="cb61-49"><a href="functions.html#cb61-49" tabindex="-1"></a>trip_cost_2 </span>
<span id="cb61-50"><a href="functions.html#cb61-50" tabindex="-1"></a><span class="co">#&gt; [1] 5550</span></span></code></pre></div>
</div>
</div>
<div id="higher-order-functions" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Higher-order functions<a href="functions.html#higher-order-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In previous sections, we explored how to create and use functions in R. Now, let’s delve into a more advanced concept: <strong>higher-order functions</strong>.</p>
<p>Higher-order functions are those that can receive other functions as arguments or return a function as a result.</p>
<p>This type of function allows us to write more flexible and expressive code, and they are a powerful tool for data analysis.</p>
<div id="lapply-and-sapply-applying-a-function-to-each-element" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> <code>lapply()</code> and <code>sapply()</code>: applying a function to each element<a href="functions.html#lapply-and-sapply-applying-a-function-to-each-element" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Imagine you have a list with information about several US cities, and you want to calculate the population density of each city. You could write a <code>for</code> loop to iterate through the list and calculate the density of each city separately. However, R offers a more efficient and elegant way to do this: the <code>lapply()</code> function.</p>
<p><code>lapply()</code> (which stands for “list apply”) takes two arguments:</p>
<ul>
<li>A list (or a vector).</li>
<li>A function to be applied to each element of the list.</li>
</ul>
<p><code>lapply()</code> applies the function to each element of the list and returns a new list with the results.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="functions.html#cb62-1" tabindex="-1"></a><span class="co"># Create a list with information about cities</span></span>
<span id="cb62-2"><a href="functions.html#cb62-2" tabindex="-1"></a>cities <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb62-3"><a href="functions.html#cb62-3" tabindex="-1"></a>  <span class="at">New_York =</span> <span class="fu">list</span>(<span class="at">population =</span> <span class="fl">8.4e6</span>, <span class="at">area =</span> <span class="fl">783.8</span>),</span>
<span id="cb62-4"><a href="functions.html#cb62-4" tabindex="-1"></a>  <span class="at">Los_Angeles =</span> <span class="fu">list</span>(<span class="at">population =</span> <span class="fl">3.9e6</span>, <span class="at">area =</span> <span class="fl">1302.0</span>),</span>
<span id="cb62-5"><a href="functions.html#cb62-5" tabindex="-1"></a>  <span class="at">Chicago =</span> <span class="fu">list</span>(<span class="at">population =</span> <span class="fl">2.7e6</span>, <span class="at">area =</span> <span class="fl">606.1</span>)</span>
<span id="cb62-6"><a href="functions.html#cb62-6" tabindex="-1"></a>)</span>
<span id="cb62-7"><a href="functions.html#cb62-7" tabindex="-1"></a></span>
<span id="cb62-8"><a href="functions.html#cb62-8" tabindex="-1"></a><span class="co"># Function to calculate population density</span></span>
<span id="cb62-9"><a href="functions.html#cb62-9" tabindex="-1"></a>calculate_density <span class="ot">&lt;-</span> <span class="cf">function</span>(city) {</span>
<span id="cb62-10"><a href="functions.html#cb62-10" tabindex="-1"></a>  density <span class="ot">&lt;-</span> city<span class="sc">$</span>population <span class="sc">/</span> city<span class="sc">$</span>area</span>
<span id="cb62-11"><a href="functions.html#cb62-11" tabindex="-1"></a>  <span class="fu">return</span>(density)</span>
<span id="cb62-12"><a href="functions.html#cb62-12" tabindex="-1"></a>}</span>
<span id="cb62-13"><a href="functions.html#cb62-13" tabindex="-1"></a></span>
<span id="cb62-14"><a href="functions.html#cb62-14" tabindex="-1"></a><span class="co"># Calculate population density of each city</span></span>
<span id="cb62-15"><a href="functions.html#cb62-15" tabindex="-1"></a>densities <span class="ot">&lt;-</span> <span class="fu">lapply</span>(cities, calculate_density)</span>
<span id="cb62-16"><a href="functions.html#cb62-16" tabindex="-1"></a></span>
<span id="cb62-17"><a href="functions.html#cb62-17" tabindex="-1"></a>densities</span>
<span id="cb62-18"><a href="functions.html#cb62-18" tabindex="-1"></a><span class="co">#&gt; $New_York</span></span>
<span id="cb62-19"><a href="functions.html#cb62-19" tabindex="-1"></a><span class="co">#&gt; [1] 10717.02</span></span>
<span id="cb62-20"><a href="functions.html#cb62-20" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb62-21"><a href="functions.html#cb62-21" tabindex="-1"></a><span class="co">#&gt; $Los_Angeles</span></span>
<span id="cb62-22"><a href="functions.html#cb62-22" tabindex="-1"></a><span class="co">#&gt; [1] 2995.392</span></span>
<span id="cb62-23"><a href="functions.html#cb62-23" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb62-24"><a href="functions.html#cb62-24" tabindex="-1"></a><span class="co">#&gt; $Chicago</span></span>
<span id="cb62-25"><a href="functions.html#cb62-25" tabindex="-1"></a><span class="co">#&gt; [1] 4454.71</span></span></code></pre></div>
<p>In this example, <code>lapply()</code> applies the <code>calculate_density</code> function to each element of the <code>cities</code> list and returns a new list <code>densities</code> with the population density of each city.</p>
<p>The <code>sapply()</code> function is similar to <code>lapply()</code>, but tries to simplify the result. If the result is a list of vectors of the same type and length, <code>sapply()</code> returns a vector or a matrix.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="functions.html#cb63-1" tabindex="-1"></a><span class="co"># Calculate population density of each city with sapply()</span></span>
<span id="cb63-2"><a href="functions.html#cb63-2" tabindex="-1"></a>densities <span class="ot">&lt;-</span> <span class="fu">sapply</span>(cities, calculate_density)</span>
<span id="cb63-3"><a href="functions.html#cb63-3" tabindex="-1"></a></span>
<span id="cb63-4"><a href="functions.html#cb63-4" tabindex="-1"></a>densities</span>
<span id="cb63-5"><a href="functions.html#cb63-5" tabindex="-1"></a><span class="co">#&gt;    New_York Los_Angeles     Chicago </span></span>
<span id="cb63-6"><a href="functions.html#cb63-6" tabindex="-1"></a><span class="co">#&gt;   10717.020    2995.392    4454.710</span></span></code></pre></div>
<p>In this case, <code>sapply()</code> returns a vector with population densities.</p>
</div>
<div id="apply-applying-a-function-to-rows-or-columns" class="section level3 hasAnchor" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> <code>apply()</code>: applying a function to rows or columns<a href="functions.html#apply-applying-a-function-to-rows-or-columns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>apply()</code> function allows us to apply a function to the rows or columns of a matrix or array. It’s like having a tool that allows us to go through each row or column of our data table and perform a specific calculation on each one.</p>
<p>For example, if we have a matrix with the maximum and minimum temperatures of different cities, we can use <code>apply()</code> to calculate the average temperature of each city.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="functions.html#cb64-1" tabindex="-1"></a><span class="co"># Create a matrix with temperatures</span></span>
<span id="cb64-2"><a href="functions.html#cb64-2" tabindex="-1"></a>temperatures <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">18</span>, <span class="dv">30</span>, <span class="dv">22</span>, <span class="dv">35</span>, <span class="dv">28</span>), <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">2</span>,</span>
<span id="cb64-3"><a href="functions.html#cb64-3" tabindex="-1"></a>                       <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;New York&quot;</span>, <span class="st">&quot;Los Angeles&quot;</span>, <span class="st">&quot;Chicago&quot;</span>),</span>
<span id="cb64-4"><a href="functions.html#cb64-4" tabindex="-1"></a>                                       <span class="fu">c</span>(<span class="st">&quot;Maximum&quot;</span>, <span class="st">&quot;Minimum&quot;</span>)))</span>
<span id="cb64-5"><a href="functions.html#cb64-5" tabindex="-1"></a></span>
<span id="cb64-6"><a href="functions.html#cb64-6" tabindex="-1"></a><span class="co"># Calculate average temperature of each city</span></span>
<span id="cb64-7"><a href="functions.html#cb64-7" tabindex="-1"></a>average_temperatures <span class="ot">&lt;-</span> <span class="fu">apply</span>(temperatures, <span class="dv">1</span>, mean)</span>
<span id="cb64-8"><a href="functions.html#cb64-8" tabindex="-1"></a></span>
<span id="cb64-9"><a href="functions.html#cb64-9" tabindex="-1"></a>average_temperatures</span>
<span id="cb64-10"><a href="functions.html#cb64-10" tabindex="-1"></a><span class="co">#&gt;    New York Los Angeles     Chicago </span></span>
<span id="cb64-11"><a href="functions.html#cb64-11" tabindex="-1"></a><span class="co">#&gt;        23.5        26.5        29.0</span></span></code></pre></div>
<p>In this example, <code>apply()</code> applies the <code>mean()</code> function to each row of the <code>temperatures</code> matrix (the argument <code>1</code> indicates that the function should be applied to rows) and returns a vector with the average temperatures of each city.</p>
<p>If we wanted to calculate the maximum or minimum temperature among all cities, we could use <code>apply()</code> with the <code>max()</code> or <code>min()</code> function, respectively, and apply it to columns (using argument <code>2</code>).</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="functions.html#cb65-1" tabindex="-1"></a><span class="co"># Calculate maximum temperature among all cities</span></span>
<span id="cb65-2"><a href="functions.html#cb65-2" tabindex="-1"></a>maximum_temperature <span class="ot">&lt;-</span> <span class="fu">apply</span>(temperatures, <span class="dv">2</span>, max)</span>
<span id="cb65-3"><a href="functions.html#cb65-3" tabindex="-1"></a></span>
<span id="cb65-4"><a href="functions.html#cb65-4" tabindex="-1"></a>maximum_temperature</span>
<span id="cb65-5"><a href="functions.html#cb65-5" tabindex="-1"></a><span class="co">#&gt; Maximum Minimum </span></span>
<span id="cb65-6"><a href="functions.html#cb65-6" tabindex="-1"></a><span class="co">#&gt;      30      35</span></span></code></pre></div>
</div>
<div id="mapply-applying-a-function-to-multiple-arguments" class="section level3 hasAnchor" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> <code>mapply()</code>: applying a function to multiple arguments<a href="functions.html#mapply-applying-a-function-to-multiple-arguments" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>mapply()</code> function allows us to apply a function to multiple arguments in parallel. It’s like having a tool that allows us to take several sets of data and apply the same operation to each corresponding set.</p>
<p>For example, imagine we have two vectors: one with the names of different US cities and another with their respective populations. We want to create a new vector containing the phrase “The city of [city name] has a population of [population] inhabitants”. We could use <code>mapply()</code> to apply a function combining the city name and its population to each pair of elements from the vectors.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="functions.html#cb66-1" tabindex="-1"></a><span class="co"># Create vectors with city names and populations</span></span>
<span id="cb66-2"><a href="functions.html#cb66-2" tabindex="-1"></a>cities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;New York&quot;</span>, <span class="st">&quot;Los Angeles&quot;</span>, <span class="st">&quot;Chicago&quot;</span>)</span>
<span id="cb66-3"><a href="functions.html#cb66-3" tabindex="-1"></a>populations <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">8.4e6</span>, <span class="fl">3.9e6</span>, <span class="fl">2.7e6</span>)</span>
<span id="cb66-4"><a href="functions.html#cb66-4" tabindex="-1"></a></span>
<span id="cb66-5"><a href="functions.html#cb66-5" tabindex="-1"></a><span class="co"># Function to create the phrase</span></span>
<span id="cb66-6"><a href="functions.html#cb66-6" tabindex="-1"></a>create_phrase <span class="ot">&lt;-</span> <span class="cf">function</span>(city, population) {</span>
<span id="cb66-7"><a href="functions.html#cb66-7" tabindex="-1"></a>  phrase <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;The city of&quot;</span>, city, <span class="st">&quot;has a population of&quot;</span>, population, <span class="st">&quot;inhabitants.&quot;</span>)</span>
<span id="cb66-8"><a href="functions.html#cb66-8" tabindex="-1"></a>  <span class="fu">return</span>(phrase)</span>
<span id="cb66-9"><a href="functions.html#cb66-9" tabindex="-1"></a>}</span>
<span id="cb66-10"><a href="functions.html#cb66-10" tabindex="-1"></a></span>
<span id="cb66-11"><a href="functions.html#cb66-11" tabindex="-1"></a><span class="co"># Create vector with phrases</span></span>
<span id="cb66-12"><a href="functions.html#cb66-12" tabindex="-1"></a>city_phrases <span class="ot">&lt;-</span> <span class="fu">mapply</span>(create_phrase, cities, populations)</span>
<span id="cb66-13"><a href="functions.html#cb66-13" tabindex="-1"></a></span>
<span id="cb66-14"><a href="functions.html#cb66-14" tabindex="-1"></a>city_phrases</span>
<span id="cb66-15"><a href="functions.html#cb66-15" tabindex="-1"></a><span class="co">#&gt;                                                           New York </span></span>
<span id="cb66-16"><a href="functions.html#cb66-16" tabindex="-1"></a><span class="co">#&gt;    &quot;The city of New York has a population of 8400000 inhabitants.&quot; </span></span>
<span id="cb66-17"><a href="functions.html#cb66-17" tabindex="-1"></a><span class="co">#&gt;                                                        Los Angeles </span></span>
<span id="cb66-18"><a href="functions.html#cb66-18" tabindex="-1"></a><span class="co">#&gt; &quot;The city of Los Angeles has a population of 3900000 inhabitants.&quot; </span></span>
<span id="cb66-19"><a href="functions.html#cb66-19" tabindex="-1"></a><span class="co">#&gt;                                                            Chicago </span></span>
<span id="cb66-20"><a href="functions.html#cb66-20" tabindex="-1"></a><span class="co">#&gt;     &quot;The city of Chicago has a population of 2700000 inhabitants.&quot;</span></span></code></pre></div>
<p>In this example, <code>mapply()</code> applies the <code>create_phrase</code> function to the <code>cities</code> and <code>populations</code> vectors in parallel, taking one element from each vector at a time, and returns a vector with the resulting phrases.</p>
<p>Note that the <code>create_phrase</code> function receives two arguments: <code>city</code> and <code>population</code>. <code>mapply()</code> is responsible for taking one element from each vector and passing them as arguments to the function. In the first iteration, it passes “New York” as <code>city</code> and 8.4e6 as <code>population</code>. In the second iteration, it passes “Los Angeles” and 3.9e6, and so on.</p>
<p>Another example of using <code>mapply()</code> would be if we have two vectors with maximum and minimum temperatures of different cities, and we want to calculate the temperature difference between maximum and minimum for each city.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="functions.html#cb67-1" tabindex="-1"></a><span class="co"># Create vectors with maximum and minimum temperatures</span></span>
<span id="cb67-2"><a href="functions.html#cb67-2" tabindex="-1"></a>maxs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">35</span>)</span>
<span id="cb67-3"><a href="functions.html#cb67-3" tabindex="-1"></a>mins <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">22</span>, <span class="dv">28</span>)</span>
<span id="cb67-4"><a href="functions.html#cb67-4" tabindex="-1"></a></span>
<span id="cb67-5"><a href="functions.html#cb67-5" tabindex="-1"></a><span class="co"># Calculate temperature difference for each city</span></span>
<span id="cb67-6"><a href="functions.html#cb67-6" tabindex="-1"></a>temp_difference <span class="ot">&lt;-</span> <span class="fu">mapply</span>(<span class="cf">function</span>(max, min) max <span class="sc">-</span> min, maxs, mins)</span>
<span id="cb67-7"><a href="functions.html#cb67-7" tabindex="-1"></a></span>
<span id="cb67-8"><a href="functions.html#cb67-8" tabindex="-1"></a>temp_difference</span>
<span id="cb67-9"><a href="functions.html#cb67-9" tabindex="-1"></a><span class="co">#&gt; [1] 7 8 7</span></span></code></pre></div>
<p>In this example, <code>mapply()</code> applies the anonymous function <code>function(max, min) max - min</code> to the <code>maxs</code> and <code>mins</code> vectors in parallel, taking the first element of <code>maxs</code> and the first element of <code>mins</code>, then the second element of each vector, and so on. For each pair of elements, the anonymous function calculates the difference and returns a vector with the results.</p>
</div>
<div id="examples-data-analysis-with-higher-order-functions" class="section level3 hasAnchor" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> Examples: data analysis with higher-order functions<a href="functions.html#examples-data-analysis-with-higher-order-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Higher-order functions are a powerful tool for data analysis. They allow us to perform complex operations concisely and efficiently. Imagine you have a matrix with information about different states, where each row represents a state and each column a numeric variable, such as population or per capita income. You could use <code>apply()</code> to calculate the mean of each column.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="functions.html#cb68-1" tabindex="-1"></a><span class="co"># Create a matrix with information about states</span></span>
<span id="cb68-2"><a href="functions.html#cb68-2" tabindex="-1"></a>states <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fl">39.2e6</span>, <span class="fl">29.0e6</span>, <span class="fl">21.4e6</span>, <span class="dv">64500</span>, <span class="dv">56100</span>, <span class="dv">50800</span>), <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">2</span>,</span>
<span id="cb68-3"><a href="functions.html#cb68-3" tabindex="-1"></a>                 <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;California&quot;</span>, <span class="st">&quot;Texas&quot;</span>, <span class="st">&quot;Florida&quot;</span>),</span>
<span id="cb68-4"><a href="functions.html#cb68-4" tabindex="-1"></a>                                 <span class="fu">c</span>(<span class="st">&quot;population&quot;</span>, <span class="st">&quot;per_capita_income&quot;</span>)))</span>
<span id="cb68-5"><a href="functions.html#cb68-5" tabindex="-1"></a></span>
<span id="cb68-6"><a href="functions.html#cb68-6" tabindex="-1"></a><span class="co"># Calculate mean of each column</span></span>
<span id="cb68-7"><a href="functions.html#cb68-7" tabindex="-1"></a>means <span class="ot">&lt;-</span> <span class="fu">apply</span>(states, <span class="dv">2</span>, mean)</span>
<span id="cb68-8"><a href="functions.html#cb68-8" tabindex="-1"></a></span>
<span id="cb68-9"><a href="functions.html#cb68-9" tabindex="-1"></a>means</span>
<span id="cb68-10"><a href="functions.html#cb68-10" tabindex="-1"></a><span class="co">#&gt;        population per_capita_income </span></span>
<span id="cb68-11"><a href="functions.html#cb68-11" tabindex="-1"></a><span class="co">#&gt;       29866666.67          57133.33</span></span></code></pre></div>
<p>In this example, <code>apply()</code> applies the <code>mean()</code> function to each column of the states matrix and returns a vector with the means.</p>
<p>Another one would be if we have a list with prices of different hotels in several US cities. You could use <code>sapply()</code> to apply a function calculating the tax of each price, or <code>lapply()</code> to convert prices from dollars to euros.</p>
<p>You could also use <code>apply()</code> to calculate the average price of hotels in each city, or to find the most expensive and cheapest hotel in each city.</p>
<p>As we progress through the book, we will see more examples of how to use higher-order functions to solve real-world problems.</p>
<p>The possibilities are endless, and higher-order functions give you great flexibility to manipulate and analyze your data.</p>
</div>
</div>
<div id="closures-functions-with-memory" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Closures: functions with memory<a href="functions.html#closures-functions-with-memory" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Until now, we have seen that functions in R receive arguments, execute a set of instructions, and return a result. However, functions can also have “memory”, that is, they can remember information between calls. This is possible thanks to a concept called <strong>closures</strong>.</p>
<div id="concept-functions-that-remember" class="section level3 hasAnchor" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Concept: functions that “remember”<a href="functions.html#concept-functions-that-remember" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A closure is a function that “remembers” the environment in which it was created. This means the function has access to variables that were defined at the time of its creation, even if those variables are no longer in the current scope.</p>
<p>To better understand this concept, let’s see an example. Imagine we want to create a function that counts how many times it has been called. We can do this using a closure:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="functions.html#cb69-1" tabindex="-1"></a>create_counter <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb69-2"><a href="functions.html#cb69-2" tabindex="-1"></a>  counter <span class="ot">&lt;-</span> <span class="dv">0</span>  <span class="co"># Initialize the counter</span></span>
<span id="cb69-3"><a href="functions.html#cb69-3" tabindex="-1"></a></span>
<span id="cb69-4"><a href="functions.html#cb69-4" tabindex="-1"></a>  <span class="co"># Define the function that increments the counter</span></span>
<span id="cb69-5"><a href="functions.html#cb69-5" tabindex="-1"></a>  increment_counter <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb69-6"><a href="functions.html#cb69-6" tabindex="-1"></a>    counter <span class="ot">&lt;&lt;-</span> counter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb69-7"><a href="functions.html#cb69-7" tabindex="-1"></a>    <span class="fu">return</span>(counter)</span>
<span id="cb69-8"><a href="functions.html#cb69-8" tabindex="-1"></a>  }</span>
<span id="cb69-9"><a href="functions.html#cb69-9" tabindex="-1"></a></span>
<span id="cb69-10"><a href="functions.html#cb69-10" tabindex="-1"></a>  <span class="fu">return</span>(increment_counter)  <span class="co"># Return the function</span></span>
<span id="cb69-11"><a href="functions.html#cb69-11" tabindex="-1"></a>}</span>
<span id="cb69-12"><a href="functions.html#cb69-12" tabindex="-1"></a></span>
<span id="cb69-13"><a href="functions.html#cb69-13" tabindex="-1"></a><span class="co"># Create a counter</span></span>
<span id="cb69-14"><a href="functions.html#cb69-14" tabindex="-1"></a>my_counter <span class="ot">&lt;-</span> <span class="fu">create_counter</span>()</span>
<span id="cb69-15"><a href="functions.html#cb69-15" tabindex="-1"></a></span>
<span id="cb69-16"><a href="functions.html#cb69-16" tabindex="-1"></a><span class="co"># Call the counter several times</span></span>
<span id="cb69-17"><a href="functions.html#cb69-17" tabindex="-1"></a><span class="fu">my_counter</span>()  </span>
<span id="cb69-18"><a href="functions.html#cb69-18" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb69-19"><a href="functions.html#cb69-19" tabindex="-1"></a><span class="fu">my_counter</span>()  </span>
<span id="cb69-20"><a href="functions.html#cb69-20" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb69-21"><a href="functions.html#cb69-21" tabindex="-1"></a><span class="fu">my_counter</span>()  </span>
<span id="cb69-22"><a href="functions.html#cb69-22" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<p>In this example, the <code>create_counter()</code> function creates a <code>counter</code> variable and an <code>increment_counter()</code> function. The <code>increment_counter()</code> function has access to the <code>counter</code> variable and increments it by 1 each time it is called. The <code>create_counter()</code> function returns the <code>increment_counter()</code> function.</p>
<p>When we call <code>my_counter()</code>, we are calling the <code>increment_counter()</code> function that was created inside <code>create_counter()</code>. This function “remembers” the value of the <code>counter</code> variable and increments it on each call.</p>
<p>It is important to note that the <code>counter</code> variable is not a global variable. It is only accessible within the <code>increment_counter()</code> function. This is because <code>counter</code> was defined inside the <code>create_counter()</code> function, so its scope is local to that function.</p>
<p>However, the <code>increment_counter()</code> function “captures” the <code>counter</code> variable in its environment, allowing it to access it even after the <code>create_counter()</code> function has finished executing.</p>
</div>
<div id="applications-creating-counters-functions-with-internal-state" class="section level3 hasAnchor" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Applications: creating counters, functions with internal state<a href="functions.html#applications-creating-counters-functions-with-internal-state" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Closures have many applications in programming. They are commonly used for <strong>creating counters</strong> that maintain an internal state between calls, <strong>configuring parameters</strong> where a generated function remembers specific settings (like a temperature scale), and <strong>encapsulating data</strong> to hide sensitive information or internal logic within the function scope.</p>
</div>
<div id="examples-simulating-a-game-creating-an-operation-history" class="section level3 hasAnchor" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> Examples: simulating a game, creating an operation history<a href="functions.html#examples-simulating-a-game-creating-an-operation-history" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s see some more concrete examples of using closures:</p>
<ul>
<li><p><strong>Simulating a game:</strong> We can use a closure to simulate a game where the player has to guess a secret number. The closure can “remember” the secret number and keep track of the player’s attempts.</p></li>
<li><p><strong>Creating an operation history:</strong> We can use a closure to create a function that records operations performed on a variable. The closure can “remember” the operation history and show it when requested.</p></li>
</ul>
<p>Closures are a powerful tool that allows us to write more flexible and expressive code. As you become familiar with them, you will discover new ways to apply them in your data analysis.</p>
</div>
</div>
<div id="debugging-and-error-handling-solving-the-mysteries-of-your-code" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Debugging and error handling: solving the mysteries of your code<a href="functions.html#debugging-and-error-handling-solving-the-mysteries-of-your-code" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>So far, we have explored the fascinating world of functions in R. We have learned to create, use, and combine them to perform complex tasks. However, on the programming journey, encountering errors is inevitable. Sometimes, our code doesn’t work as we expect, and we encounter cryptic error messages that leave us perplexed.</p>
<p>In this section, we will learn to identify, understand, and fix errors in our R code. We will also see how to handle errors gracefully, so our code is more robust and reliable.</p>
<div id="identifying-errors-common-error-messages-in-r" class="section level3 hasAnchor" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> Identifying errors: common error messages in R<a href="functions.html#identifying-errors-common-error-messages-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When our code contains an error, R will show us an error message in the console. These messages can seem intimidating at first, but with a little practice, we will learn to interpret them and use them to find the cause of the error.</p>
<p>Some common error messages in R include <code>Error: object 'object_name' not found</code>, which happens when you interpret a non-existent variable or function. Another is <code>invalid argument</code> when function inputs don’t match the expected type, such as passing text to a numeric function. You might also encounter <code>argument is of length zero</code> in <code>if</code> conditions, often due to <code>NULL</code> or empty vectors, or <code>invalid 'for' loop sequence</code> when the loop iterator definition is flawed.</p>
<p>It is important to read error messages carefully and try to understand what they are telling us. Often, the error message will give us a clue about the cause of the problem.</p>
</div>
<div id="debugging-tools-debug-traceback" class="section level3 hasAnchor" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> Debugging tools: <code>debug()</code>, <code>traceback()</code><a href="functions.html#debugging-tools-debug-traceback" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R offers several tools to debug our code and find the cause of errors. Two of the most useful tools are <code>debug()</code> and <code>traceback()</code>.</p>
<ul>
<li><p><code>debug()</code>: This function allows us to execute a function step by step, allowing us to inspect the value of variables at each step and understand how the code is executing. To use <code>debug()</code>, we simply call the function with the name of the function we want to debug as an argument.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="functions.html#cb70-1" tabindex="-1"></a><span class="fu">debug</span>(my_function)</span></code></pre></div>
<p>Then, when we call <code>my_function()</code>, R will enter debug mode and allow us to execute the code line by line.</p></li>
<li><p><code>traceback()</code>: This function shows us the sequence of function calls that led to the error. This can be useful for understanding how the error was reached and which functions are involved. To use <code>traceback()</code>, simply call the function after an error has occurred.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="functions.html#cb71-1" tabindex="-1"></a><span class="fu">traceback</span>()</span></code></pre></div>
<p>R will show a list of the functions that were called, starting with the function where the error occurred and ending with the function that started the code execution.</p></li>
</ul>
</div>
<div id="error-handling-trycatch" class="section level3 hasAnchor" number="2.6.3">
<h3><span class="header-section-number">2.6.3</span> Error handling: <code>tryCatch()</code><a href="functions.html#error-handling-trycatch" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes, we want our code to continue executing even if an error occurs. For this, we can use the <code>tryCatch()</code> function.</p>
<p><code>tryCatch()</code> allows us to specify a block of code that will be executed if an error occurs. We can also specify a block of code that will be executed if no error occurs.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="functions.html#cb72-1" tabindex="-1"></a><span class="fu">tryCatch</span>(</span>
<span id="cb72-2"><a href="functions.html#cb72-2" tabindex="-1"></a>  {</span>
<span id="cb72-3"><a href="functions.html#cb72-3" tabindex="-1"></a>    <span class="co"># Code that might produce an error</span></span>
<span id="cb72-4"><a href="functions.html#cb72-4" tabindex="-1"></a>  },</span>
<span id="cb72-5"><a href="functions.html#cb72-5" tabindex="-1"></a>  <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb72-6"><a href="functions.html#cb72-6" tabindex="-1"></a>    <span class="co"># Code to be executed if an error occurs</span></span>
<span id="cb72-7"><a href="functions.html#cb72-7" tabindex="-1"></a>  },</span>
<span id="cb72-8"><a href="functions.html#cb72-8" tabindex="-1"></a>  <span class="at">finally =</span> {</span>
<span id="cb72-9"><a href="functions.html#cb72-9" tabindex="-1"></a>    <span class="co"># Code to be executed always, whether or not there is an error</span></span>
<span id="cb72-10"><a href="functions.html#cb72-10" tabindex="-1"></a>  }</span>
<span id="cb72-11"><a href="functions.html#cb72-11" tabindex="-1"></a>)</span></code></pre></div>
<p>For example, if we are reading data from a file and the file does not exist, we can use <code>tryCatch()</code> to show an error message and continue with code execution.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="functions.html#cb73-1" tabindex="-1"></a><span class="fu">tryCatch</span>(</span>
<span id="cb73-2"><a href="functions.html#cb73-2" tabindex="-1"></a>  {</span>
<span id="cb73-3"><a href="functions.html#cb73-3" tabindex="-1"></a>    data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;my_file.csv&quot;</span>)</span>
<span id="cb73-4"><a href="functions.html#cb73-4" tabindex="-1"></a>  },</span>
<span id="cb73-5"><a href="functions.html#cb73-5" tabindex="-1"></a>  <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb73-6"><a href="functions.html#cb73-6" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;Error reading file. Please verify the file exists.&quot;</span>)</span>
<span id="cb73-7"><a href="functions.html#cb73-7" tabindex="-1"></a>  }</span>
<span id="cb73-8"><a href="functions.html#cb73-8" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="examples-debugging-functions-with-errors-handling-exceptions" class="section level3 hasAnchor" number="2.6.4">
<h3><span class="header-section-number">2.6.4</span> Examples: debugging functions with errors, handling exceptions<a href="functions.html#examples-debugging-functions-with-errors-handling-exceptions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s see some examples of how to use debugging tools and error handling in R:</p>
<ul>
<li><p><strong>Debugging a function with <code>debug()</code>:</strong></p>
<p>Imagine we create a function to calculate a person’s Body Mass Index (BMI), but when using it, we get an error. We can use <code>debug()</code> to analyze what happens inside the function.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="functions.html#cb74-1" tabindex="-1"></a>calculate_bmi <span class="ot">&lt;-</span> <span class="cf">function</span>(weight, height) {</span>
<span id="cb74-2"><a href="functions.html#cb74-2" tabindex="-1"></a>  bmi <span class="ot">&lt;-</span> weight <span class="sc">/</span> (height <span class="sc">^</span> <span class="dv">2</span>) </span>
<span id="cb74-3"><a href="functions.html#cb74-3" tabindex="-1"></a>  <span class="fu">return</span>(bmi)</span>
<span id="cb74-4"><a href="functions.html#cb74-4" tabindex="-1"></a>}</span>
<span id="cb74-5"><a href="functions.html#cb74-5" tabindex="-1"></a></span>
<span id="cb74-6"><a href="functions.html#cb74-6" tabindex="-1"></a><span class="fu">debug</span>(calculate_bmi)</span>
<span id="cb74-7"><a href="functions.html#cb74-7" tabindex="-1"></a><span class="fu">calculate_bmi</span>(<span class="at">weight =</span> <span class="dv">70</span>, <span class="at">height =</span> <span class="fl">1.75</span>)  <span class="co"># We call the function to start debugging</span></span></code></pre></div>
<p>When executing this code, R will enter debug mode. In the console, we will see a new prompt <code>Browse[1]&gt;</code>. We can use commands like <code>n</code> (next) to execute the next line of code, <code>c</code> (continue) to continue normal execution, or <code>Q</code> to exit debug mode. We can also print the value of variables using their name (e.g. <code>weight</code>, <code>height</code>, <code>bmi</code>).</p></li>
<li><p><strong>Handling an exception with <code>tryCatch()</code>:</strong></p>
<p>Suppose we are creating a function to calculate the annual population growth rate of a city. If the initial population is 0, the division will produce an error. We can use <code>tryCatch()</code> to handle this situation:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="functions.html#cb75-1" tabindex="-1"></a>calculate_growth_rate <span class="ot">&lt;-</span> <span class="cf">function</span>(initial_population, final_population, years) {</span>
<span id="cb75-2"><a href="functions.html#cb75-2" tabindex="-1"></a>  <span class="fu">tryCatch</span>(</span>
<span id="cb75-3"><a href="functions.html#cb75-3" tabindex="-1"></a>    {</span>
<span id="cb75-4"><a href="functions.html#cb75-4" tabindex="-1"></a>      rate <span class="ot">&lt;-</span> ((final_population <span class="sc">/</span> initial_population)<span class="sc">^</span>(<span class="dv">1</span> <span class="sc">/</span> years) <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb75-5"><a href="functions.html#cb75-5" tabindex="-1"></a>      <span class="fu">return</span>(rate)</span>
<span id="cb75-6"><a href="functions.html#cb75-6" tabindex="-1"></a>    },</span>
<span id="cb75-7"><a href="functions.html#cb75-7" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb75-8"><a href="functions.html#cb75-8" tabindex="-1"></a>      <span class="fu">message</span>(<span class="st">&quot;Error: Initial population cannot be zero.&quot;</span>)</span>
<span id="cb75-9"><a href="functions.html#cb75-9" tabindex="-1"></a>      <span class="fu">return</span>(<span class="cn">NA</span>)</span>
<span id="cb75-10"><a href="functions.html#cb75-10" tabindex="-1"></a>    }</span>
<span id="cb75-11"><a href="functions.html#cb75-11" tabindex="-1"></a>  )</span>
<span id="cb75-12"><a href="functions.html#cb75-12" tabindex="-1"></a>}</span>
<span id="cb75-13"><a href="functions.html#cb75-13" tabindex="-1"></a></span>
<span id="cb75-14"><a href="functions.html#cb75-14" tabindex="-1"></a><span class="fu">calculate_growth_rate</span>(<span class="dv">10000</span>, <span class="dv">12000</span>, <span class="dv">5</span>)  <span class="co"># Output: 3.7137...</span></span>
<span id="cb75-15"><a href="functions.html#cb75-15" tabindex="-1"></a><span class="co">#&gt; [1] 3.713729</span></span>
<span id="cb75-16"><a href="functions.html#cb75-16" tabindex="-1"></a><span class="fu">calculate_growth_rate</span>(<span class="dv">0</span>, <span class="dv">12000</span>, <span class="dv">5</span>)  <span class="co"># Output: &quot;Error: Initial population cannot be zero.&quot; </span></span>
<span id="cb75-17"><a href="functions.html#cb75-17" tabindex="-1"></a><span class="co">#&gt; [1] Inf</span></span></code></pre></div>
<p>In this example, if <code>initial_population</code> is 0, <code>tryCatch()</code> captures the error and displays a message. Then, it returns <code>NA</code> to indicate that calculation could not be performed.</p></li>
</ul>
<p>With practice, you will learn to use these tools to debug your code, handle errors, and write more robust and reliable programs.</p>
</div>
</div>
<div id="exercises-1" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Exercises<a href="functions.html#exercises-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>It’s time to test your skills with functions! Below, you will find a series of exercises with different levels of difficulty.</p>
<ol start="11" style="list-style-type: decimal">
<li>Create a function called <code>miles_to_kilometers()</code> converting miles to kilometers. The function should receive a <code>miles</code> argument and return the equivalent in kilometers. (Remember that 1 mile equals 1.60934 kilometers).</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="functions.html#cb76-1" tabindex="-1"></a>miles_to_kilometers <span class="ot">&lt;-</span> <span class="cf">function</span>(miles) {</span>
<span id="cb76-2"><a href="functions.html#cb76-2" tabindex="-1"></a>  kilometers <span class="ot">&lt;-</span> miles <span class="sc">*</span> <span class="fl">1.60934</span></span>
<span id="cb76-3"><a href="functions.html#cb76-3" tabindex="-1"></a>  <span class="fu">return</span>(kilometers)</span>
<span id="cb76-4"><a href="functions.html#cb76-4" tabindex="-1"></a>}</span></code></pre></div>
</details>
<ol start="12" style="list-style-type: decimal">
<li>Create a function called <code>triangle_area()</code> calculating the area of a triangle. The function should receive two arguments: <code>base</code> and <code>height</code>, and return the triangle’s area. (Remember that the area of a triangle is equal to (base * height) / 2).</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="functions.html#cb77-1" tabindex="-1"></a>triangle_area <span class="ot">&lt;-</span> <span class="cf">function</span>(base, height) {</span>
<span id="cb77-2"><a href="functions.html#cb77-2" tabindex="-1"></a>  area <span class="ot">&lt;-</span> (base <span class="sc">*</span> height) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb77-3"><a href="functions.html#cb77-3" tabindex="-1"></a>  <span class="fu">return</span>(area)</span>
<span id="cb77-4"><a href="functions.html#cb77-4" tabindex="-1"></a>    }</span></code></pre></div>
</details>
<ol start="13" style="list-style-type: decimal">
<li>Create a function called <code>price_with_vat()</code> calculating the price of a product including VAT. The function should receive two arguments: <code>price_without_vat</code> and <code>vat_rate</code> (default, 0.16), and return the price with VAT.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="functions.html#cb78-1" tabindex="-1"></a>price_with_vat <span class="ot">&lt;-</span> <span class="cf">function</span>(price_without_vat, <span class="at">vat_rate =</span> <span class="fl">0.16</span>) {</span>
<span id="cb78-2"><a href="functions.html#cb78-2" tabindex="-1"></a>  price_with_vat <span class="ot">&lt;-</span> price_without_vat <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> vat_rate)</span>
<span id="cb78-3"><a href="functions.html#cb78-3" tabindex="-1"></a>  <span class="fu">return</span>(price_with_vat)</span>
<span id="cb78-4"><a href="functions.html#cb78-4" tabindex="-1"></a>}</span></code></pre></div>
</details>
<ol start="14" style="list-style-type: decimal">
<li>Create a function called <code>is_even()</code> determining if a number is even. The function should receive a <code>number</code> argument and return <code>TRUE</code> if the number is even and <code>FALSE</code> if not. (Hint: use the modulo operator <code>%%</code>).</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="functions.html#cb79-1" tabindex="-1"></a>    is_even <span class="ot">&lt;-</span> <span class="cf">function</span>(number) {</span>
<span id="cb79-2"><a href="functions.html#cb79-2" tabindex="-1"></a>      <span class="fu">return</span>(number <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb79-3"><a href="functions.html#cb79-3" tabindex="-1"></a>    }</span></code></pre></div>
</details>
<ol start="15" style="list-style-type: decimal">
<li>Create a function called <code>my_factorial()</code> calculating the factorial of a number. The factorial of a positive integer <em>n</em>, denoted by <em>n!</em>, is the product of all positive integers less than or equal to <em>n</em>. For example, 5! = 5 * 4 * 3 * 2 * 1 = 120. (Hint: use a recursive function). Note: We name it <code>my_factorial()</code> to avoid shadowing R’s built-in <code>factorial()</code> function.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="functions.html#cb80-1" tabindex="-1"></a>my_factorial <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb80-2"><a href="functions.html#cb80-2" tabindex="-1"></a>  <span class="cf">if</span> (n <span class="sc">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb80-3"><a href="functions.html#cb80-3" tabindex="-1"></a>      <span class="co"># We use message() and return(NA) because we haven&#39;t covered stop() yet</span></span>
<span id="cb80-4"><a href="functions.html#cb80-4" tabindex="-1"></a>      <span class="fu">message</span>(<span class="st">&quot;Factorial is not defined for negative numbers&quot;</span>)</span>
<span id="cb80-5"><a href="functions.html#cb80-5" tabindex="-1"></a>      <span class="fu">return</span>(<span class="cn">NA</span>)</span>
<span id="cb80-6"><a href="functions.html#cb80-6" tabindex="-1"></a>    }</span>
<span id="cb80-7"><a href="functions.html#cb80-7" tabindex="-1"></a>  <span class="cf">if</span> (n <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb80-8"><a href="functions.html#cb80-8" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb80-9"><a href="functions.html#cb80-9" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb80-10"><a href="functions.html#cb80-10" tabindex="-1"></a>    <span class="fu">return</span>(n <span class="sc">*</span> <span class="fu">my_factorial</span>(n <span class="sc">-</span> <span class="dv">1</span>))</span>
<span id="cb80-11"><a href="functions.html#cb80-11" tabindex="-1"></a>  }</span>
<span id="cb80-12"><a href="functions.html#cb80-12" tabindex="-1"></a>}</span></code></pre></div>
</details>
<ol start="16" style="list-style-type: decimal">
<li>Create a function called <code>fibonacci()</code> generating a Fibonacci sequence of a given length. The Fibonacci sequence is a series of numbers where each number is the sum of the two preceding ones. The sequence typically starts with 0 and 1. For example, a Fibonacci sequence of length 10 would be: 0, 1, 1, 2, 3, 5, 8, 13, 21, 34.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="functions.html#cb81-1" tabindex="-1"></a>fibonacci <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb81-2"><a href="functions.html#cb81-2" tabindex="-1"></a>  <span class="cf">if</span> (n <span class="sc">&lt;=</span> <span class="dv">0</span>) {</span>
<span id="cb81-3"><a href="functions.html#cb81-3" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">numeric</span>(<span class="dv">0</span>))</span>
<span id="cb81-4"><a href="functions.html#cb81-4" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (n <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb81-5"><a href="functions.html#cb81-5" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb81-6"><a href="functions.html#cb81-6" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (n <span class="sc">==</span> <span class="dv">2</span>) {</span>
<span id="cb81-7"><a href="functions.html#cb81-7" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb81-8"><a href="functions.html#cb81-8" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb81-9"><a href="functions.html#cb81-9" tabindex="-1"></a>    fib_seq <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n)</span>
<span id="cb81-10"><a href="functions.html#cb81-10" tabindex="-1"></a>    fib_seq[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb81-11"><a href="functions.html#cb81-11" tabindex="-1"></a>    fib_seq[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb81-12"><a href="functions.html#cb81-12" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">3</span><span class="sc">:</span>n) {</span>
<span id="cb81-13"><a href="functions.html#cb81-13" tabindex="-1"></a>      fib_seq[i] <span class="ot">&lt;-</span> fib_seq[i <span class="sc">-</span> <span class="dv">1</span>] <span class="sc">+</span> fib_seq[i <span class="sc">-</span> <span class="dv">2</span>]</span>
<span id="cb81-14"><a href="functions.html#cb81-14" tabindex="-1"></a>    }</span>
<span id="cb81-15"><a href="functions.html#cb81-15" tabindex="-1"></a>    <span class="fu">return</span>(fib_seq)</span>
<span id="cb81-16"><a href="functions.html#cb81-16" tabindex="-1"></a>  }</span>
<span id="cb81-17"><a href="functions.html#cb81-17" tabindex="-1"></a>}</span>
<span id="cb81-18"><a href="functions.html#cb81-18" tabindex="-1"></a></span>
<span id="cb81-19"><a href="functions.html#cb81-19" tabindex="-1"></a><span class="fu">fibonacci</span>(<span class="dv">10</span>)</span>
<span id="cb81-20"><a href="functions.html#cb81-20" tabindex="-1"></a><span class="co">#&gt;  [1]  0  1  1  2  3  5  8 13 21 34</span></span></code></pre></div>
</details>
<ol start="17" style="list-style-type: decimal">
<li>Create a function called <code>gcd()</code> calculating the greatest common divisor (GCD) of two numbers. The GCD of two or more non-zero integers is the largest positive integer that divides them without a remainder. For example, the GCD of 12 and 18 is 6. (Hint: use the Euclidean algorithm).</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="functions.html#cb82-1" tabindex="-1"></a>gcd <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb82-2"><a href="functions.html#cb82-2" tabindex="-1"></a>  <span class="cf">while</span> (b <span class="sc">!=</span> <span class="dv">0</span>) {</span>
<span id="cb82-3"><a href="functions.html#cb82-3" tabindex="-1"></a>    temp <span class="ot">&lt;-</span> b</span>
<span id="cb82-4"><a href="functions.html#cb82-4" tabindex="-1"></a>    b <span class="ot">&lt;-</span> a <span class="sc">%%</span> b</span>
<span id="cb82-5"><a href="functions.html#cb82-5" tabindex="-1"></a>    a <span class="ot">&lt;-</span> temp</span>
<span id="cb82-6"><a href="functions.html#cb82-6" tabindex="-1"></a>  }</span>
<span id="cb82-7"><a href="functions.html#cb82-7" tabindex="-1"></a>  <span class="fu">return</span>(a)</span>
<span id="cb82-8"><a href="functions.html#cb82-8" tabindex="-1"></a>}</span></code></pre></div>
</details>
<ol start="18" style="list-style-type: decimal">
<li><p>Create a function called <code>validate_password()</code> validating a password. The function should receive a <code>password</code> argument and return <code>TRUE</code> if the password meets the following conditions, and <code>FALSE</code> otherwise:</p>
<ul>
<li>Has at least 8 characters.</li>
<li>Contains at least one uppercase letter.</li>
<li>Contains at least one lowercase letter.</li>
<li>Contains at least one number.</li>
<li>Contains at least one special character (!@#$%^&amp;*).</li>
</ul></li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="functions.html#cb83-1" tabindex="-1"></a>validate_password <span class="ot">&lt;-</span> <span class="cf">function</span>(password) {</span>
<span id="cb83-2"><a href="functions.html#cb83-2" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nchar</span>(password) <span class="sc">&lt;</span> <span class="dv">8</span>) {</span>
<span id="cb83-3"><a href="functions.html#cb83-3" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb83-4"><a href="functions.html#cb83-4" tabindex="-1"></a>  }</span>
<span id="cb83-5"><a href="functions.html#cb83-5" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;[A-Z]&quot;</span>, password)) {</span>
<span id="cb83-6"><a href="functions.html#cb83-6" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb83-7"><a href="functions.html#cb83-7" tabindex="-1"></a>  }</span>
<span id="cb83-8"><a href="functions.html#cb83-8" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;[a-z]&quot;</span>, password)) {</span>
<span id="cb83-9"><a href="functions.html#cb83-9" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb83-10"><a href="functions.html#cb83-10" tabindex="-1"></a>  }</span>
<span id="cb83-11"><a href="functions.html#cb83-11" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;[0-9]&quot;</span>, password)) {</span>
<span id="cb83-12"><a href="functions.html#cb83-12" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb83-13"><a href="functions.html#cb83-13" tabindex="-1"></a>  }</span>
<span id="cb83-14"><a href="functions.html#cb83-14" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;[!@#$%^&amp;*]&quot;</span>, password)) {</span>
<span id="cb83-15"><a href="functions.html#cb83-15" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb83-16"><a href="functions.html#cb83-16" tabindex="-1"></a>  }</span>
<span id="cb83-17"><a href="functions.html#cb83-17" tabindex="-1"></a>  <span class="fu">return</span>(<span class="cn">TRUE</span>)</span>
<span id="cb83-18"><a href="functions.html#cb83-18" tabindex="-1"></a>}</span></code></pre></div>
</details>
<ol start="19" style="list-style-type: decimal">
<li>Create a function called <code>apply_discount()</code> receiving a price calculation function and a discount as arguments. The <code>apply_discount()</code> function should return a new function calculating the price with the discount applied.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="functions.html#cb84-1" tabindex="-1"></a>apply_discount <span class="ot">&lt;-</span> <span class="cf">function</span>(price_function, discount) {</span>
<span id="cb84-2"><a href="functions.html#cb84-2" tabindex="-1"></a>  <span class="cf">function</span>(original_price) {</span>
<span id="cb84-3"><a href="functions.html#cb84-3" tabindex="-1"></a>    discounted_price <span class="ot">&lt;-</span> <span class="fu">price_function</span>(original_price) <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> discount)</span>
<span id="cb84-4"><a href="functions.html#cb84-4" tabindex="-1"></a>    <span class="fu">return</span>(discounted_price)</span>
<span id="cb84-5"><a href="functions.html#cb84-5" tabindex="-1"></a>  }</span>
<span id="cb84-6"><a href="functions.html#cb84-6" tabindex="-1"></a>}</span></code></pre></div>
</details>
<ol start="20" style="list-style-type: decimal">
<li>Create a function called <code>create_temperature_converter()</code> receiving a temperature scale as argument (“Celsius”, “Fahrenheit” or “Kelvin”). The function should return a function converting temperatures to the specified scale.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="functions.html#cb85-1" tabindex="-1"></a>create_temperature_converter <span class="ot">&lt;-</span> <span class="cf">function</span>(scale) {</span>
<span id="cb85-2"><a href="functions.html#cb85-2" tabindex="-1"></a>  <span class="cf">if</span> (scale <span class="sc">==</span> <span class="st">&quot;Celsius&quot;</span>) {</span>
<span id="cb85-3"><a href="functions.html#cb85-3" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cf">function</span>(temp) (temp <span class="sc">-</span> <span class="dv">32</span>) <span class="sc">*</span> <span class="dv">5</span> <span class="sc">/</span> <span class="dv">9</span>)  <span class="co"># Fahrenheit to Celsius</span></span>
<span id="cb85-4"><a href="functions.html#cb85-4" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (scale <span class="sc">==</span> <span class="st">&quot;Fahrenheit&quot;</span>) {</span>
<span id="cb85-5"><a href="functions.html#cb85-5" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cf">function</span>(temp) (temp <span class="sc">*</span> <span class="dv">9</span> <span class="sc">/</span> <span class="dv">5</span>) <span class="sc">+</span> <span class="dv">32</span>)  <span class="co"># Celsius to Fahrenheit</span></span>
<span id="cb85-6"><a href="functions.html#cb85-6" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (scale <span class="sc">==</span> <span class="st">&quot;Kelvin&quot;</span>) {</span>
<span id="cb85-7"><a href="functions.html#cb85-7" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cf">function</span>(temp) temp <span class="sc">+</span> <span class="fl">273.15</span>)  <span class="co"># Celsius to Kelvin</span></span>
<span id="cb85-8"><a href="functions.html#cb85-8" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb85-9"><a href="functions.html#cb85-9" tabindex="-1"></a>      <span class="co"># We use message() and return(NA) because we haven&#39;t covered stop() yet</span></span>
<span id="cb85-10"><a href="functions.html#cb85-10" tabindex="-1"></a>      <span class="fu">message</span>(<span class="st">&quot;Invalid temperature scale.&quot;</span>)</span>
<span id="cb85-11"><a href="functions.html#cb85-11" tabindex="-1"></a>      <span class="fu">return</span>(<span class="cn">NA</span>)</span>
<span id="cb85-12"><a href="functions.html#cb85-12" tabindex="-1"></a>  }</span>
<span id="cb85-13"><a href="functions.html#cb85-13" tabindex="-1"></a>}</span></code></pre></div>
</details>
<ol start="21" style="list-style-type: decimal">
<li>Create a function called <code>guess_number()</code> simulating a guess the number game. The function should generate a random number between 1 and 100 and ask the user to guess it. The function should give hints to the user (higher or lower) and count the number of attempts. (Hint: use a closure to store the secret number and the number of attempts).</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="functions.html#cb86-1" tabindex="-1"></a>guess_number <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb86-2"><a href="functions.html#cb86-2" tabindex="-1"></a>  secret_number <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>, <span class="dv">1</span>)</span>
<span id="cb86-3"><a href="functions.html#cb86-3" tabindex="-1"></a>  attempts <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb86-4"><a href="functions.html#cb86-4" tabindex="-1"></a></span>
<span id="cb86-5"><a href="functions.html#cb86-5" tabindex="-1"></a>  guess <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb86-6"><a href="functions.html#cb86-6" tabindex="-1"></a>    attempts <span class="ot">&lt;&lt;-</span> attempts <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb86-7"><a href="functions.html#cb86-7" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;Attempt&quot;</span>, attempts, <span class="st">&quot;: &quot;</span>)</span>
<span id="cb86-8"><a href="functions.html#cb86-8" tabindex="-1"></a>    number <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">readline</span>())</span>
<span id="cb86-9"><a href="functions.html#cb86-9" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">is.na</span>(number)) {</span>
<span id="cb86-10"><a href="functions.html#cb86-10" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;Please enter a valid number.</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb86-11"><a href="functions.html#cb86-11" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (number <span class="sc">&lt;</span> secret_number) {</span>
<span id="cb86-12"><a href="functions.html#cb86-12" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;The secret number is higher.</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb86-13"><a href="functions.html#cb86-13" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (number <span class="sc">&gt;</span> secret_number) {</span>
<span id="cb86-14"><a href="functions.html#cb86-14" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;The secret number is lower.</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb86-15"><a href="functions.html#cb86-15" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb86-16"><a href="functions.html#cb86-16" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;You guessed it! The secret number was&quot;</span>, secret_number, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb86-17"><a href="functions.html#cb86-17" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;It took you&quot;</span>, attempts, <span class="st">&quot;attempts.</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb86-18"><a href="functions.html#cb86-18" tabindex="-1"></a>    }</span>
<span id="cb86-19"><a href="functions.html#cb86-19" tabindex="-1"></a>  }</span>
<span id="cb86-20"><a href="functions.html#cb86-20" tabindex="-1"></a></span>
<span id="cb86-21"><a href="functions.html#cb86-21" tabindex="-1"></a>  <span class="fu">return</span>(guess)</span>
<span id="cb86-22"><a href="functions.html#cb86-22" tabindex="-1"></a>}</span>
<span id="cb86-23"><a href="functions.html#cb86-23" tabindex="-1"></a></span>
<span id="cb86-24"><a href="functions.html#cb86-24" tabindex="-1"></a>game <span class="ot">&lt;-</span> <span class="fu">guess_number</span>()</span>
<span id="cb86-25"><a href="functions.html#cb86-25" tabindex="-1"></a></span>
<span id="cb86-26"><a href="functions.html#cb86-26" tabindex="-1"></a><span class="fu">game</span>()</span>
<span id="cb86-27"><a href="functions.html#cb86-27" tabindex="-1"></a><span class="co">#&gt; Attempt 1 : </span></span>
<span id="cb86-28"><a href="functions.html#cb86-28" tabindex="-1"></a><span class="co">#&gt; Please enter a valid number.</span></span></code></pre></div>
</details>
<ol start="22" style="list-style-type: decimal">
<li>Create a function that, given a vector of integers, finds the contiguous subsequence with the maximum sum. For example, for the vector <code>c(-2, 1, -3, 4, -1, 2, 1, -5, 4)</code>, the contiguous subsequence with the maximum sum is <code>c(4, -1, 2, 1)</code>, with a sum of 6.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="functions.html#cb87-1" tabindex="-1"></a>max_subsequence <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb87-2"><a href="functions.html#cb87-2" tabindex="-1"></a>  current_max <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb87-3"><a href="functions.html#cb87-3" tabindex="-1"></a>  global_max <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb87-4"><a href="functions.html#cb87-4" tabindex="-1"></a>  start <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb87-5"><a href="functions.html#cb87-5" tabindex="-1"></a>  end <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb87-6"><a href="functions.html#cb87-6" tabindex="-1"></a>  temp_start <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb87-7"><a href="functions.html#cb87-7" tabindex="-1"></a></span>
<span id="cb87-8"><a href="functions.html#cb87-8" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x)) {</span>
<span id="cb87-9"><a href="functions.html#cb87-9" tabindex="-1"></a>    current_max <span class="ot">&lt;-</span> current_max <span class="sc">+</span> x[i]</span>
<span id="cb87-10"><a href="functions.html#cb87-10" tabindex="-1"></a>    <span class="cf">if</span> (current_max <span class="sc">&gt;</span> global_max) {</span>
<span id="cb87-11"><a href="functions.html#cb87-11" tabindex="-1"></a>      global_max <span class="ot">&lt;-</span> current_max</span>
<span id="cb87-12"><a href="functions.html#cb87-12" tabindex="-1"></a>      start <span class="ot">&lt;-</span> temp_start</span>
<span id="cb87-13"><a href="functions.html#cb87-13" tabindex="-1"></a>      end <span class="ot">&lt;-</span> i</span>
<span id="cb87-14"><a href="functions.html#cb87-14" tabindex="-1"></a>    }</span>
<span id="cb87-15"><a href="functions.html#cb87-15" tabindex="-1"></a>    <span class="cf">if</span> (current_max <span class="sc">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb87-16"><a href="functions.html#cb87-16" tabindex="-1"></a>      current_max <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb87-17"><a href="functions.html#cb87-17" tabindex="-1"></a>      temp_start <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb87-18"><a href="functions.html#cb87-18" tabindex="-1"></a>    }</span>
<span id="cb87-19"><a href="functions.html#cb87-19" tabindex="-1"></a>  }</span>
<span id="cb87-20"><a href="functions.html#cb87-20" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">subsequence =</span> x[start<span class="sc">:</span>end], <span class="at">sum =</span> global_max))</span>
<span id="cb87-21"><a href="functions.html#cb87-21" tabindex="-1"></a>}</span>
<span id="cb87-22"><a href="functions.html#cb87-22" tabindex="-1"></a></span>
<span id="cb87-23"><a href="functions.html#cb87-23" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">4</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">4</span>)</span>
<span id="cb87-24"><a href="functions.html#cb87-24" tabindex="-1"></a><span class="fu">max_subsequence</span>(test)</span>
<span id="cb87-25"><a href="functions.html#cb87-25" tabindex="-1"></a><span class="co">#&gt; $subsequence</span></span>
<span id="cb87-26"><a href="functions.html#cb87-26" tabindex="-1"></a><span class="co">#&gt; [1]  4 -1  2  1</span></span>
<span id="cb87-27"><a href="functions.html#cb87-27" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb87-28"><a href="functions.html#cb87-28" tabindex="-1"></a><span class="co">#&gt; $sum</span></span>
<span id="cb87-29"><a href="functions.html#cb87-29" tabindex="-1"></a><span class="co">#&gt; [1] 6</span></span></code></pre></div>
</details>
<ol start="23" style="list-style-type: decimal">
<li>Create a function that, given a character vector, determines if it is possible to obtain a palindrome by rearranging its letters. A palindrome is a word or phrase that reads the same left to right as right to left (e.g. “radar”).</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="functions.html#cb88-1" tabindex="-1"></a>is_palindrome_possible <span class="ot">&lt;-</span> <span class="cf">function</span>(text) {</span>
<span id="cb88-2"><a href="functions.html#cb88-2" tabindex="-1"></a>  letters <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(<span class="fu">tolower</span>(text), <span class="st">&quot;&quot;</span>)[[<span class="dv">1</span>]]</span>
<span id="cb88-3"><a href="functions.html#cb88-3" tabindex="-1"></a>  frequencies <span class="ot">&lt;-</span> <span class="fu">table</span>(letters)</span>
<span id="cb88-4"><a href="functions.html#cb88-4" tabindex="-1"></a>  odds <span class="ot">&lt;-</span> <span class="fu">sum</span>(frequencies <span class="sc">%%</span> <span class="dv">2</span>)</span>
<span id="cb88-5"><a href="functions.html#cb88-5" tabindex="-1"></a>  <span class="fu">return</span>(odds <span class="sc">&lt;=</span> <span class="dv">1</span>)</span>
<span id="cb88-6"><a href="functions.html#cb88-6" tabindex="-1"></a>}</span>
<span id="cb88-7"><a href="functions.html#cb88-7" tabindex="-1"></a></span>
<span id="cb88-8"><a href="functions.html#cb88-8" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;radar&quot;</span>, <span class="st">&quot;hello&quot;</span>, <span class="st">&quot;abb&quot;</span>)</span>
<span id="cb88-9"><a href="functions.html#cb88-9" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">sapply</span>(test, is_palindrome_possible)</span>
<span id="cb88-10"><a href="functions.html#cb88-10" tabindex="-1"></a>result</span>
<span id="cb88-11"><a href="functions.html#cb88-11" tabindex="-1"></a><span class="co">#&gt; radar hello   abb </span></span>
<span id="cb88-12"><a href="functions.html#cb88-12" tabindex="-1"></a><span class="co">#&gt;  TRUE FALSE  TRUE</span></span></code></pre></div>
</details>
<ol start="24" style="list-style-type: decimal">
<li>Create a function that, given a positive integer, determines if it is a prime number. A prime number is a natural number greater than 1 that has no divisors other than 1 and itself.</li>
</ol>
<details>
<summary type="button">
Solution
</summary>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="functions.html#cb89-1" tabindex="-1"></a>is_prime <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb89-2"><a href="functions.html#cb89-2" tabindex="-1"></a>  <span class="cf">if</span> (n <span class="sc">&lt;=</span> <span class="dv">1</span>) {</span>
<span id="cb89-3"><a href="functions.html#cb89-3" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb89-4"><a href="functions.html#cb89-4" tabindex="-1"></a>  }</span>
<span id="cb89-5"><a href="functions.html#cb89-5" tabindex="-1"></a>  <span class="cf">if</span> (n <span class="sc">&lt;=</span> <span class="dv">3</span>) {</span>
<span id="cb89-6"><a href="functions.html#cb89-6" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">TRUE</span>)</span>
<span id="cb89-7"><a href="functions.html#cb89-7" tabindex="-1"></a>  }</span>
<span id="cb89-8"><a href="functions.html#cb89-8" tabindex="-1"></a>  <span class="cf">if</span> (n <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span> <span class="sc">||</span> n <span class="sc">%%</span> <span class="dv">3</span> <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb89-9"><a href="functions.html#cb89-9" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb89-10"><a href="functions.html#cb89-10" tabindex="-1"></a>  }</span>
<span id="cb89-11"><a href="functions.html#cb89-11" tabindex="-1"></a>  i <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb89-12"><a href="functions.html#cb89-12" tabindex="-1"></a>  <span class="cf">while</span> (i <span class="sc">*</span> i <span class="sc">&lt;=</span> n) {</span>
<span id="cb89-13"><a href="functions.html#cb89-13" tabindex="-1"></a>    <span class="cf">if</span> (n <span class="sc">%%</span> i <span class="sc">==</span> <span class="dv">0</span> <span class="sc">||</span> n <span class="sc">%%</span> (i <span class="sc">+</span> <span class="dv">2</span>) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb89-14"><a href="functions.html#cb89-14" tabindex="-1"></a>      <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb89-15"><a href="functions.html#cb89-15" tabindex="-1"></a>    }</span>
<span id="cb89-16"><a href="functions.html#cb89-16" tabindex="-1"></a>    i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">6</span></span>
<span id="cb89-17"><a href="functions.html#cb89-17" tabindex="-1"></a>  }</span>
<span id="cb89-18"><a href="functions.html#cb89-18" tabindex="-1"></a>  <span class="fu">return</span>(<span class="cn">TRUE</span>)</span>
<span id="cb89-19"><a href="functions.html#cb89-19" tabindex="-1"></a>}</span></code></pre></div>
The condition <code>i * i &lt;= n</code> in the <code>while</code> loop limits iterations to the square root of <code>n</code>. This optimizes the algorithm, as it is not necessary to check divisors greater than the square root of <code>n</code>.
The increment <code>i &lt;- i + 6</code> is based on the observation that all prime numbers greater than 3 can be expressed in the form 6k ± 1. Therefore, only numbers of the form 6k ± 1 need to be checked as possible divisors.
</details>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="objects.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-frames.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": true,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": null
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": null,
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
